treatment "GIMS_v8.3.2_2019-03-12.ztt"{
	background{
		table globals{
		}
		table subjects{
		}
		table summary{
		}
		table contracts{
		}
		table session{
		}
		table logfile{
		}
		table auctionoffers{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table auctionpractice{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table dividends{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table dividends_preset{
			lifetime = TREATMENT;
			execute = WITHEACH;
		}
		table endowments{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table import{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table indicativepricedetermination{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table layout{
			lifetime = TREATMENT;
			execute = WITHEACH;
		}
		table marketsummary{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table offers{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table practicetasks{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table pricedetermination{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table profit{
			lifetime = TREATMENT;
			execute = WITHEACH;
		}
		table results{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table settings_globals{
			lifetime = TREATMENT;
			execute = WITHEACH;
		}
		table settlement{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table signals{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table signals_preset{
			lifetime = TREATMENT;
			execute = WITHEACH;
		}
		table tbsa{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table tbsb{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table timelog{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		table transactions{
			lifetime = PERIOD;
			execute = WITHEACH;
		}
		numsubjects = 3;
		numgroups = 1;
		numpracticeperiods = 0;
		numactualperiods = 1;
		exchangerate = 1;
		startendowment = 0;
		showupfee = 0;
		noAutoscope = FALSE;
		firstBoxesOnTop = FALSE;
		showupfeeawaytext = "Sie haben Verlust gemacht. Wollen Sie das Startgeld einsetzen, um diesen Verlust zu decken?";
		showupfeeawayyestext = "Ja";
		showupfeeawaynotext = "Nein";
		moneyawaytext = "Sie haben Verlust gemacht. Wollen Sie weiterfahren?";
		moneyawayyestext = "Ja";
		moneyawaynotext = "Nein";
		bancruptwaittext = "Bitte warten Sie, bis Ihr Computer wieder freigegeben wird.";
		program{
			table = globals;
			do{
				//##### GIMS Version #####
				
				GIMSVersion="8.3.2";
				GIMSDate="12.03.2019";
				
			}
		}
		program{
			table = globals;
			do{
				//##### GIMS License #####
				
				/*
				
				Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
				
				    * Any publications (e.g. academic reports, papers, other disclosure of results) based, in whole or in part, on data obtained with the use of this software, or of software derived from it, will acknowledge its use by mentioning the name "GIMS - Graz-Innsbruck Market System" and an appropiate citation of the following publication (or an updated version): Palan, S., 2015. GIMS - Software for Asset Market Experiments, Journal of Behavioral and Experimental Finance 5, 1-14, DOI: 10.1016/j.jbef.2015.02.001.
				
				    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
				
				    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
				
				    * Neither the name of GIMS nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
				
				THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE DEVELOPER(S) OF GIMS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
				
				*/
			}
		}
		program{
			table = timelog;
			condition = \Period==1;
			do{
				//Variable initialization timelog
				
				ID=0;
				Time=0;
				Period=0;
				Subject=0;
				Event=0;
				array Data[4];
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				//Sets starting time in globals table
				StartTime=gettime();
				
				//Timelogs program start
				if(Period==1){
				    timelog.new
				        {
				        ID=1;
				        Time=0;
				        Period=1;
				        Subject=0;
				        Event=1;
				        }
				    }
				else{
				    timelog.new
				        {
				        ID=OLDtimelog.maximum(ID)+1;
				        Time=0;
				        Period=\Period;
				        Subject=0;
				        Event=1;
				        }
				    }
				
			}
		}
		program{
			table = globals;
			do{
				//### P1: General parameters ###
				
				Testmode1=0;   //Turns on Experimenter buttons on all screens
				CQTestmode=0;    //Skips ControlQuestion stage
				
				PracticePeriod=0;
				NumExperimenterSubjects=1;
				Language=1;    //1=English, 2=German
				TimerInterval=1;
				BackupDump=1;
				
				//Questionnaire settings
				CurrentYear=2018;
				
				//Payoff settings
				ExchangeRate=1;
				MinPayoffCurrency=0;
				MinPayoffECU=0;
				Currency=1;    //1=Euro 2=US Dollars 3=Danish Kroner 4=Australian Dollars
				PayoffPrecision=0.1;    //Multiple to round payoffs to, in EUR or equivalent
				
				I=-77777;
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//### P2: Stage settings ###
				
				//Switching on and off program modules
				ContinuousDoubleAuction=1;
				CallAuction=1-ContinuousDoubleAuction;
				CRTBefore=if(PracticePeriod==1,0,0);
				CRTAfter=0;//if(PracticePeriod==1,0,0);
				FinLit=0;//if(PracticePeriod==1,0,0);
				HLBefore=0;    //Currently only before or after supported. Reset HLChoice=\I in between if you want to record both.
				HLAfter=0;
				SettingsStage=1;
				ControlQuestions=if(PracticePeriod==0&Period==1,1,0);
				NumCQ=2;
				subjects.do{array CQ[\NumCQ];}
				
				//Stage durations
				TimeContinuousDoubleAuction=if(\PracticePeriod==1,300,180);
				TimeContinuousDoubleAuctionResults=if(\PracticePeriod==1,60,30);
				TimeCallAuction=-1;
				TimeCallAuctionResults=30;
				TimeFinLitResult=1;
				TimeHoltLaury=-1;
				TimeHoltLauryResult=30;
				
			}
		}
		program{
			table = globals;
			do{
				//### P3: General market parameters ###
				
				NumMarkets=4;
				ForceSingleMarket=0;
				array MultiUnitTrading[NumMarkets];
				PresetDividends=0;
				PresetSignals=0;
				TickSize=0.01;
				SignalSuperSet=1;
				SignalPrecision=0.1;
				CarryOverWealth=1;
				PricePrecision=0.01;
				VolumePrecision=1;
				CashPrecision=PricePrecision;
				AssetPrecision=VolumePrecision;
				ConnectedMarketMechanisms=0;
				IndependentPeriods=0;
				RandomPeriodPayoff=0;
				array BBV[NumMarkets];
				array AssetName[NumMarkets];
				
				for(Market, \NumMarkets) {
				    BBV[Market]=0;
				    MultiUnitTrading[Market]=1;
				    }
				
				//Dividends
				DividendSet=1;
				
			}
		}
		program{
			table = globals;
			do{
				//### P3a: Call auction parameters ###
				
				//Defines variables
				
				IndicativePriceInterval=-1;
				ShowCAPracticeResults=1;
				
				array NumTypedOffersCallAuction[\NumMarkets];
				array MarketOrderPriority[\NumMarkets];
				array AllowMarketOrders[\NumMarkets];
				array CallAuctionSignals[\NumMarkets];
				
				//Fills in default values
				for(Market,\NumMarkets){
				    NumTypedOffersCallAuction[Market]=0;
				    MarketOrderPriority[Market]=1;
				    AllowMarketOrders[Market]=1;
				    CallAuctionSignals[Market]=1;
				    }
			}
		}
		program{
			table = globals;
			do{
				//### P3b: Continuous double auction parameters ###
				
				array OfferImprovementRule[\NumMarkets];
				array EmptyBookAfterTrade[\NumMarkets];
				array PartialInvalidation[\NumMarkets];
				array PriceListDepth[\NumMarkets];
				ShowPricelist=1;
				ShowChart=1;
				SpamControl=0;
				PracticeTasks=1;
				ContinuousDoubleAuctionSignals=1;
				array OrderBookDepth[\NumMarkets];
				EarlyEndingVote=0;
				PriceHighlightScheme=if(\NumMarkets>1,1,0);
				PriceHighlightDuration=2;
				CDATimer=TimerInterval;
				
				for(Market, \NumMarkets){
				    OfferImprovementRule[Market]=1;
				    EmptyBookAfterTrade[Market]=0;
				    PartialInvalidation[Market]=0;
				    OrderBookDepth[Market]=3;
				    PriceListDepth[Market]=4;
				    }
				
			}
		}
		program{
			table = globals;
			do{
				//### P4: FinLit settings ###
				
				PayFinLit=0;
				PayoffFinLit=1;
				PayFinLitRandom=0;
				
				array AskFinLit[16];
				AskFinLit[1]=1;
				AskFinLit[2]=1;
				AskFinLit[3]=1;
				AskFinLit[4]=1;
				AskFinLit[5]=1;
				AskFinLit[6]=1;
				AskFinLit[7]=1;
				AskFinLit[8]=1;
				AskFinLit[9]=1;
				AskFinLit[10]=1;
				AskFinLit[11]=1;
				AskFinLit[12]=1;
				AskFinLit[13]=1;
				AskFinLit[14]=1;
				AskFinLit[15]=1;
				AskFinLit[16]=1;
				
			}
		}
		program{
			table = globals;
			do{
				//### P5: Holt/Laury settings ###
				
				PayoffAHigh=2.0;
				PayoffALow=1.6;
				PayoffBHigh=3.85;
				PayoffBLow=0.1;
				
			}
		}
		program{
			table = layout;
			condition = \Period==1;
			do{
				//Variable initialization layout
				
				IDNumeric=\I;
				ID="";
				R=0;
				G=0;
				B=0;
				Color=rgb(0,0,0);
				
			}
		}
		program{
			table = globals;
			do{
				//Variable initialization globals (additional variables)
				
				array Temp[4];
				for(i,4){
				    Temp[i]=\I;
				    }
				Done=0;
				Blink=1;
				BlinkOn=1;
				
				NumSubjects=subjects.count()-NumExperimenterSubjects;
				NumFinLit=(AskFinLit[1]+AskFinLit[2]+AskFinLit[3]+AskFinLit[4]+AskFinLit[5]+AskFinLit[6]+AskFinLit[7]+AskFinLit[8]+AskFinLit[9]+AskFinLit[10]+AskFinLit[11]+AskFinLit[12]+AskFinLit[13]+AskFinLit[14]+AskFinLit[15]+AskFinLit[16])*FinLit;
				
				array LastPrice[\NumMarkets];
				
				CallAuctionDone=0;
				ResultsDone=0;
				CQDone=0;
				StartTimeCDA=\I;
				
				//Do not change to simple if statement because this can cause a crash
				ForcedExitExperiment=0;
				if(Period>1){
				    ForcedExitExperiment=OLDglobals.find(ForcedExitExperiment);
				    }
				ForcedExitPeriod=0;
				
				//Call auction
				array AuctionPrice[\NumMarkets];
				array AuctionVolume[\NumMarkets];
				array AuctionVolumeTotal[\NumMarkets];
				array TradeProcessingSide[\NumMarkets];
				array Dividend[\NumMarkets];
				
				array PriceDeterminationRule[\NumMarkets];
				
				array TempPrice[\NumMarkets];
				array BuyMarketVol[\NumMarkets];
				array SellMarketVol[\NumMarkets];
				array NumVolumeMaximizingPrices[\NumMarkets];
				
				for(Market,\NumMarkets){
				    LastPrice[Market]=\I;
				    AuctionPrice[Market]=\I;
				    AuctionVolume[Market]=\I;
				    AuctionVolumeTotal[Market]=\I;
				    TradeProcessingSide[Market]=0;
				    PriceDeterminationRule[Market]=\I;
				    Dividend[Market]=\I;
				    }
				
				RandomPayoffPeriod=roundup(random()*NumPeriods,1);
				
			}
		}
		program{
			table = globals;
			do{
				//### P6: Layout settings ###
				
				//General
				FontSizeStandard=18;
				FontSizeHeading=22;
				FontSizeSubHeading=20;
				FontSizeCQ=18;
				array PriceHighlightColor[\NumMarkets];
				array PriceHighlightTime[\NumMarkets];
				
				//Input
				MinPrice=1;
				MaxPrice=100000;
				MinVol=1;
				MaxVol=100000;
				
				//Blink
				BlinkInterval=1;
				
				//Chart
				array ChartYMax[NumMarkets];
				array ChartYTickDistance[NumMarkets];
				array ChartYLabelDistance[NumMarkets];
				array ChartXMax[NumMarkets];
				array ChartXTickDistance[NumMarkets];
				array ChartXLabelDistance[NumMarkets];
				SpaceAboveMaxPrice=0.3;
				
				for(Market, \NumMarkets){
				    ChartYMax[Market]=\I;
				    ChartYTickDistance[Market]=\I;
				    ChartYLabelDistance[Market]=\I;
				    ChartXMax[Market]=TimeContinuousDoubleAuction;
				    ChartXTickDistance[Market]=10;
				    ChartXLabelDistance[Market]=if(TimeContinuousDoubleAuction<=270,30,60);
				    PriceHighlightColor[Market]=9;
				    PriceHighlightTime[Market]=\I;
				    }
				
				//Colors
				if(\Period==1){
				    layout.new{IDNumeric=1;ID="CA_Signals_BG";Color=rgb(0.88,1,0.85);}
				    //layout.new{IDNumeric=2;ID="CA_PriceList_BG";Color=rgb(1,0.83,0.83);}
				    layout.new{IDNumeric=3;ID="CA_BuyOffers_BG";Color=rgb(1,0.9,0.8);}
				    layout.new{IDNumeric=4;ID="CA_SellOffers_BG";Color=rgb(1,0.9,0.8);}
				    layout.new{IDNumeric=5;ID="CA_OrderSubmission_BG";Color=rgb(1,1,0.8);}
				    layout.new{IDNumeric=6;ID="CA_History_BG";Color=rgb(0.82,0.85,1);}
				    layout.new{IDNumeric=7;ID="CA_BG";Color=rgb(1,1,1);}
				    layout.new{IDNumeric=8;ID="CDA_Signals_BG";Color=rgb(0.96,0.79,0.95);}
				    layout.new{IDNumeric=9;ID="CDA_PriceList_BG";Color=rgb(1,0.83,0.83);}
				    layout.new{IDNumeric=10;ID="CDA_BuyOffers_BG";Color=rgb(1,0.9,0.8);}
				    layout.new{IDNumeric=11;ID="CDA_SellOffers_BG";Color=rgb(1,0.9,0.8);}
				    layout.new{IDNumeric=12;ID="CDA_OrderSubmission_BG";Color=rgb(1,1,0.8);}
				    layout.new{IDNumeric=13;ID="CDA_History_BG";Color=rgb(0.82,0.85,1);}
				    layout.new{IDNumeric=14;ID="CDA_Chart_Line";Color=rgb(0,0,1);}
				    layout.new{IDNumeric=15;ID="CDA_Chart_BG";Color=rgb(1,1,1);}
				    layout.new{IDNumeric=16;ID="CDA_BG";Color=rgb(1,1,1);}
				    layout.new{IDNumeric=17;ID="Highlighting_Scheme0";Color=rgb(0.94,0.94,0.94);}
				    layout.new{IDNumeric=18;ID="Highlighting_Scheme1_Up";Color=rgb(0,0.79,0);}
				    layout.new{IDNumeric=19;ID="Highlighting_Scheme1_Down";Color=rgb(1,0,0);}
				    layout.new{IDNumeric=20;ID="Highlighting_Scheme2_Up";Color=rgb(1,0.5,0);}
				    layout.new{IDNumeric=21;ID="Highlighting_Scheme2_Down";Color=rgb(0,0,1);}
				    layout.new{IDNumeric=22;ID="CDA_MarketOverview_BG";Color=rgb(0.88,1,0.85);}
				    }
			}
		}
		program{
			table = subjects;
			do{
				//### P7: Subject settings ####
				
				ShortingCapacityCash=0;
				array ShortingCapacityAssets[\NumMarkets];
				for(Market,\NumMarkets){
				    ShortingCapacityAssets[Market]=0;
				    }
				EarlyEndingVote=0;
				
			}
		}
		program{
			table = subjects;
			do{
				//Variable initialization subjects 1/2
				
				InitialCash=\I;
				Cash=\I;
				AssetValueTemp=\I;
				array InitialAssets[\NumMarkets];
				array Assets[\NumMarkets];
				
				array DisplayMarket[\NumMarkets];
				
				//Sets standard values
				for(Market,\NumMarkets){
				    if(\NumMarkets==1){DisplayMarket[Market]=1;}
				        elsif(\CallAuction==1){DisplayMarket[Market]=if(Market==1,2,if(Market==2,1,Market));}
				        else {DisplayMarket[Market]=Market;}
				    InitialAssets[Market]=\I;
				    Assets[Market]=\I;
				    }
				
				IsExperimenter=if(Subject<=\NumSubjects,0,1);
				
				//Status to display in the history box
				DisplayStatus=-1;
				
				array AnswerFinLit[16];
				FinLitID=0;
				FinLitScore=\I;
				FinLitRandomPayQuestion=\I;
				FinLitRandomPayQuestionID=\I;
				
				CRT1=\I;
				CRT2=\I;
				CRT3=\I;
				CRT=\I;
				
				HL=0;
				HLChoice=\I;
				HLRandomRow=\I;
				HLDieRoll=\I;
				HLPayoff=\I;
				
				CQAnswered=\I;
				
				//Temporary variables
				r=\I;
				i=\I;
				j=\I;
			}
		}
		program{
			table = subjects;
			do{
				//Variable initialization subjects 2/2
				
				if(Period>1&\CarryOverWealth==1) {
				    Cash=OLDsubjects.find(same(Subject),Cash);
				    for(Market,\NumMarkets){
				        Assets[Market]=OLDsubjects.find(Subject==:Subject,Assets[:Market]);
				        }
				    }
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//Variable initialization Settings stage
				
				SettingsScreen=1;
				SettingsEntryShow=0;
				SettingsEntryTitle="#################################################################################";
				SettingsEntryValue=\I;
				SettingsEntryPrecision=\I;
				SettingsEntryMin=\I;
				SettingsEntryMax=\I;
				
				subjects.do{
				    SettingsEntryValue=\I;
				    }
				
			}
		}
		program{
			table = session;
			do{
				//Writes data for questionnaire use
				
				IsExperimenter=subjects.find(same(Subject),IsExperimenter);
				ExchangeRate=\ExchangeRate;
				
			}
		}
		program{
			table = contracts;
			do{
				//Variable initialization contracts
				
				Period=\Period;
				Market=\I;
				ID=0;
				WithinSubjectID=\I;
				Price=\I;
				Volume=\I;
				Transacted=\I;
				VolumeTraded=\I;
				Status=\I;
				Type=\I;
				OfferTime=\I;
				OfferID=\I;
				Time=\I;
				Offerer=\I;
				Accepter=\I;
				Phase=\I;
				PriceListRank=\I;
			}
		}
		program{
			table = endowments;
			do{
				//Variable initialization endowments
				
				Type=\I;
				Cash=\I;
				array Assets[\NumMarkets];
				
			}
		}
		program{
			table = globals;
			do{
				//Variable initialization marketsummary
				
				for(Market,\NumMarkets){
				    marketsummary.new{
				        Market=:Market;
				        Price=\I;
				        Volume=0;
				        }
				    }
				
			}
		}
		program{
			table = globals;
			do{
				//### P8: Endowment assignment ###
				
				endowments.new {
				    Type=1;
				    Cash=225*\NumMarkets;
				    for(Market,\NumMarkets){
				        Assets[Market]=3;
				        }
				    }
				endowments.new {
				    Type=2;
				    Cash=585*\NumMarkets;
				    for(Market,\NumMarkets){
				        Assets[Market]=2;
				        }
				    }
				endowments.new {
				    Type=3;
				    Cash=945*\NumMarkets;
				    for(Market,\NumMarkets){
				        Assets[Market]=1;
				        }
				    }
				
				EndowmentFillerType=2;
			}
		}
		program{
			table = globals;
			do{
				//Calculation of summary variables for endowment
				
				EndowmentTypes=endowments.count();
				EndowmentsPerType=rounddown(NumSubjects/EndowmentTypes,1);
				
			}
		}
		program{
			table = offers;
			do{
				//Variable initialization offers
				
				Market=\I;
				ID=0;
				Price=\I;
				Volume=\I;
				Transacted=\I;
				Invalidated=\I;
				Type=\I;
				Status=\I;
				Offerer=\I;
				OfferTime=\I;
				StatusTime=\I;
				BuyVol=\I;
				SellVol=\I;
				StatusTime=\I;
				OrderBookRank=\I;
				
			}
		}
		program{
			table = transactions;
			do{
				//Variable initialization transactions
				
				Market=\I;
				OfferID=\I;
				AcceptanceID=\I;
				AccepterID=\I;
				Price=\I;
				Volume=\I;
				Time=\I;
				Phase=\I;
				
			}
		}
		program{
			table = dividends_preset;
			do{
				//Variable initialization dividends_preset
				
				Period=\I;
				Set=\I;
				Market=\I;
				Dividend=\I;
				
			}
		}
		program{
			table = signals;
			do{
				//Variable initialization signals
				
				Period=\I;
				Set=\I;
				Type=\I;
				Signal=\I;
				Market=\I;
				
			}
		}
		program{
			table = signals_preset;
			do{
				//Variable initialization signals_preset
				
				Period=\I;
				SuperSet=\I;
				Set=\I;
				Type=\I;
				Signal=\I;
				Market=\I;
				
			}
		}
		tableloader{
			condition = \PresetSignals==1&\Period==1;
			inputreplacefilename = "signals_preset.zdata";
		}
		program{
			table = signals_preset;
			condition = SuperSet==\SignalSuperSet&same(Period);
			do{
				//Signal assignment preset
				
				signals.new{
				    Period=:Period;
				    Set=:Set;
				    Type=:Type;
				    Signal=:Signal;
				    Market=:Market;
				    }
				
				
			}
		}
		program{
			table = globals;
			condition = \PresetSignals==0&\Period==1;
			do{
				//### P7: Signal assignment manual ###
				
				signals.new{
				    Period=1;
				    Set=1;
				    Type=1;
				    Signal=99.4;
				    Market=1;
				    }
				
				signals.new{
				    Period=1;
				    Set=1;
				    Type=1;
				    Signal=96.4;
				    Market=1;
				    }
				
				signals.new{
				    Period=1;
				    Set=1;
				    Type=1;
				    Signal=103.1;
				    Market=1;
				    }
			}
		}
		program{
			table = profit;
			condition = FALSE;
			do{
				//Variable initialization profit 1/2
				
				Period=\I;
				Subject=\I;
				Profit=\I;
				Cash=\I;
				array Assets[\NumMarkets];
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			do{
				//Variable initialization profit 2/2
				
				profit.new{
				    Period=\Period;
				    Subject=:Subject;
				    Profit=\I;
				    Cash=\I;
				    for(Market,\NumMarkets){
				        Assets[Market]=\I;
				        }
				    }
				
			}
		}
		program{
			table = tbsa;
			do{
				//Variable initialization tbsa
				
				Market=\I;
				offersID=\I;
				tbsID=\I;
				Volume=\I;
				Transacted=\I;
				OrderType=\I;
				
				
			}
		}
		program{
			table = tbsb;
			do{
				//Variable initialization tbsb
				
				Market=\I;
				offersID=\I;
				tbsID=\I;
				Volume=\I;
				Transacted=\I;
				OrderType=\I;
				
				
			}
		}
		program{
			table = settlement;
			do{
				//Variable initialization settlement
				
				Market=\I;
				Period=\I;
				ID=0;
				BidID=\I;
				AskID=\I;
				Volume=\I;
				
				
			}
		}
		tableloader{
			condition = \PresetDividends==1&\Period==1;
			inputreplacefilename = "dividends_preset.zdata";
		}
		program{
			table = globals;
			do{
				//### P9: Assignment of dividends ###
				
				//Assigns preset dividends
				if (\PresetDividends==1) {
				    dividends_preset.do{
				        if (Period==\Period&Set==\DividendSet) {
				            dividends.new {
				                Period=:Period;
				                Type=1;
				                Dividend=:Dividend;
				                Market=:Market;
				                }
				            }
				        }
				    }
				
				//Assigns dividends manually
				else {
				    for(Market, \NumMarkets){
				        dividends.new {
				            Type=1;
				            Dividend=0;
				            Market=:Market;
				            }
				        dividends.new {
				            Type=2;
				            Dividend=8;
				            Market=:Market;
				            }
				        dividends.new {
				            Type=3;
				            Dividend=28;
				            Market=:Market;
				            }
				        dividends.new {
				            Type=4;
				            Dividend=60;
				            Market=:Market;
				            }
				        }
				    }
				
				//Defines summary variables
				array NumDividends[NumMarkets];
				array MeanDividend[NumMarkets];
				array MaxDividend[NumMarkets];
				array MinDividend[NumMarkets];
				
				//Calculates summary variables
				for(Market, \NumMarkets){
				    NumDividends[Market]=dividends.count(same(Market));
				    MeanDividend[Market]=dividends.sum(same(Market),Dividend)/NumDividends[Market];
				    MaxDividend[Market]=dividends.maximum(same(Market),Dividend);
				    MinDividend[Market]=dividends.minimum(same(Market),Dividend);
				    }
			}
		}
		program{
			table = globals;
			condition = \Period==1|\CarryOverWealth==0;
			do{
				//Assigns endowments
				   
				//Randomly assigns endowment type
				EndowmentType=1;
				//Repeats as often as there are endowment types
				
				while (EndowmentType<=EndowmentTypes) {
				    i=1;
				    //Repeats as often as one endowment type is assigned to a trader (e.g. 10 traders, 2 types = 5 times)
				    while (i<=EndowmentsPerType) {
				        j=roundup(random()*(NumSubjects-(EndowmentType-1)*EndowmentsPerType-(i-1)),1);
				        k=1;
				        l=0;
				        done=0;
				        while (k<=NumSubjects&done==0) {
				            if (subjects.find(Subject==:k,InitialCash)==\I) {l=l+1;}
				            if (j==l) {
				                subjects.do {
				                    if (Subject==:k) {
				                        InitialCash=endowments.find(Type==\EndowmentType,Cash);
				                        for(Market,\NumMarkets){
				                            InitialAssets[Market]=endowments.find(Type==\EndowmentType,Assets[:Market]);
				                            }
				                        EndowmentAssigned=1;
				                        \done=1;
				                        }
				                    }
				                }
				            k=k+1;
				            }
				        i=i+1;
				        }
				    EndowmentType=EndowmentType+1;
				    }
				
				//Assigns the endowment corresponding to the type defined in \EndowmentFillerType
				//to all subjects who have not yet had endowments assigned
				subjects.do {
				    if (EndowmentAssigned==0 & IsExperimenter==0) {
				        InitialCash=endowments.find(Type==min(\EndowmentTypes,\EndowmentFillerType),Cash);
				        for(Market,\NumMarkets){
				            InitialAssets[Market]=endowments.find(Type==min(\EndowmentTypes,\EndowmentFillerType),Assets[:Market]);
				            }
				        EndowmentAssigned=1;
				        }
				    }
				
				subjects.do{
				    Cash=InitialCash;
				    for(Market,\NumMarkets){
				        Assets[Market]=InitialAssets[Market];
				        }
				    }
			}
		}
		program{
			table = auctionoffers;
			do{
				//Variable initialization auctionoffers
				
				Market=\I;
				ID=0;
				Price=\I;
				Volume=\I;
				Transacted=\I;
				Type=\I;
				Status=\I;
				Offerer=\I;
				OfferTime=\I;
				StatusTime=\I;
				MarketOrder=\I;
			}
		}
		program{
			table = pricedetermination;
			do{
				//Variable initialization pricedetermination
				
				Market=\I;
				Price=\I;
				BuyVol=0;
				SellVol=0;
				CumBuyVol=0;
				CumSellVol=0;
				FeasibleVol=0;
				BuySurplus=0;
			}
		}
		program{
			table = indicativepricedetermination;
			do{
				//Variable initialization indicativepricedetermination
				
				Old=\I;
				Market=\I;
				Price=\I;
				BuyVol=0;
				SellVol=0;
				CumBuyVol=0;
				CumSellVol=0;
				FeasibleVol=0;
				BuySurplus=0;
			}
		}
		program{
			table = practicetasks;
			condition = \PracticePeriod==1;
			do{
				//Variable initialization practicetasks
				
				Subject=\I;
				ID=0;
				Text="Hallo";
				Done=0;
			}
		}
		program{
			table = subjects;
			condition = \PracticePeriod==1;
			do{
				//### P10: Practice period settings ###
				
				//Sets practice period endowments
				InitialCash=5000;
				Cash=InitialCash;
				for(Market,\NumMarkets){
				    InitialAssets[Market]=100;
				    Assets[Market]=InitialAssets[Market];
				     }
				
				//Generates practice tasks
				practicetasks.new{
				    Subject=:Subject;
				    ID=practicetasks.count(same(Subject));
				    Done=0;
				    if(Language==1){Text="* Please submit at least one buy offer.";}
				    if(Language==2){Text="* Geben Sie mindestens ein Kaufgebot ab.";}
				    }
				practicetasks.new{
				    Subject=:Subject;
				    ID=practicetasks.count(same(Subject));
				    Done=0;
				    if(Language==1){Text="* Please submit at least one sell offer.";}
				    if(Language==2){Text="* Geben Sie ein mindestens Verkaufsgebot ab.";}
				    }
				practicetasks.new{
				    Subject=:Subject;
				    ID=practicetasks.count(same(Subject));
				    Done=0;
				    if(Language==1){Text="* Please cancel at least one of your own offers.";}
				    if(Language==2){Text="* Stornieren Sie mindestens ein eigenes Gebot.";}
				    }
				practicetasks.new{
				    Subject=:Subject;
				    ID=practicetasks.count(same(Subject));
				    Done=0;
				    if(Language==1){Text="* Please accept at least one buy offer.";}
				    if(Language==2){Text="* Akzeptieren Sie mindestens ein Kaufgebot.";}
				    }
				practicetasks.new{
				    Subject=:Subject;
				    ID=practicetasks.count(same(Subject));
				    Done=0;
				    if(Language==1){Text="* Please accept at least one sell offer.";}
				    if(Language==2){Text="* Akzeptieren Sie mindestens ein Verkaufsgebot.";}
				    }
			}
		}
		program{
			table = globals;
			condition = Testmode1==1;
			do{
				//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~Testmode parameters
				
				TimeAuction=1;
				TimeProfit=3;
				TimeContinuousDoubleAuction=3;
				
				AskFinLit[1]=1;
				AskFinLit[2]=0;
				AskFinLit[3]=0;
				AskFinLit[4]=0;
				AskFinLit[5]=0;
				AskFinLit[6]=0;
				AskFinLit[7]=0;
				AskFinLit[8]=0;
				AskFinLit[9]=0;
				AskFinLit[10]=0;
				AskFinLit[11]=0;
				AskFinLit[12]=0;
				AskFinLit[13]=0;
				AskFinLit[14]=0;
				AskFinLit[15]=0;
				AskFinLit[16]=0;
				
			}
		}
		program{
			table = summary;
			do{
				//Variable initialization summary
				
				array Dividend[\NumMarkets];
				array SSWValue[\NumMarkets];
				array AvgPriceCA[\NumMarkets];
				array AvgPriceCDA[\NumMarkets];
				array AvgVolPriceCDA[\NumMarkets];
				array MedianPriceCDA[\NumMarkets];
				array LastPriceCDA[\NumMarkets];
				array NumTradesCA[\NumMarkets];
				array NumTradesCDA[\NumMarkets];
				array VolumeCA[\NumMarkets];
				array VolumeCDA[\NumMarkets];
				
				
			}
		}
		program{
			table = results;
			do{
				//Variable initialization results
				
				Market=\I;
				DisplayMarket=\I;
				Subject=\I;
				Price=\I;
				Dividend=\I;
				Phase=\I;
				Amount=\I;
				NumBought=\I;
				NumSold=\I;
				
			}
		}
		program{
			table = globals;
			do{
				//Safety check
				
				//Checks that IndicativePriceInterval is not too short. Otherwise prices are constantly calculated and z-Tree runs out of memory.
				IndicativePriceInterval=if(IndicativePriceInterval<0.5,-1,IndicativePriceInterval);
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "HeaderContainer"{
				hasframe = FALSE;
				height = 45p;
				top = 0p;
				cuttop = TRUE;
				headerbox "HeaderEN"{
					hasframe = FALSE;
					displaycondition = \Language==1;
					showPeriods = TRUE;
					showNumPeriods = TRUE;
					periodtext = "Period";
					periodoftext = "of";
					practiceperiodprefix = "Trial";
					showtime = TRUE;
					timestr = "Time remaining [sec]:";
					pleasedecidetext = "Please make your choice now!";
				}
				headerbox "HeaderDE"{
					hasframe = FALSE;
					displaycondition = \Language==2;
					showPeriods = TRUE;
					showNumPeriods = TRUE;
					periodtext = "Periode";
					periodoftext = "von";
					practiceperiodprefix = "Probe";
					showtime = TRUE;
					timestr = "Verbleibende Zeit [sek]:";
					pleasedecidetext = "Bitte treffen Sie Ihre Entscheidung!";
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "EN"{
				hasframe = TRUE;
				displaycondition = \Language==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "Please wait for the experiment to continue.";
				}
			}
			standardbox "DE"{
				hasframe = TRUE;
				displaycondition = \Language==2;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "Bitte warten Sie, bis das Experiment weitergeht.";
				}
			}
		}
	}
	stage "Settings"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*IsExperimenter*if(Period==1,1,0)*\SettingsStage;
			}
		}
		program{
			table = globals;
			condition = \SettingsStage==1&Period==1;
			do{
				//Copies current globals table settings to settings_globals table and to experimenter subject subjects table record in case of numeric entries
				
				settings_globals.new{
				
				    //General settings
				    GIMSVersion=\GIMSVersion;
				    ExchangeRate=\ExchangeRate;
				    PracticePeriod=\PracticePeriod;
				    Language=\Language;
				    CurrentYear=\CurrentYear;
				    MinPayoffCurrency=\MinPayoffCurrency;
				    MinPayoffECU=\MinPayoffECU;
				    Currency=\Currency;
				
				    //Stage settings
				    CallAuction=\CallAuction;
				    ContinuousDoubleAuction=\ContinuousDoubleAuction;
				    CRTBefore=\CRTBefore;
				    CRTAfter=\CRTAfter;
				    FinLit=\FinLit;
				    HLBefore=\HLBefore;
				    HLAfter=\HLAfter;
				    ControlQuestions=\ControlQuestions;
				    Currency=\Currency;
				    TimeContinuousDoubleAuction=\TimeContinuousDoubleAuction;
				    TimeContinuousDoubleAuctionResults=\TimeContinuousDoubleAuctionResults;
				    TimeCallAuction=\TimeCallAuction;
				    TimeCallAuctionResults=\TimeCallAuctionResults;
				    TimeFinLitResult=\TimeFinLitResult;
				    TimeHoltLaury=\TimeHoltLaury;
				    TimeHoltLauryResult=\TimeHoltLauryResult;
				    }
			}
		}
		tableloader{
			condition = \SettingsStage==1&Period>1;
			inputreplacefilename = "Settings.GIMS";
		}
		externalprogram{
			condition = \SettingsStage==1&Period==1;
			runonclient = FALSE;
			startnewprogram = TRUE;
			commandline = "GIMS_SettingsCreator.bat";
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=302;
				    }
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "Settings"{
				hasframe = TRUE;
				standardbox "Buttons"{
					hasframe = TRUE;
					height = 40p;
					bottom = 0p;
					cutbottom = TRUE;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					button "Leave Experiment"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 65280;
						program{
							table = globals;
							do{
								subjects.do{LeaveStage=1;}
								\ForcedExitExperiment=1;
								
							}
						}
						program{
							table = subjects;
							ownervariable = Subject;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Event=303;
								    }
								
							}
						}
					}
					button "START NOW"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = TRUE;
						donotterminatestage = FALSE;
						specialbuttoncolor = TRUE;
						buttoncolor = 5921535;
						checker{
							condition = \SettingsEntryShow==0;
							message = "<><\\Language|!text:1=\"Please enter a new value before continuing!\";2=\"Bitte geben Sie einen neuen Wert ein, bevor Sie fortfahren!\">";
							yesButtonStr = "";
							noButtonStr = "OK";
						}
						program{
							table = globals;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Event=301;
								    }
							}
						}
						program{
							table = settings_globals;
							do{
								//Copies current globals table settings to settings_globals table and to experimenter subject subjects table record in case of numeric entries
								
								
								//General settings
								GIMSVersion=\GIMSVersion;
								ExchangeRate=\ExchangeRate;
								PracticePeriod=\PracticePeriod;
								Language=\Language;
								CurrentYear=\CurrentYear;
								MinPayoffCurrency=\MinPayoffCurrency;
								MinPayoffECU=\MinPayoffECU;
								Currency=\Currency;
								
								//Stage settings
								CallAuction=\CallAuction;
								ContinuousDoubleAuction=\ContinuousDoubleAuction;
								CRTBefore=\CRTBefore;
								CRTAfter=\CRTAfter;
								FinLit=\FinLit;
								HLBefore=\HLBefore;
								HLAfter=\HLAfter;
								ControlQuestions=\ControlQuestions;
								Currency=\Currency;
								TimeContinuousDoubleAuction=\TimeContinuousDoubleAuction;
								TimeContinuousDoubleAuctionResults=\TimeContinuousDoubleAuctionResults;
								TimeCallAuction=\TimeCallAuction;
								TimeCallAuctionResults=\TimeCallAuctionResults;
								TimeFinLitResult=\TimeFinLitResult;
								TimeHoltLaury=\TimeHoltLaury;
								TimeHoltLauryResult=\TimeHoltLauryResult;
							}
						}
						tabledumper{
							outputfilename = "Settings.GIMS";
							tabledescriptions = "settings_globals";
						}
					}
					button "Load from disk"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 59115;
						tableloader{
							inputreplacefilename = "Settings.GIMS";
						}
						program{
							table = globals;
							do{
								//Copies current settings_globals table settings to globals table and to experimenter subject subjects table record in case of numeric entries
								
								//General settings
								ExchangeRate=settings_globals.find(same(GIMSVersion),ExchangeRate);
								PracticePeriod=settings_globals.find(same(GIMSVersion),PracticePeriod);
								Language=settings_globals.find(same(GIMSVersion),Language);
								CurrentYear=settings_globals.find(same(GIMSVersion),CurrentYear);
								MinPayoffCurrency=settings_globals.find(same(GIMSVersion),MinPayoffCurrency);
								MinPayoffECU=settings_globals.find(same(GIMSVersion),MinPayoffECU);
								Currency=settings_globals.find(same(GIMSVersion),Currency);
								
								//Stage settings
								CallAuction=settings_globals.find(same(GIMSVersion),CallAuction);
								ContinuousDoubleAuction=settings_globals.find(same(GIMSVersion),ContinuousDoubleAuction);
								CRTBefore=settings_globals.find(same(GIMSVersion),CRTBefore);
								CRTAfter=settings_globals.find(same(GIMSVersion),CRTAfter);
								FinLit=settings_globals.find(same(GIMSVersion),FinLit);
								HLBefore=settings_globals.find(same(GIMSVersion),HLBefore);
								HLAfter=settings_globals.find(same(GIMSVersion),HLAfter);
								ControlQuestions=settings_globals.find(same(GIMSVersion),ControlQuestions);
								TimeContinuousDoubleAuction=settings_globals.find(same(GIMSVersion),TimeContinuousDoubleAuction);
								TimeContinuousDoubleAuctionResults=settings_globals.find(same(GIMSVersion),TimeContinuousDoubleAuctionResults);
								TimeCallAuction=settings_globals.find(same(GIMSVersion),TimeCallAuction);
								TimeCallAuctionResults=settings_globals.find(same(GIMSVersion),TimeCallAuctionResults);
								TimeFinLitResult=settings_globals.find(same(GIMSVersion),TimeFinLitResult);
								TimeHoltLaury=settings_globals.find(same(GIMSVersion),TimeHoltLaury);
								TimeHoltLauryResult=settings_globals.find(same(GIMSVersion),TimeHoltLauryResult);
								
								subjects.do{
								    if(IsExperimenter==1){
								        //General settings
								        CurrentYear=\CurrentYear;
								        ExchangeRate=\ExchangeRate;
								        MinPayoffCurrency=\MinPayoffCurrency;
								        MinPayoffECU=\MinPayoffECU;
								
								         //Stage settings
								        TimeContinuousDoubleAuction=\TimeContinuousDoubleAuction;
								        TimeContinuousDoubleAuctionResults=\TimeContinuousDoubleAuctionResults;
								        TimeCallAuction=\TimeCallAuction;
								        TimeCallAuctionResults=\TimeCallAuctionResults;
								        TimeFinLitResult=\TimeFinLitResult;
								        TimeHoltLaury=\TimeHoltLaury;
								        TimeHoltLauryResult=\TimeHoltLauryResult;
								        }
								    }
								
							}
						}
					}
					button "Reset"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 59115;
						program{
							table = globals;
							do{
								//Copies current settings_globals table settings to globals table and to experimenter subject subjects table record in case of numeric entries
								
								//General settings
								ExchangeRate=settings_globals.find(same(GIMSVersion),ExchangeRate);
								PracticePeriod=settings_globals.find(same(GIMSVersion),PracticePeriod);
								Language=settings_globals.find(same(GIMSVersion),Language);
								CurrentYear=settings_globals.find(same(GIMSVersion),CurrentYear);
								MinPayoffCurrency=settings_globals.find(same(GIMSVersion),MinPayoffCurrency);
								MinPayoffECU=settings_globals.find(same(GIMSVersion),MinPayoffECU);
								Currency=settings_globals.find(same(GIMSVersion),Currency);
								
								//Stage settings
								CallAuction=settings_globals.find(same(GIMSVersion),CallAuction);
								ContinuousDoubleAuction=settings_globals.find(same(GIMSVersion),ContinuousDoubleAuction);
								CRTBefore=settings_globals.find(same(GIMSVersion),CRTBefore);
								CRTAfter=settings_globals.find(same(GIMSVersion),CRTAfter);
								FinLit=settings_globals.find(same(GIMSVersion),FinLit);
								HLBefore=settings_globals.find(same(GIMSVersion),HLBefore);
								HLAfter=settings_globals.find(same(GIMSVersion),HLAfter);
								ControlQuestions=settings_globals.find(same(GIMSVersion),ControlQuestions);
								TimeContinuousDoubleAuction=settings_globals.find(same(GIMSVersion),TimeContinuousDoubleAuction);
								TimeContinuousDoubleAuctionResults=settings_globals.find(same(GIMSVersion),TimeContinuousDoubleAuctionResults);
								TimeCallAuction=settings_globals.find(same(GIMSVersion),TimeCallAuction);
								TimeCallAuctionResults=settings_globals.find(same(GIMSVersion),TimeCallAuctionResults);
								TimeFinLitResult=settings_globals.find(same(GIMSVersion),TimeFinLitResult);
								TimeHoltLaury=settings_globals.find(same(GIMSVersion),TimeHoltLaury);
								TimeHoltLauryResult=settings_globals.find(same(GIMSVersion),TimeHoltLauryResult);
								
								subjects.do{
								    if(IsExperimenter==1){
								        //General settings
								        CurrentYear=\CurrentYear;
								        ExchangeRate=\ExchangeRate;
								        MinPayoffCurrency=\MinPayoffCurrency;
								        MinPayoffECU=\MinPayoffECU;
								
								         //Stage settings
								        TimeContinuousDoubleAuction=\TimeContinuousDoubleAuction;
								        TimeContinuousDoubleAuctionResults=\TimeContinuousDoubleAuctionResults;
								        TimeCallAuction=\TimeCallAuction;
								        TimeCallAuctionResults=\TimeCallAuctionResults;
								        TimeFinLitResult=\TimeFinLitResult;
								        TimeHoltLaury=\TimeHoltLaury;
								        TimeHoltLauryResult=\TimeHoltLauryResult;
								        }
								    }
								
							}
						}
					}
					button "Stage settings"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = globals;
							do{
								//Displays StageSettings screen
								
								SettingsScreen=2;
								
							}
						}
					}
					button "General settings"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = globals;
							do{
								//Displays GeneralSettings screen
								
								SettingsScreen=1;
								
							}
						}
					}
				}
				containerbox "Heading"{
					hasframe = TRUE;
					height = 80p;
					top = 0p;
					cuttop = TRUE;
					containerbox "ButtonLeft"{
						hasframe = FALSE;
						width = 100p;
						height = 40p;
						left = 0p;
						bottom = 0p;
						cutleft = TRUE;
						standardbox "StageSettings"{
							hasframe = FALSE;
							displaycondition = \SettingsScreen==2;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Previous"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Displays GeneralSettings screen
										
										SettingsScreen=1;
										
									}
								}
							}
						}
					}
					containerbox "ButtonRight"{
						hasframe = FALSE;
						width = 100p;
						height = 40p;
						right = 0p;
						bottom = 0p;
						cutright = TRUE;
						standardbox "GeneralSettings"{
							hasframe = FALSE;
							displaycondition = \SettingsScreen==1;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Next"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Displays StageSettings screen
										
										SettingsScreen=2;
										
									}
								}
							}
						}
					}
					standardbox "Text"{
						hasframe = FALSE;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \SettingsScreen;
							format = "<>!text: 1=\"{\\rtf \\fs22 \\qc \\b <|!text:1=\"General Settings\"; 2=\"Stage Settings\">}\"";
							input = FALSE;
						}
					}
				}
				containerbox "GeneralSettings"{
					hasframe = FALSE;
					displaycondition = \SettingsScreen==1;
					containerbox "Column Headings"{
						hasframe = FALSE;
						height = 30p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\ql \\b Setting}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\qc \\b Value}";
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\qc \\b Action}";
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\ql \\b Description}";
							}
						}
					}
					containerbox "Language"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Which language should the client screens use?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \Language;
								format = "!text:1=\"{\\rtf \\qc English}\";2=\"{\\rtf \\qc German}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										Language=if(Language==1,2,1);
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine which language GIMS should use on subjects' screens. Note that you also need to set the language you start the z-Leafs in (using z-Leaf command line options) so the system messages are displayed in the correct language.}";
							}
						}
					}
					containerbox "PracticePeriod"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run this treatment as a practice period?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \PracticePeriod;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										PracticePeriod=1-PracticePeriod;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether this treatment is a practice treatment or not.}";
							}
						}
					}
					containerbox "Currency"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql What is the local currency?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \Currency;
								format = "!text:1=\"{\\rtf \\qc Euros              }\";2=\"{\\rtf \\qc US Dollars}\";3=\"{\\rtf \\qc Danish Kroner}\";4=\"{\\rtf \\qc Australian Dollars}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										Currency=if(Currency<4,Currency+1,1);
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine which currency GIMS should name when referring to the local currency in text messages.}";
							}
						}
					}
					containerbox "CurrentYear"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql What is the current year?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \CurrentYear;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Current year";
										SettingsEntryValue=\CurrentYear;
										SettingsEntryPrecision=1;
										SettingsEntryMin=2017;
										SettingsEntryMax=2099;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Set the current year.}";
							}
						}
					}
					containerbox "ExchangeRate"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Exchange rate:}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \ExchangeRate;
								format = "0.000001";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Exchange rate";
										SettingsEntryValue=\ExchangeRate;
										SettingsEntryPrecision=0.000001;
										SettingsEntryMin=0.000001;
										SettingsEntryMax=9999999;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Value of one unit of the experimental currency in terms of real currency (e.g., value of 1 Taler in Euros).}";
							}
						}
					}
					containerbox "MinPayoffCurrency"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Minimum payoff (in real currency):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \MinPayoffCurrency;
								format = "0.01";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Minimum payoff (real currency)";
										SettingsEntryValue=\MinPayoffCurrency;
										SettingsEntryPrecision=0.01;
										SettingsEntryMin=0;
										SettingsEntryMax=9999999;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Minimum payoff per subject in the local currency. If a subject would earn less, his/her earnings are set to this minimum amount.}";
							}
						}
					}
					containerbox "MinPayoffECU"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 290p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Minimum payoff (in experimental currency):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 150p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \MinPayoffECU;
								format = "0.01";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 120p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Minimum payoff (experimental currency)";
										SettingsEntryValue=\MinPayoffECU;
										SettingsEntryPrecision=0.01;
										SettingsEntryMin=0;
										SettingsEntryMax=9999999;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Minimum payoff per subject in experimental currency. If a subject would earn less, his/her earnings are set to this minimum amount.}";
							}
						}
					}
				}
				containerbox "StageSettings"{
					hasframe = FALSE;
					displaycondition = \SettingsScreen==2;
					containerbox "Column Headings"{
						hasframe = FALSE;
						height = 30p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\ql \\b Setting}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\qr \\b Value}";
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\qc \\b Action}";
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\fs20 \\ql \\b Description}";
							}
						}
					}
					containerbox "CallAuction"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run call auction?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \CallAuction;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										CallAuction=1-CallAuction;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the CallAuction stage should be run or not.}";
							}
						}
					}
					containerbox "ContinuousDoubleAuction"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run continuous double auction?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \ContinuousDoubleAuction;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										ContinuousDoubleAuction=1-ContinuousDoubleAuction;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the ContinuousDoubleAuction stage should be run or not.}";
							}
						}
					}
					containerbox "CRTBefore"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run the cognitive reflection test before trading?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \CRTBefore;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										CRTBefore=1-CRTBefore;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the CRTBefore stage should be run or not.}";
							}
						}
					}
					containerbox "CRTAfter"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run the cognitive reflection test after trading?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \CRTAfter;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										CRTAfter=1-CRTAfter;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the CRTAfter stage should be run or not.}";
							}
						}
					}
					containerbox "FinLit"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Ask financial literacy questions?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \FinLit;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										FinLit=1-FinLit;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the FinLit stage should be run or not.}";
							}
						}
					}
					containerbox "HLBefore"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run Holt and Laury before trading?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \HLBefore;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										HLBefore=1-HLBefore;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the HLBefore stage should be run or not.}";
							}
						}
					}
					containerbox "HLAfter"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Run Holt and Laury after trading?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \HLAfter;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										HLAfter=1-HLAfter;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the HLAfter stage should be run or not.}";
							}
						}
					}
					containerbox "ControlQuestions"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Ask control questions?}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \ControlQuestions;
								format = "!text:0=\"{\\rtf \\qc No}\";1=\"{\\rtf \\qc Yes}\"";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Switch"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										ControlQuestions=1-ControlQuestions;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Switch to determine whether the ControlQuestions stage should be run or not.}";
							}
						}
					}
					containerbox "TimeContinuousDoubleAuction"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the continuous double auction (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeContinuousDoubleAuction;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of continuous double auction";
										SettingsEntryValue=\TimeContinuousDoubleAuction;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the ContinuousDoubleAuction stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeContinuousDoubleAuctionResults"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the continuous double auction results screen (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeContinuousDoubleAuctionResults;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of continuous double auction results screen";
										SettingsEntryValue=\TimeContinuousDoubleAuctionResults;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the ContinuousDoubleAuctionResults stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeCallAuction"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the call auction (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeCallAuction;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of call auction";
										SettingsEntryValue=\TimeCallAuction;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the CallAuction stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeCallAuctionResults"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the call auction results screen (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeCallAuctionResults;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of call auction results screen";
										SettingsEntryValue=\TimeCallAuctionResults;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the CallAuctionResults stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeFinLitResult"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the financial literacy results screen (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeFinLitResult;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of financial literacy results screen";
										SettingsEntryValue=\TimeFinLitResult;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the FinLitResult stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeHoltLaury"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the Holt and Laury risk task (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeHoltLaury;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of Holt and Laury risk task";
										SettingsEntryValue=\TimeHoltLaury;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the HoltLaury[Before/After] stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
					containerbox "TimeHoltLauryResult"{
						hasframe = FALSE;
						height = 35p;
						top = 0p;
						cuttop = TRUE;
						standardbox "Text"{
							hasframe = FALSE;
							width = 370p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql Duration of the Holt and Laury risk task results screen (sec):}";
							}
						}
						standardbox "Value"{
							hasframe = FALSE;
							width = 70p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = \TimeHoltLauryResult;
								format = "1";
								input = FALSE;
							}
						}
						standardbox "Action"{
							hasframe = FALSE;
							width = 110p;
							left = 0p;
							cutleft = TRUE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							button "Modify"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = globals;
									do{
										//Opens entry screen
										
										//Sets necessary variables
										SettingsEntryShow=1;
										SettingsEntryTitle="Duration of Holt and Laury risk task results screen";
										SettingsEntryValue=\TimeHoltLauryResult;
										SettingsEntryPrecision=1;
										SettingsEntryMin=-1;
										SettingsEntryMax=86400;
										
									}
								}
							}
						}
						standardbox "Description"{
							hasframe = FALSE;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "{\\rtf \\ql The length in seconds subjects spend in the HoltLaury[Before/After]Result stage (if it is enabled). Use '-1' for infinite duration.}";
							}
						}
					}
				}
				containerbox "NumericEntry"{
					hasframe = TRUE;
					left = 5%;
					right = 5%;
					top = 5%;
					bottom = 5%;
					displaycondition = SettingsEntryShow==1;
					plotbox "Background"{
						hasframe = TRUE;
						bgcolor = rgb(0.94,0.94,0.94);
						maintainaspectratio = FALSE;
						xaxistype = LINEAR;
						yaxistype = LINEAR;
						xleft = -100;
						xright = 100;
						ybottom = -100;
						ytop = 100;
					}
					standardbox "Title"{
						hasframe = FALSE;
						top = 30%;
						bottom = 60%;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = 1;
							format = "<>!text:1=\"{\\rtf \\fs22 \\b \\qc <\\SettingsEntryTitle|-1>}\"";
							input = FALSE;
						}
						item{
						}
					}
					standardbox "Entry"{
						hasframe = FALSE;
						height = 100p;
						top = 50%;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							label = "The current value is:";
							variable = \SettingsEntryValue;
							format = "\\SettingsEntryPrecision";
							input = FALSE;
						}
						item{
							label = "Enter new value:";
							variable = SettingsEntryValue;
							format = "\\SettingsEntryPrecision";
							input = TRUE;
							showdefault = FALSE;
							emptyallowed = FALSE;
							min = \SettingsEntryMin;
							max = \SettingsEntryMax;
						}
					}
					standardbox "Button"{
						hasframe = FALSE;
						height = 45p;
						bottom = 0p;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "OK"{
							clearinputafterok = TRUE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = TRUE;
							specialbuttoncolor = TRUE;
							buttoncolor = 13158600;
							program{
								table = subjects;
								do{
									//Copies entry to globals table
									
									if(\SettingsEntryTitle=="Current year"){\CurrentYear=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Exchange rate"){\ExchangeRate=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Minimum payoff (real currency)"){\MinPayoffCurrency=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Minimum payoff (experimental currency)"){\MinPayoffECU=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of continuous double auction"){\TimeContinuousDoubleAuction=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of continuous double auction results screen"){\TimeContinuousDoubleAuctionResults=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of call auction"){\TimeCallAuction=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of call auction results screen"){\TimeCallAuctionResults=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of financial literacy results screen"){\TimeFinLitResult=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of Holt and Laury risk task"){\TimeHoltLaury=SettingsEntryValue;}
									if(\SettingsEntryTitle=="Duration of Holt and Laury risk task results screen"){\TimeHoltLauryResult=SettingsEntryValue;}
									\SettingsEntryShow=0;
									
								}
							}
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "ControlQuestions"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\ControlQuestions*(1-\CQTestmode);
				
			}
		}
		program{
			table = globals;
			do{
				//Timer for blinking text
				
				later (BlinkInterval*BlinkOn) repeat {
				    Blink=1-Blink;
				    }
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "Subjects"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==0;
				standardbox "WrongAnswer"{
					hasframe = TRUE;
					displaycondition = CQAnswered!=\I&CQAnswered<0;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Wrong answer}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Falsche Antwort}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"Your answer on this question is not correct.\";2=\"Ihre Antwort auf diese Frage ist leider nicht korrekt.\">}";
					}
					item{
						label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"If you are uncertain of the correct answer, please consult the instructions. If you need further help, please raise your hand and the experimenter will come to assist you.\";2=\"Bei Unklarheiten lesen Sie bitte in der Anleitung nach. Sollten Sie weitere Hilfe bentigen, heben Sie bitte Ihre Hand und der Experimentator wird zu Ihnen kommen, um Ihnen behilflich zu sein.\">}";
					}
					button "OK"{
						clearinputafterok = TRUE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=112;
								    Data[1]=CQ[-:CQAnswered];
								    }
								
							}
						}
						program{
							table = subjects;
							do{
								//Sets CQAnswered
								CQAnswered=-CQAnswered-1;
								
							}
						}
					}
				}
				standardbox "Welcome"{
					hasframe = TRUE;
					displaycondition = CQAnswered==\I;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control questions}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Kontrollfragen}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"Please answer the questions on the subsequent screens. If you are uncertain of the correct answer, please consult the instructions. If you need further help, please raise your hand and the experimenter will come to assist you.\";2=\"Bitte beantworten Sie die Fragen auf den folgenden Seiten. Bei Unklarheiten lesen Sie bitte in der Anleitung nach. Sollten Sie Hilfe bentigen, heben Sie bitte Ihre Hand und der Experimentator wird zu Ihnen kommen, um Ihnen behilflich zu sein.\">}";
					}
					button "OK"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=113;
								    }
								
							}
						}
						program{
							table = subjects;
							do{
								//Sets CQAnswered
								CQAnswered=0;
								
							}
						}
					}
				}
				standardbox "Question1"{
					hasframe = TRUE;
					displaycondition = CQAnswered==0&\CQDone<\NumSubjects;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control question <CQAnswered+1|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Kontrollfrage <CQAnswered+1|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"Question 1 text\";2=\"Fragetext 1\">}";
					}
					item{
						variable = CQ[1];
						format = "<>!radio: 1=\"<\\Language|!text: 1=\"Answer 1\"; 2=\"Antwort 1\">\";2=\"<\\Language|!text: 1=\"Answer 2\";  2=\"Antwort 2\">\";";
						input = TRUE;
						showdefault = FALSE;
						emptyallowed = FALSE;
						min = 1;
						max = 2;
					}
					button "OK"{
						clearinputafterok = TRUE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=201;
								    }
								
							}
						}
						program{
							table = subjects;
							do{
								//Sets CQAnswered
								CQAnswered=if(CQ[1]==2,CQAnswered+1,-(CQAnswered+1));
								
							}
						}
						program{
							table = globals;
							do{
								//Increments \CQDone
								
								\CQDone=subjects.count(CQAnswered==\NumCQ);
								
							}
						}
					}
				}
				standardbox "Question2"{
					hasframe = TRUE;
					displaycondition = CQAnswered==1;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control question <CQAnswered+1|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Kontrollfrage <CQAnswered+1|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"Question 2 text\";2=\"Fragetext 2\">}";
					}
					item{
						variable = CQ[2];
						format = "<>!radio: 1=\"<\\Language|!text: 1=\"Answer 1\"; 2=\"Antwort 1\">\";2=\"<\\Language|!text: 1=\"Answer 2\";  2=\"Antwort 2\">\";3=\"<\\Language|!text: 1=\"Answer 3\";  2=\"Antwort 3\">\";";
						input = TRUE;
						showdefault = FALSE;
						emptyallowed = FALSE;
						min = 1;
						max = 3;
					}
					button "OK"{
						clearinputafterok = TRUE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 13158600;
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=202;
								    }
								
							}
						}
						program{
							table = subjects;
							do{
								//Sets CQAnswered
								CQAnswered=if(CQ[2]==3,CQAnswered+1,-(CQAnswered+1));
								
							}
						}
						program{
							table = globals;
							do{
								//Increments \CQDone
								
								\CQDone=subjects.count(CQAnswered==\NumCQ);
								
							}
						}
					}
				}
				containerbox "WaitToContinue"{
					hasframe = FALSE;
					displaycondition = CQAnswered==\NumCQ;
					standardbox "WaitToContinue"{
						hasframe = FALSE;
						bottom = 100p;
						displaycondition = \CQDone<\NumSubjects;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control questions finished}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Kontrollfragen abgeschlossen}\"";
							input = FALSE;
						}
						item{
						}
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeCQ|1> \\qc You have answered all control questions. Please wait until the other participants are also finished.}\";2=\"{\\rtf \\fs<\\FontSizeCQ|1> \\qc Sie haben nun alle Kontrollfragen beantwortet. Bitte warten Sie, bis die anderen Personen im Raum ebenfalls fertig sind.}\"";
							input = FALSE;
						}
					}
					standardbox "Continue"{
						hasframe = FALSE;
						bottom = 100p;
						displaycondition = \CQDone==\NumSubjects;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control questions finished}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Kontrollfragen abgeschlossen}\"";
							input = FALSE;
						}
						item{
						}
						item{
						}
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeCQ|1> \\qc The control questions are now finished.}\";2=\"{\\rtf \\fs<\\FontSizeCQ|1> \\qc Die Kontrollfragen sind nun abgeschlossen.}\"";
							input = FALSE;
						}
						item{
						}
						item{
							variable = \Blink;
							format = "<>!text: 0=\"\";1=\"{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"<\\Blink|!text:1=\"Please click OK to continue.\";2=\"\">\";2=\"<\\Blink|!text:1=\"Bitte klicken Sie OK um fortzufahren.\";2=\"\">\">}\"";
							input = FALSE;
						}
					}
					standardbox "WaitToContinueButton"{
						hasframe = FALSE;
						height = 100p;
						bottom = 0p;
						displaycondition = \CQDone==\NumSubjects;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "OK"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = TRUE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							program{
								table = subjects;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=119;
									    }
									
								}
							}
							program{
								table = globals;
								do{
									//Moves experimenter subject
									
									subjects.do{
									    LeaveStage=IsExperimenter;
									    }
									
								}
							}
						}
					}
				}
				containerbox "Calculator"{
					hasframe = FALSE;
					height = 70p;
					left = 25p;
					bottom = 20%;
					displaycondition = CQAnswered==0;
					calulatorbox "Calculator"{
						hasframe = FALSE;
						width = 35p;
						height = 31p;
					}
					standardbox "Label"{
						hasframe = FALSE;
						height = 15p;
						bottom = 0p;
						cutbottom = TRUE;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							label = "<>{\\rtf \\fs<\\FontSizeCQ|1> \\qc <\\Language|!text:1=\"(Open calculator)\";2=\"(Taschenrechner ffnen)\">}";
						}
					}
				}
			}
			standardbox "Experimenter"{
				hasframe = TRUE;
				displaycondition = IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = 1;
					format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Control questions}\"";
					input = FALSE;
				}
				item{
				}
				item{
					label = "Subjects finished:";
					variable = \CQDone;
					format = "<>!text:1=\"<|1> of <\\NumSubjects|1>\"";
					input = FALSE;
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=114;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=115;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=118;
							    }
							
						}
					}
				}
				button "Toggle language"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							Language=if(Language==1,2,1);
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "HoltLauryBefore"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = \TimeHoltLaury;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\HLBefore*if(\Period==1,1,0)*(1-IsExperimenter);
				
			}
		}
		program{
			table = globals;
			do{
				//Stops blinking loop from previous stage
				
				BlinkOn=-1;
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=89;
				    }
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "Subjects"{
				hasframe = TRUE;
				containerbox "ButtonContainer"{
					hasframe = TRUE;
					height = 40p;
					bottom = 0p;
					cutbottom = TRUE;
					standardbox "ButtonEN"{
						hasframe = FALSE;
						displaycondition = \Language==1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Confirm"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = TRUE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = HLChoice!=\I;
								message = "You have not yet chosen the row in which you want to switch from option A to option B.\r\n\r\nPlease choose this row and click \"Confirm\".";
								yesButtonStr = "";
								noButtonStr = "OK";
							}
							program{
								table = subjects;
								do{
									HL=10-HLChoice;
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=71;
									    Data[1]=HLChoice;
									   }
									
								}
							}
						}
					}
					standardbox "ButtonDE"{
						hasframe = FALSE;
						displaycondition = \Language==2;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Besttigen"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = TRUE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = HLChoice!=\I;
								message = "Sie haben noch nicht ausgewhlt, in welcher Zeile Sie von Option A zu Option B wechseln wollen.\r\n\r\nBitte whlen Sie diese Zeile und klicken Sie \"Besttigen\".";
								yesButtonStr = "";
								noButtonStr = "OK";
							}
							program{
								table = subjects;
								do{
									HL=10-HLChoice;
									
									
									
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=71;
									    Data[1]=HLChoice;
									   }
									
									
									
									
								}
							}
						}
					}
				}
				containerbox "GridContainerEN"{
					hasframe = FALSE;
					displaycondition = \Language==1;
					containerbox "OptionContainer"{
						hasframe = TRUE;
						containerbox "ColumnHeadings"{
							hasframe = TRUE;
							height = 30p;
							top = 0p;
							cuttop = TRUE;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option A \\cf2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option B \\cf2}\"";
									input = FALSE;
								}
							}
						}
						standardbox "ButtonRow0"{
							hasframe = FALSE;
							height = 6%;
							top = 0p;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose Option B for ALL rows"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=0;
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=0;
										   }
									}
								}
							}
						}
						standardbox "ButtonRow1"{
							hasframe = FALSE;
							height = 6%;
							top = 9.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for row 1 and option B for rows 2 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=1;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=1;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow2"{
							hasframe = FALSE;
							height = 6%;
							top = 19%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 2 and option B for rows 3 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=2;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=2;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow3"{
							hasframe = FALSE;
							height = 6%;
							top = 28.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 3 and option B for rows 4 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=3;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=3;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow4"{
							hasframe = FALSE;
							height = 6%;
							top = 38%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 4 and option B for rows 5 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=4;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=4;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow5"{
							hasframe = FALSE;
							height = 6%;
							top = 47.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 5 and option B for rows 6 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=5;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=5;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow6"{
							hasframe = FALSE;
							height = 6%;
							top = 57%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 6 and option B for rows 7 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=6;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=6;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow7"{
							hasframe = FALSE;
							height = 6%;
							top = 66.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 7 and option B for rows 8 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=7;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=7;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow8"{
							hasframe = FALSE;
							height = 6%;
							top = 76%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 8 and option B for rows 9 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=8;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=8;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow9"{
							hasframe = FALSE;
							height = 6%;
							top = 85.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 9 and option B for row 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=9;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=9;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow10"{
							hasframe = FALSE;
							height = 6%;
							top = 95%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for ALL rows"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=10;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=10;
										   }
										
										
										
										
									}
								}
							}
						}
						containerbox "Row1"{
							hasframe = TRUE;
							height = 5%;
							top = 5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 1}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: -100=\"{\\rtf \\fs20 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row2"{
							hasframe = TRUE;
							height = 5%;
							top = 14.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: 0=\"{\\rtf \\fs20 20% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: -100=\"{\\rtf \\fs20 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row3"{
							hasframe = TRUE;
							height = 5%;
							top = 24%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 3}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: 0=\"{\\rtf \\fs20 30% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: -100=\"{\\rtf \\fs20 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row4"{
							hasframe = TRUE;
							height = 5%;
							top = 33.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 4}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: 0=\"{\\rtf \\fs20 40% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: -100=\"{\\rtf \\fs20 40% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% chance of <\\PayoffBHigh|0.01> kr & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 40% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row5"{
							hasframe = TRUE;
							height = 5%;
							top = 43%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 5}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: 0=\"{\\rtf \\fs20 50% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: -100=\"{\\rtf \\fs20 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row6"{
							hasframe = TRUE;
							height = 5%;
							top = 52.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 6}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: 0=\"{\\rtf \\fs20 60% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: -100=\"{\\rtf \\fs20 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row7"{
							hasframe = TRUE;
							height = 5%;
							top = 62%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 7}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: 0=\"{\\rtf \\fs20 70% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: -100=\"{\\rtf \\fs20 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row8"{
							hasframe = TRUE;
							height = 5%;
							top = 71.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 8}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: 0=\"{\\rtf \\fs20 80% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: -100=\"{\\rtf \\fs20 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row9"{
							hasframe = TRUE;
							height = 5%;
							top = 81%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 9}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: 0=\"{\\rtf \\fs20 90% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: -100=\"{\\rtf \\fs20 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row10"{
							hasframe = TRUE;
							height = 5%;
							top = 90.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: 0=\"{\\rtf \\fs20 100% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: -100=\"{\\rtf \\fs20 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
					}
				}
				containerbox "GridContainerDE"{
					hasframe = FALSE;
					displaycondition = \Language==2;
					containerbox "OptionContainer"{
						hasframe = TRUE;
						containerbox "ColumnHeadings"{
							hasframe = TRUE;
							height = 30p;
							top = 0p;
							cuttop = TRUE;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option A \\cf2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option B \\cf2}\"";
									input = FALSE;
								}
							}
						}
						standardbox "ButtonRow0"{
							hasframe = FALSE;
							height = 6%;
							top = 0p;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option B fr ALLE Zeilen"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=0;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=0;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow1"{
							hasframe = FALSE;
							height = 6%;
							top = 9.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeile 1 und Option B fr Zeilen 2 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=1;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=1;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow2"{
							hasframe = FALSE;
							height = 6%;
							top = 19%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 2 und Option B fr Zeilen 3 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=2;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=2;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow3"{
							hasframe = FALSE;
							height = 6%;
							top = 28.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 3 und Option B fr Zeilen 4 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=3;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=3;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow4"{
							hasframe = FALSE;
							height = 6%;
							top = 38%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 4 und Option B fr Zeilen 5 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=4;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=4;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow5"{
							hasframe = FALSE;
							height = 6%;
							top = 47.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 5 und Option B fr Zeilen 6 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=5;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=5;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow6"{
							hasframe = FALSE;
							height = 6%;
							top = 57%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 6 und Option B fr Zeilen 7 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=6;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=6;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow7"{
							hasframe = FALSE;
							height = 6%;
							top = 66.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 7 und Option B fr Zeilen 8 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=7;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=7;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow8"{
							hasframe = FALSE;
							height = 6%;
							top = 76%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 8 und Option B fr Zeilen 9 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=8;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=8;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow9"{
							hasframe = FALSE;
							height = 6%;
							top = 85.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 9 und Option B fr Zeile 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=9;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=9;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow10"{
							hasframe = FALSE;
							height = 6%;
							top = 95%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr ALLE Zeilen"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=10;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=72;
										   Data[1]=10;
										   }
										
										
										
										
									}
								}
							}
						}
						containerbox "Row1"{
							hasframe = TRUE;
							height = 5%;
							top = 5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 1}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: -100=\"{\\rtf \\fs20 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row2"{
							hasframe = TRUE;
							height = 5%;
							top = 14.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: 0=\"{\\rtf \\fs20 20% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: -100=\"{\\rtf \\fs20 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row3"{
							hasframe = TRUE;
							height = 5%;
							top = 24%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 3}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: 0=\"{\\rtf \\fs20 30% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: -100=\"{\\rtf \\fs20 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row4"{
							hasframe = TRUE;
							height = 5%;
							top = 33.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 4}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: 0=\"{\\rtf \\fs20 40% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: -100=\"{\\rtf \\fs20 40% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% Chance auf <\\PayoffBHigh|0.01> kr & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 40% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row5"{
							hasframe = TRUE;
							height = 5%;
							top = 43%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 5}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: 0=\"{\\rtf \\fs20 50% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: -100=\"{\\rtf \\fs20 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row6"{
							hasframe = TRUE;
							height = 5%;
							top = 52.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 6}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: 0=\"{\\rtf \\fs20 60% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: -100=\"{\\rtf \\fs20 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row7"{
							hasframe = TRUE;
							height = 5%;
							top = 62%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 7}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: 0=\"{\\rtf \\fs20 70% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: -100=\"{\\rtf \\fs20 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row8"{
							hasframe = TRUE;
							height = 5%;
							top = 71.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 8}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: 0=\"{\\rtf \\fs20 80% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: -100=\"{\\rtf \\fs20 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row9"{
							hasframe = TRUE;
							height = 5%;
							top = 81%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 9}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: 0=\"{\\rtf \\fs20 90% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: -100=\"{\\rtf \\fs20 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row10"{
							hasframe = TRUE;
							height = 5%;
							top = 90.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: 0=\"{\\rtf \\fs20 100% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: -100=\"{\\rtf \\fs20 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=76;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=75;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=74;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "HoltLauryResultBefore"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = ifnoinput;
		timeout = TimeHoltLauryResult;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\HLBefore*if(\Period==1,1,0)*(1-IsExperimenter);
				
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\HLBefore==1;
			do{
				//HL Payment determination
				
				//Determines which row is to be paid
				HLRandomRow=roundup(random()*10,1);
				
				HLDieRoll=random()*10;
				
				HLPayoff=if(HLChoice>=HLRandomRow,if(HLDieRoll<=HLRandomRow,PayoffAHigh,PayoffALow),if(HLDieRoll<=HLRandomRow,PayoffBHigh,PayoffBLow));
				
				Profit=Profit+HLPayoff;
				
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=90;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "HL display"{
				hasframe = TRUE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<><\\Language|!text:1=\"You have chosen option A for:\"; 2=\"Sie whlten Option A fr:\";>";
					variable = HLChoice;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 1\";2=\"Zeile 1\">\" 2=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 9=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"You have chosen option B for:\"; 2=\"Sie whlten Option B fr:\";>";
					variable = HL;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 10\";2=\"Zeile 10\">\" 2=\"<\\Language|!text: 1=\"Row <HLChoice+1|1> to 10\";2=\"Zeile <HLChoice+1|1> bis 10\">\" 9=\"<\\Language|!text: 1=\"Rows <HLChoice+1|1> to 10\";2=\"Zeilen <HLChoice+1|1> bis 10\">\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"The randomly chosen row is:\";2=\"Die zufllig ausgewhlte Zeile ist:\">";
					variable = HLRandomRow;
					format = "<>!text: 0=\"<\\Language|!text:1=\"Row\";2=\"Zeile\"> <HLRandomRow|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you are paid according to:\";2=\"Daher erfolgt Ihre Bezahlung nach:\">";
					variable = if(HLChoice>=HLRandomRow,1,0);
					format = "<>!text: 0=\"Option B\" 1=\"Option A\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the higher amount if the randomly determined number is:\";2=\"Sie bekommen die hhere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...less than or equal to <HLRandomRow|1>\"; 2=\"...kleiner oder gleich <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the lower amount if the randomly determined number is:\"; 2=\"Sie bekommen die geringere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...greater than <HLRandomRow|1>\"; 2=\"...grer als <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"The randomly determined number is:\";2=\"Der Wrfelwurf lautet:\">";
					variable = 1;
					format = "<>!text: 1=\"<roundup(HLDieRoll,1)|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you get the:\";2=\"Das bedeutet, Sie erhalten die:\">";
					variable = if(HLDieRoll<HLRandomRow,0,1);
					format = "<>!text: 0=\"<\\Language|!text: 1=\"Higher amount\";2=\"hhere Auszahlung\">\" 1=\"<\\Language|!text: 1=\"Lower amount\";2=\"geringere Auszahlung\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"Your payoff from this task is:\";2=\"Ihr Ertrag aus dieser Aufgabe:\">";
					variable = HLPayoff;
					format = "<>!text: 0=\"<HLPayoff|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=73;
							    }
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=79;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=78;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=77;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "HL display"{
				hasframe = TRUE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<><\\Language|!text:1=\"You have chosen option A for:\"; 2=\"Sie whlten Option A fr:\";>";
					variable = HLChoice;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 1\";2=\"Zeile 1\">\" 2=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 9=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"You have chosen option B for:\"; 2=\"Sie whlten Option B fr:\";>";
					variable = HL;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 10\";2=\"Zeile 10\">\" 2=\"<\\Language|!text: 1=\"Row <HLChoice+1|1> to 10\";2=\"Zeile <HLChoice+1|1> bis 10\">\" 9=\"<\\Language|!text: 1=\"Rows <HLChoice+1|1> to 10\";2=\"Zeilen <HLChoice+1|1> bis 10\">\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"The randomly chosen row is:\";2=\"Die zufllig ausgewhlte Zeile ist:\">";
					variable = HLRandomRow;
					format = "<>!text: 0=\"<\\Language|!text:1=\"Row\";2=\"Zeile\"> <HLRandomRow|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you are paid according to:\";2=\"Daher erfolgt Ihre Bezahlung nach:\">";
					variable = if(HLChoice>=HLRandomRow,1,0);
					format = "<>!text: 0=\"Option B\" 1=\"Option A\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the higher amount if the randomly determined number is:\";2=\"Sie bekommen die hhere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...less than or equal to <HLRandomRow|1>\"; 2=\"...kleiner oder gleich <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the lower amount if the randomly determined number is:\"; 2=\"Sie bekommen die geringere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...greater than <HLRandomRow|1>\"; 2=\"...grer als <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"The randomly determined number is:\";2=\"Der Wrfelwurf lautet:\">";
					variable = 1;
					format = "<>!text: 1=\"<roundup(HLDieRoll,1)|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you get the:\";2=\"Das bedeutet, Sie erhalten die:\">";
					variable = if(HLDieRoll<HLRandomRow,0,1);
					format = "<>!text: 0=\"<\\Language|!text: 1=\"Higher amount\";2=\"hhere Auszahlung\">\" 1=\"<\\Language|!text: 1=\"Lower amount\";2=\"geringere Auszahlung\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"Your payoff from this task is:\";2=\"Ihr Ertrag aus dieser Aufgabe:\">";
					variable = HLPayoff;
					format = "<>!text: 0=\"<HLPayoff|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">\"";
					input = FALSE;
				}
			}
		}
	}
	stage "CRTBefore"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\CRTBefore*(1-IsExperimenter)*if(\Period==1,1,0);
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=48;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<FontSizeHeading|1> \\qc \\b <\\Language|!text: 1=\"Please answer the following questions:\";2=\"Bitte beantworten Sie die folgenden Fragen:\">}";
				}
				item{
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"A bat and a ball cost 1.10 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">. The bat costs 1.00 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> more than the ball. How much does the ball cost? [<\\Currency|!text: 2=\"cents\" 3=\"re\" 4=\"cents\">]\";2=\"Ein Schlger und ein Ball kosten zusammen insgesamt 1,10 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">. Der Schlger kostet 1,00 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> mehr als der Ball. Wie viel kostet der Ball? [<\\Currency|!text: 1=\"Cent\" 2=\"Cents\" 3=\"re\" 4=\"cents\">]\">}";
					variable = CRT1;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"If it takes 5 machines 5 minutes to make 5 widgets, how long would it take 100 machines to make 100 widgets? [minutes]\";2=\"Wenn 5 Maschinen 5 Minuten bentigen, um 5 Teile zu produzieren, wie lange wrden dann 100 Maschinen brauchen, um 100 Teile zu produzieren? [Minuten]\";>}";
					variable = CRT2;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"In a lake, there is a patch of lily pads. Every day, the patch doubles in size. If it takes 48 days for the patch to cover the entire lake, how long would it take for the patch to cover half of the lake? [days]\";2=\"In einem See wachsen Seerosen. Jeden Tag verdoppelt sich die Flche, die mit Seerosenblttern bedeckt ist. Wenn die Seerosen den gesamten See in 48 Tagen bedecken wrden, wie lange wrde es dauern, bis der halbe See bedeckt wre? [Tage]\";>}";
					variable = CRT3;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Calculates score
							
							CRT=if(CRT1==5,1,0)+if(CRT2==5,1,0)+if(CRT3==47,1,0);
							
							
							
							
						}
					}
					program{
						table = subjects;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=21;
							    }
							
							
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=19;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=17;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=18;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "CallAuction"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = always;
		timeout = \TimeCallAuction;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\CallAuction;
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=0;
				    Event=99;
				    }
				
				
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Determines indicative prices
				    
				later (\IndicativePriceInterval) repeat {
				
				    //Checks whether indicative price determination has not already been turned off (that is the case when actual price determination has been run)
				    if(\IndicativePriceInterval>0) {
				
				        for(Market,\NumMarkets){
				        
				            //Deletes old entries in indicativepricedetermination table
				            indicativepricedetermination.do{
				                Old=1;
				                }
				            
				            //Fills indicativepricedetermination table
				            
				            //### Populates pricedetermination table with unique prices, sorted ascendingly
				            
				            //Starts out at price -1
				            \TempPrice[Market]=-1;
				            
				            while (auctionoffers.count(Price>\TempPrice[Market]&Status==0&MarketOrder==0&same(Market))>0) {
				                //Determines next price
				                \TempPrice[Market]=auctionoffers.minimum(Price>\TempPrice[Market]&Status==0&MarketOrder==0&same(Market),Price);
				                indicativepricedetermination.new {
				                    Old=0;
				                    Market=:Market;
				                    Price=\TempPrice[Market];
				                    BuyVol=auctionoffers.sum(same(Price)&Status==0&Type==1&MarketOrder==0&same(Market),Volume);
				                    SellVol=auctionoffers.sum(same(Price)&Status==0&Type==-1&MarketOrder==0&same(Market),Volume);
				                    }
				                }
				
				
				            
				            //### Calculates cumulative volumes and surplus
				            
				            \BuyMarketVol[Market]=auctionoffers.sum(MarketOrder==1&Type==1&Status==0&same(Market),Volume);
				            \SellMarketVol[Market]=auctionoffers.sum(MarketOrder==1&Type==-1&Status==0&same(Market),Volume);
				            
				            indicativepricedetermination.do{
				                if(Old==0&same(Market)) {
				                    CumBuyVol=sum(Old==0&:Price<=Price&same(Market),BuyVol)+\BuyMarketVol[Market];
				                    CumSellVol=sum(Old==0&:Price>=Price&same(Market),SellVol)+\SellMarketVol[Market];
				                    FeasibleVol=min(CumBuyVol,CumSellVol);
				                    BuySurplus=CumBuyVol-CumSellVol;
				                    }
				                }
				            
				
				
				            //Calculates aggregate transaction variables
				            
				            //Calculates maximum volume that can be transacted using only limit buy and sell offers
				            \AuctionVolume[Market]=indicativepricedetermination.maximum(Old==0&same(Market),FeasibleVol);
				            
				           
				            
				            //Determines price
				            
				            \NumVolumeMaximizingPrices[Market]=indicativepricedetermination.count(Old==0&FeasibleVol==\AuctionVolume[Market]&same(Market));
				            
				            //There is no price with positive possible trading volume
				            if (indicativepricedetermination.count(Old==0&FeasibleVol>0&same(Market))==0) {
				                \AuctionPrice[Market]=-1;
				                \AuctionVolume[Market]=0;
				                \PriceDeterminationRule[Market]=0;
				                }
				            
				            //There is a single, volume maximizing price
				            elsif (\NumVolumeMaximizingPrices[Market]==1) {
				                \AuctionPrice[Market]=indicativepricedetermination.find(Old==0&FeasibleVol==\AuctionVolume[Market]&same(Market),Price);
				                \PriceDeterminationRule[Market]=1;
				                }
				            
				            //There are more than one volume maximizing prices, but there is a clear minimum absolute surplus for one of them
				            elsif (indicativepricedetermination.count(Old==0&FeasibleVol==\AuctionVolume[Market]&same(Market)&abs(BuySurplus)==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],abs(BuySurplus)))==1) {
				                \AuctionPrice[Market]=indicativepricedetermination.find(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&abs(BuySurplus)==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],abs(BuySurplus)),Price);
				                \PriceDeterminationRule[Market]=2;
				                }
				            
				            //There are more than one volume maximizing prices, but there is a surplus of buy volume for all of them
				            elsif (indicativepricedetermination.count(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&abs(BuySurplus)==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],abs(BuySurplus))&BuySurplus>0)==2) {
				                \AuctionPrice[Market]=indicativepricedetermination.find(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&Price==indicativepricedetermination.maximum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],Price),Price);
				                \PriceDeterminationRule[Market]=3;
				                }
				            
				            //There are more than one volume maximizing prices, but there is a surplus of sell volume for all of them
				            elsif (indicativepricedetermination.count(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&abs(BuySurplus)==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],abs(BuySurplus))&BuySurplus<0)==2) {
				                \AuctionPrice[Market]=indicativepricedetermination.find(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&Price==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],Price),Price);
				                \PriceDeterminationRule[Market]=4;
				                }
				            
				            //The price is set to the average volume maximizing and absolute surplus minimizing price,
				            //rounded to the nearest tick and rounded down in case of equal distance
				            else {
				                \AuctionPrice[Market]=round(indicativepricedetermination.average(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market]&abs(BuySurplus)==indicativepricedetermination.minimum(same(Market)&Old==0&FeasibleVol==\AuctionVolume[Market],abs(BuySurplus)),Price)-0.00000000001,\TickSize);
				                \PriceDeterminationRule[Market]=5;
				                }
				
				
				
				            //Calculates total volume that can be transacted
				        // AuctionVolumeTotal[Market]=min(auctionoffers.sum(same(Market)&Status==0&Type==-1&(MarketOrder==1|Price<=\AuctionPrice[Market]),Volume),auctionoffers.sum(same(Market)&Status==0&Type==1&(MarketOrder==1|Price>=\AuctionPrice[Market]),Volume));
				
				            }
				        }
				    }
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "Subjects"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==0;
				containerbox "OKButton"{
					hasframe = FALSE;
					height = 40p;
					bottom = 0p;
					cutbottom = TRUE;
					standardbox "OKButtonDE"{
						hasframe = FALSE;
						displaycondition = \Language==2;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Gebote abschicken"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0;
								message = "Sind Sie sicher, dass Sie kein Gebot abgeben wollen?";
								yesButtonStr = "Ja, weiter";
								noButtonStr = "Nein, zurck";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)==0|auctionoffers.count(Offerer==:Subject&Type==1&Status==0)>0;
								message = "Sind Sie sicher, dass Sie kein Kaufgebot abgeben wollen?";
								yesButtonStr = "Ja, weiter";
								noButtonStr = "Nein, zurck";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)==0|auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0;
								message = "Sind Sie sicher, dass Sie kein Verkaufsgebot abgeben wollen?";
								yesButtonStr = "Ja, weiter";
								noButtonStr = "Nein, zurck";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0&auctionoffers.count(Offerer==:Subject&Type==1&Status==0)>0;
								message = "Wollen Sie wirklich weitergehen? Sie knnen dann Ihre Gebote nicht mehr ndern.";
								yesButtonStr = "Ja, weiter";
								noButtonStr = "Nein, zurck";
							}
							program{
								table = globals;
								do{
									//Proceeds to next stage when all subjects are done
									
									CallAuctionDone=CallAuctionDone+1;
									if (CallAuctionDone==NumSubjects) {
									    \IndicativePriceInterval=-1;
									    subjects.do{
									        LeaveStage=1;
									        }
									    }
									
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=111;
									    }
									
								}
							}
						}
					}
					standardbox "OKButtonEN"{
						hasframe = FALSE;
						displaycondition = \Language==1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Submit orders"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0;
								message = "Are you sure you do not want to enter any order?";
								yesButtonStr = "Yes, proceed";
								noButtonStr = "No, go back";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)==0|auctionoffers.count(Offerer==:Subject&Type==1&Status==0)>0;
								message = "Are you sure you do not want to enter a buy order?";
								yesButtonStr = "Yes, proceed";
								noButtonStr = "No, go back";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==1&Status==0)+auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)==0|auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0;
								message = "Are you sure you do not want to enter a sell order?";
								yesButtonStr = "Yes, proceed";
								noButtonStr = "No, go back";
							}
							checker{
								condition = auctionoffers.count(Offerer==:Subject&Type==-1&Status==0)>0&auctionoffers.count(Offerer==:Subject&Type==1&Status==0)>0;
								message = "Are you sure you want to proceed? You will not be able to change your orders anymore.";
								yesButtonStr = "Yes, proceed";
								noButtonStr = "No, go back";
							}
							program{
								table = globals;
								do{
									//Proceeds to next stage when all subjects are done
									
									CallAuctionDone=CallAuctionDone+1;
									if (CallAuctionDone==NumSubjects) {
									    \IndicativePriceInterval=-1;
									    subjects.do{
									        LeaveStage=1;
									        }
									    }
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=111;
									    }
									
								}
							}
						}
					}
				}
				containerbox "Markets"{
					hasframe = FALSE;
					containerbox "1Market"{
						hasframe = TRUE;
						width = 638p;
						top = 0p;
						cutleft = TRUE;
						displaycondition = NumMarkets>=1;
						containerbox "MarketContainer"{
							hasframe = TRUE;
							plotbox "Background"{
								hasframe = TRUE;
								bgcolor = layout.find(ID=="CA_BG",Color);
								maintainaspectratio = FALSE;
								xaxistype = LINEAR;
								yaxistype = LINEAR;
								xleft = -100;
								xright = 100;
								ybottom = -100;
								ytop = 100;
							}
							containerbox "Market"{
								hasframe = FALSE;
								height = 300p;
								bottom = 0p;
								cutbottom = TRUE;
								containerbox "TradingContainer"{
									hasframe = FALSE;
									left = 5p;
									right = 5p;
									bottom = 5p;
									containerbox "BuyOffersContainer"{
										hasframe = TRUE;
										width = 180p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_BuyOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "BuyOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Buy orders\";2=\"Kaufgebote\">}";
												}
											}
											selectcontractbox "BuyOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best>\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=104;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=104;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volume";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=104;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volumen";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=104;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
										}
									}
									containerbox "SellOffersContainer"{
										hasframe = TRUE;
										width = 180p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_SellOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "SellOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Sell orders\";2=\"Verkaufsgebote\">}";
												}
											}
											selectcontractbox "SellOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Volume";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=103;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "SellOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Volumen";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=103;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "SellOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=103;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "SellOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]&Offerer==:Subject;
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = auctionoffers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    ID=maximum(same(Market),ID)+1;
															    Market=:Market;
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    }
															
														}
													}
													program{
														table = auctionoffers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=103;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
										}
									}
									containerbox "OrderSubmissionContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_OrderSubmission_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "OrderSubmission"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Order submission\";2=\"Gebotsabgabe\">}";
												}
											}
											containerbox "ContractMaker"{
												hasframe = FALSE;
												height = 157p;
												bottom = 0p;
												cutbottom = TRUE;
												makecontractbox "ContractMakerSingleUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Price";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Sell at best  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=101;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Buy at best  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = \MinPrice <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = TRUE;
															message = "Since the price at which an \"at best\" order will be executed is not known in advance, please make sure you will be able to finance this purchase even if the price turns out to be high!";
															yesButtonStr = "OK";
															noButtonStr = "Cancel";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=102;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Submit sell order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Submit buy order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new buy orders must be lower than the lowest price you offer to sell for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerSingleUnitDE"{
													hasframe = FALSE;
													height = 50%;
													bottom = 0p;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Preis";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Verkauf bestens  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=101;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kauf bestens  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = \MinPrice <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = TRUE;
															message = "Da der Preis, zu dem ein \"Bestens\"-Gebot ausgefhrt wird, im Vorhinein nicht feststeht, stellen Sie bitte sicher, dass Sie dieses auch dann finanzieren knnen, wenn ein hoher Preis ergibt!";
															yesButtonStr = "OK";
															noButtonStr = "Cancel";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=102;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Verkaufsgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kaufgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerMultipleUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volume";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Price per unit";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "Sell at best"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=101;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Buy at best"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = \MinPrice * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = TRUE;
															message = "Since the price at which an \"at best\" order will be executed is not known in advance, please make sure you will be able to finance this purchase even if the price turns out to be high!";
															yesButtonStr = "OK";
															noButtonStr = "Cancel";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=102;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Submit sell order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Submit buy order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerMultipleUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volumen";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Preis pro Stck";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Verkauf bestens  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=101;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kauf bestens  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = \MinPrice * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = TRUE;
															message = "Da der Preis, zu dem ein \"Bestens\"-Gebot ausgefhrt wird, im Vorhinein nicht feststeht, stellen Sie bitte sicher, dass Sie dieses auch dann finanzieren knnen, wenn ein hoher Preis ergibt!";
															yesButtonStr = "OK";
															noButtonStr = "Cancel";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=1;
																Price=-1;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=102;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Verkaufsgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kaufgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerSingleUnitNoMarketOrdersEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Price";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Submit sell order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new sell order must be higher than the lowest price you offer to buy for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Submit buy order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new buy order must be lower than the highest price you offer to sell for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerSingleUnitNoMarketOrdersDE"{
													hasframe = FALSE;
													height = 50%;
													bottom = 0p;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Preis";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Verkaufsgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[:DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[:DisplayMarket[1]])|\NumTypedOffersCallAuction[:DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[:DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kaufgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Volume=1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerMultipleUnitNoMarketOrdersEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volume";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Price per unit";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "Submit sell order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum(same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Submit buy order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "ContractMakerMultipleUnitNoMarketOrdersDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volumen";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Preis pro Stck";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Verkaufsgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= (:Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[1]&Status==0,Volume);
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[:DisplayMarket[1]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=105;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Kaufgebot  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[1], Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\NumTypedOffersCallAuction[DisplayMarket[1]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[1]])|\\NumTypedOffersCallAuction[DisplayMarket[1]]<=0;
															message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = auctionoffers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																MarketOrder=0;
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=106;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
											}
											containerbox "SummaryInformation"{
												hasframe = FALSE;
												height = 90p;
												bottom = 0p;
												cutbottom = TRUE;
												containerbox "SingleMarket"{
													hasframe = FALSE;
													displaycondition = \NumMarkets==1|\ForceSingleMarket==1;
													standardbox "NoIndicativePrice"{
														hasframe = FALSE;
														displaycondition = \IndicativePriceInterval<0;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														item{
															label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market\";2=\"Markt\">}";
														}
														item{
															label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
															variable = Cash;
															format = "<>!text: 1=\"<|0.01>\"";
															input = FALSE;
														}
														item{
															label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
															variable = Assets[DisplayMarket[1]];
															format = "<>!text: 1=\"<|1>\"";
															input = FALSE;
														}
													}
													standardbox "IndicativePrice"{
														hasframe = FALSE;
														displaycondition = \IndicativePriceInterval>=0;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														item{
															label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market\";2=\"Markt\">}";
														}
														item{
															label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
															variable = Cash;
															format = "<>!text: 1=\"<|0.01>\"";
															input = FALSE;
														}
														item{
															label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
															variable = Assets[DisplayMarket[1]];
															format = "<>!text: 1=\"<|1>\"";
															input = FALSE;
														}
														item{
															label = "<><\\Language|!text: 1=\"Indicative price:\";2=\"Indikativer Preis:\";>";
															variable = \AuctionPrice[DisplayMarket[1]];
															format = "<>!text: \\I=\"<\\Language|!text: 1=\"Not yet calculated\";2=\"Noch nicht berechnet\";>\"; -1=\"<\\Language|!text: 1=\"No trade possible\";2=\"Kein Handel mglich\";>\"; \\TickSize=\"<\\Language|!text: 1=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";2=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";>\";";
															input = FALSE;
														}
													}
												}
												containerbox "MultiMarkets"{
													hasframe = FALSE;
													displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
													standardbox "NoIndicativePrice"{
														hasframe = FALSE;
														displaycondition = \IndicativePriceInterval<0;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														item{
															variable = \Language;
															format = "<>!text: 1=\"{\\rtf \\fs18 \\qc \\b Market<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\" 2=\"{\\rtf \\fs18 \\qc \\b Markt<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\"";
															input = FALSE;
														}
														item{
														}
														item{
															label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
															variable = Assets[DisplayMarket[1]];
															format = "<>!text: 1=\"<|1>\"";
															input = FALSE;
														}
														item{
														}
													}
													standardbox "IndicativePrice"{
														hasframe = FALSE;
														displaycondition = \IndicativePriceInterval>=0;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														item{
															variable = \Language;
															format = "<>!text: 1=\"{\\rtf \\fs18 \\qc \\b Market<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\" 2=\"{\\rtf \\fs18 \\qc \\b Markt<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\"";
															input = FALSE;
														}
														item{
														}
														item{
															label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
															variable = Assets[DisplayMarket[1]];
															format = "<>!text: 1=\"<|1>\"";
															input = FALSE;
														}
														item{
															label = "<><\\Language|!text: 1=\"Indicative price:\";2=\"Indikativer Preis:\";>";
															variable = \AuctionPrice[DisplayMarket[1]];
															format = "<>!text: \\I=\"<\\Language|!text: 1=\"Not yet calculated\";2=\"Noch nicht berechnet\";>\"; -1=\"<\\Language|!text: 1=\"No trade possible\";2=\"Kein Handel mglich\";>\"; \\TickSize=\"<\\Language|!text: 1=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";2=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";>\";";
															input = FALSE;
														}
														item{
														}
													}
												}
											}
										}
									}
								}
							}
							containerbox "TopContainer_Signals"{
								hasframe = FALSE;
								displaycondition = \NumMarkets==1&\ForceSingleMarket==0;
								containerbox "SignalsContainer"{
									hasframe = TRUE;
									left = 5p;
									right = 5p;
									top = 5p;
									bottom = 5p;
									plotbox "Background"{
										hasframe = TRUE;
										bgcolor = layout.find(ID=="CA_Signals_BG",Color);
										maintainaspectratio = FALSE;
										xaxistype = LINEAR;
										yaxistype = LINEAR;
										xleft = -100;
										xright = 100;
										ybottom = -100;
										ytop = 100;
									}
									selectcontractbox "Signals"{
										hasframe = FALSE;
										left = 5p;
										right = 5p;
										top = 5p;
										bottom = 5p;
										displaycondition = \CallAuctionSignals[DisplayMarket[1]]==1&\Language==1;
										table = signals;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = same(Period)&Set==:Subject&Market==:DisplayMarket[1];
										sortfields = "Type";
										tablelayout = LIST;
										scrollatstart = FALSE;
										scrollatEnd = TRUE;
										selectbest = TRUE;
										item{
											label = "Signals";
											variable = Signal;
											format = "\\SignalPrecision";
											input = FALSE;
										}
									}
									selectcontractbox "Signals"{
										hasframe = FALSE;
										left = 5p;
										right = 5p;
										top = 5p;
										bottom = 5p;
										displaycondition = \CallAuctionSignals[DisplayMarket[1]]==1&\Language==2;
										table = signals;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = same(Period)&Set==:Subject&Market==:DisplayMarket[1];
										sortfields = "Type";
										tablelayout = LIST;
										scrollatstart = FALSE;
										scrollatEnd = TRUE;
										selectbest = TRUE;
										item{
											label = "Signale";
											variable = Signal;
											format = "\\SignalPrecision";
											input = FALSE;
										}
									}
								}
							}
							containerbox "TopContainer_Market"{
								hasframe = FALSE;
								height = 300p;
								top = 5p;
								cuttop = TRUE;
								displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
								containerbox "Market"{
									hasframe = FALSE;
									height = 300p;
									bottom = 0p;
									cutbottom = TRUE;
									containerbox "TradingContainer"{
										hasframe = FALSE;
										left = 5p;
										right = 5p;
										bottom = 5p;
										containerbox "BuyOffersContainer"{
											hasframe = TRUE;
											width = 180p;
											left = 0p;
											cutleft = TRUE;
											plotbox "Background"{
												hasframe = TRUE;
												bgcolor = layout.find(ID=="CA_BuyOffers_BG",Color);
												maintainaspectratio = FALSE;
												xaxistype = LINEAR;
												yaxistype = LINEAR;
												xleft = -100;
												xright = 100;
												ybottom = -100;
												ytop = 100;
											}
											containerbox "BuyOffers"{
												hasframe = FALSE;
												left = 5p;
												right = 5p;
												top = 5p;
												bottom = 5p;
												standardbox "Heading"{
													hasframe = FALSE;
													height = 23p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Buy orders\";2=\"Kaufgebote\">}";
													}
												}
												selectcontractbox "BuyOffersSingleUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[2]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "-Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Price";
														variable = Price;
														format = "<>!text: -1=\"Best>\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Cancel"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "You have selected an order from another trader. You can only cancel your own orders!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Somebody else was faster!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=104;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												selectcontractbox "BuyOffersSingleUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[2]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMLEFT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "-Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Preis";
														variable = Price;
														format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Stornieren"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Jemand anderes war schneller!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=104;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												selectcontractbox "BuyOffersMultiUnitEN"{
													hasframe = FALSE;
													displaycondition = Language==1&\MultiUnitTrading[DisplayMarket[2]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "-Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Volume";
														variable = Volume;
														format = "\\VolumePrecision";
														input = FALSE;
													}
													item{
														label = "Price";
														variable = Price;
														format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Cancel"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "You have selected an order from another trader. You can only cancel your own orders!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Somebody else was faster!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=104;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
																
																
															}
														}
													}
												}
												selectcontractbox "BuyOffersMultiUnitDE"{
													hasframe = FALSE;
													displaycondition = Language==2&\MultiUnitTrading[DisplayMarket[2]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "-Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Volumen";
														variable = Volume;
														format = "\\VolumePrecision";
														input = FALSE;
													}
													item{
														label = "Preis";
														variable = Price;
														format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Stornieren"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Jemand anderes war schneller!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=104;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
											}
										}
										containerbox "SellOffersContainer"{
											hasframe = TRUE;
											width = 180p;
											left = 0p;
											cutleft = TRUE;
											plotbox "Background"{
												hasframe = TRUE;
												bgcolor = layout.find(ID=="CA_SellOffers_BG",Color);
												maintainaspectratio = FALSE;
												xaxistype = LINEAR;
												yaxistype = LINEAR;
												xleft = -100;
												xright = 100;
												ybottom = -100;
												ytop = 100;
											}
											containerbox "SellOffers"{
												hasframe = FALSE;
												left = 5p;
												right = 5p;
												top = 5p;
												bottom = 5p;
												standardbox "Heading"{
													hasframe = FALSE;
													height = 23p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Sell orders\";2=\"Verkaufsgebote\">}";
													}
												}
												selectcontractbox "SellOffersMultiUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[2]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMLEFT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==-1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Price";
														variable = Price;
														format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													item{
														label = "Volume";
														variable = Volume;
														format = "\\VolumePrecision";
														input = FALSE;
													}
													button "Cancel"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "You have selected an order from another trader. You can only cancel your own orders!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Somebody else was faster!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=103;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
																
																
															}
														}
													}
												}
												selectcontractbox "SellOffersMultiUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[2]]==1;
													table = auctionoffers;
													buttonposition = BOTTOMLEFT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==-1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Preis";
														variable = Price;
														format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													item{
														label = "Volumen";
														variable = Volume;
														format = "\\VolumePrecision";
														input = FALSE;
													}
													button "Stornieren"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Jemand anderes war schneller!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=103;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
																
																
															}
														}
													}
												}
												selectcontractbox "SellOffersSingleUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[2]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMLEFT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==-1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Price";
														variable = Price;
														format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Cancel"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "You have selected an order from another trader. You can only cancel your own orders!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Somebody else was faster!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=103;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
																
																
															}
														}
													}
												}
												selectcontractbox "SellOffersSingleUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[2]]==0;
													table = auctionoffers;
													buttonposition = BOTTOMLEFT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = Type==-1&Status==0&Market==DisplayMarket[2]&Offerer==:Subject;
													sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
													tablelayout = LIST;
													scrollatstart = TRUE;
													scrollatEnd = FALSE;
													selectbest = TRUE;
													item{
														label = "Preis";
														variable = Price;
														format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
														input = FALSE;
													}
													button "Stornieren"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														checker{
															condition = Offerer == :Subject;
															message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Status==0;
															message = "Jemand anderes war schneller!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = auctionoffers;
															do{
																//Processes cancellation
																
																//Marks offer as cancelled
																Status = 2;
																StatusTime = gettime() - \StartTime;
																
																//Generates contracts table record
																contracts.new{
																    Period=\Period;
																    ID=maximum(same(Market),ID)+1;
																    Market=:Market;
																    Price=:Price;
																    Volume=:Volume;
																    Transacted=:Transacted;
																    VolumeTraded=\I;
																    Status=:Status;
																    Type=:Type;
																    OfferTime=:OfferTime;
																    OfferID=:ID;
																    TransactionID=\I;
																    Time=:StatusTime;
																    Offerer=:Offerer;
																    Accepter=\I;
																    }
																
															}
														}
														program{
															table = auctionoffers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Subject;
																    Event=103;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
											}
										}
										containerbox "OrderSubmissionContainer"{
											hasframe = TRUE;
											plotbox "Background"{
												hasframe = TRUE;
												bgcolor = layout.find(ID=="CA_OrderSubmission_BG",Color);
												maintainaspectratio = FALSE;
												xaxistype = LINEAR;
												yaxistype = LINEAR;
												xleft = -100;
												xright = 100;
												ybottom = -100;
												ytop = 100;
											}
											containerbox "OrderSubmission"{
												hasframe = FALSE;
												left = 5p;
												right = 5p;
												top = 5p;
												bottom = 5p;
												standardbox "Heading"{
													hasframe = FALSE;
													height = 23p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Order submission\";2=\"Gebotsabgabe\">}";
													}
												}
												containerbox "ContractMaker"{
													hasframe = FALSE;
													height = 157p;
													bottom = 0p;
													cutbottom = TRUE;
													makecontractbox "ContractMakerSingleUnitEN"{
														hasframe = FALSE;
														displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[2]]==0&\AllowMarketOrders[DisplayMarket[2]]==1;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Price";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Sell at best  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=101;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Buy at best  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = \MinPrice <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = TRUE;
																message = "Since the price at which an \"at best\" order will be executed is not known in advance, please make sure you will be able to finance this purchase even if the price turns out to be high!";
																yesButtonStr = "OK";
																noButtonStr = "Cancel";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=102;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Submit sell order  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Submit buy order  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerSingleUnitDE"{
														hasframe = FALSE;
														height = 50%;
														bottom = 0p;
														displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==1;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Preis";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Verkauf bestens  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=101;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kauf bestens  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = \MinPrice <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = TRUE;
																message = "Da der Preis, zu dem ein \"Bestens\"-Gebot ausgefhrt wird, im Vorhinein nicht feststeht, stellen Sie bitte sicher, dass Sie dieses auch dann finanzieren knnen, wenn ein hoher Preis ergibt!";
																yesButtonStr = "OK";
																noButtonStr = "Cancel";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=102;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Verkaufsgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = FALSE;
															buttoncolor = 0;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kaufgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerMultipleUnitEN"{
														hasframe = FALSE;
														displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==1;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Volume";
															variable = Volume;
															format = "\\VolumePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinVol;
															max = \MaxVol;
														}
														item{
															label = "Price per unit";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "Sell at best"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=101;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "Buy at best"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = \MinPrice * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = TRUE;
																message = "Since the price at which an \"at best\" order will be executed is not known in advance, please make sure you will be able to finance this purchase even if the price turns out to be high!";
																yesButtonStr = "OK";
																noButtonStr = "Cancel";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=102;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "Submit sell order"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "Submit buy order"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerMultipleUnitDE"{
														hasframe = FALSE;
														displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==1;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Volumen";
															variable = Volume;
															format = "\\VolumePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinVol;
															max = \MaxVol;
														}
														item{
															label = "Preis pro Stck";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Verkauf bestens  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=101;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kauf bestens  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = \MinPrice * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = TRUE;
																message = "Da der Preis, zu dem ein \"Bestens\"-Gebot ausgefhrt wird, im Vorhinein nicht feststeht, stellen Sie bitte sicher, dass Sie dieses auch dann finanzieren knnen, wenn ein hoher Preis ergibt!";
																yesButtonStr = "OK";
																noButtonStr = "Cancel";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=1;
																	Price=-1;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=102;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Verkaufsgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kaufgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[1]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerSingleUnitNoMarketOrdersEN"{
														hasframe = FALSE;
														displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==0;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Price";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Submit sell order  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Submit buy order  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerSingleUnitNoMarketOrdersDE"{
														hasframe = FALSE;
														height = 50%;
														bottom = 0p;
														displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0&\AllowMarketOrders[DisplayMarket[1]]==0;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Preis";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Verkaufsgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = 0 < (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[:DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[:DisplayMarket[2]])|\NumTypedOffersCallAuction[:DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[:DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kaufgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Volume=1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerMultipleUnitNoMarketOrdersEN"{
														hasframe = FALSE;
														displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==0;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Volume";
															variable = Volume;
															format = "\\VolumePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinVol;
															max = \MaxVol;
														}
														item{
															label = "Price per unit";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "Submit sell order"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "You do not have enough assets to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new sell order must be higher than the highest price you offer to buy for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot create more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> sell order(s). Please cancel an existing sell order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum(same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "Submit buy order"{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "You must enter a price greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "You must enter a volume greater than zero!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "You do not have enough cash to submit this order!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "The price of a new buy order must be lower than the lowest price you offer to sell for.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>You cannot have more than <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> buy order(s) outstanding at any time. Please cancel an existing buy order before submitting a new one.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
													makecontractbox "ContractMakerMultipleUnitNoMarketOrdersDE"{
														hasframe = FALSE;
														displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1&\AllowMarketOrders[DisplayMarket[1]]==0;
														table = auctionoffers;
														buttonposition = BOTTOMRIGHT;
														buttonsequence = HORIZONTAL;
														emptyallowed = FALSE;
														allemptyallowed = FALSE;
														numrecords = 1;
														tablelayout = VERTICAL;
														item{
															label = "Volumen";
															variable = Volume;
															format = "\\VolumePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinVol;
															max = \MaxVol;
														}
														item{
															label = "Preis pro Stck";
															variable = Price;
															format = "\\PricePrecision";
															input = TRUE;
															showdefault = FALSE;
															emptyallowed = TRUE;
															min = \MinPrice;
															max = \MaxPrice;
														}
														button "  Verkaufsgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume <= (:Assets[:DisplayMarket[2]]+:ShortingCapacityAssets[:DisplayMarket[2]])-auctionoffers.sum(Offerer==::Subject&Type==-1&Market==:DisplayMarket[2]&Status==0,Volume);
																message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price>auctionoffers.maximum(Offerer==:Subject&Type==1&Status==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Verkaufsgebots muss hher als der hchste Preis sein, zu dem Sie anbieten zu kaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==-1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[:DisplayMarket[2]]|1> Verkaufsgebot(e) abgeben. Bitte stornieren Sie ein existierendes Verkaufsgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = -1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=105;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
														button "  Kaufgebot  "{
															clearinputafterok = FALSE;
															norecordmadeorselected = FALSE;
															terminatestage = FALSE;
															donotterminatestage = TRUE;
															specialbuttoncolor = TRUE;
															buttoncolor = 13158600;
															checker{
																condition = Price!=0;
																message = "Sie mssen einen greren Preis als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Volume!=0;
																message = "Sie mssen einen greres Volumen als Null eingeben!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price * Volume <= (:Cash+:ShortingCapacityCash)-auctionoffers.sum(Offerer==::Subject&Type==1&MarketOrder==0&Status==0,Volume*Price);
																message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = Price<auctionoffers.minimum(Offerer==:Subject&Type==-1 & Status == 0& MarketOrder==0&Market==:DisplayMarket[2], Price);
																message = "Der Preis eines neuen Kaufgebots muss geringer als der geringste Preis sein, zu dem Sie anbieten zu verkaufen.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															checker{
																condition = (\NumTypedOffersCallAuction[DisplayMarket[2]]>0&auctionoffers.count(Type==1&Status==0&Offerer==::Subject)<\NumTypedOffersCallAuction[DisplayMarket[2]])|\\NumTypedOffersCallAuction[DisplayMarket[2]]<=0;
																message = "<>Sie knnen nicht mehr als <\\NumTypedOffersCallAuction[DisplayMarket[2]]|1> Kaufgebot(e) abgeben. Bitte stornieren Sie ein existierendes Kaufgebot, bevor Sie ein neues abgeben.";
																yesButtonStr = "";
																noButtonStr = "OK";
															}
															program{
																table = auctionoffers;
																do{
																	//Creates offer
																	
																	Market=:DisplayMarket[2];
																	Period=\Period;
																	ID = auctionoffers.maximum (same(Market),ID) + 1;
																	Offerer = :Subject;
																	Type = 1;
																	Status = 0;
																	Transacted=0;
																	OfferTime = gettime() - \StartTime;
																	StatusTime = \I;
																	MarketOrder=0;
																	
																	
																}
															}
															program{
																table = auctionoffers;
																do{
																	//Timelog
																	
																	timelog.new
																	    {
																	    ID=timelog.maximum(ID)+1;
																	    Time=gettime()-\StartTime;
																	    Period=\Period;
																	    Subject=:Offerer;
																	    Event=106;
																	    Data[1]=:ID;
																	    Data[2]=:Market;
																	    }
																	
																}
															}
														}
													}
												}
												containerbox "SummaryInformation"{
													hasframe = FALSE;
													height = 90p;
													bottom = 0p;
													cutbottom = TRUE;
													containerbox "SingleMarket"{
														hasframe = FALSE;
														displaycondition = \NumMarkets==1|\ForceSingleMarket==1;
														standardbox "NoIndicativePrice"{
															hasframe = FALSE;
															displaycondition = \IndicativePriceInterval<0;
															buttonposition = BOTTOMRIGHT;
															buttonsequence = HORIZONTAL;
															item{
																label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market\";2=\"Markt\">}";
															}
															item{
																label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
																variable = Cash;
																format = "<>!text: 1=\"<|0.01>\"";
																input = FALSE;
															}
															item{
																label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
																variable = Assets[DisplayMarket[2]];
																format = "<>!text: 1=\"<|1>\"";
																input = FALSE;
															}
														}
														standardbox "IndicativePrice"{
															hasframe = FALSE;
															displaycondition = \IndicativePriceInterval>=0;
															buttonposition = BOTTOMRIGHT;
															buttonsequence = HORIZONTAL;
															item{
																label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market\";2=\"Markt\">}";
															}
															item{
																label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
																variable = Cash;
																format = "<>!text: 1=\"<|0.01>\"";
																input = FALSE;
															}
															item{
																label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
																variable = Assets[DisplayMarket[2]];
																format = "<>!text: 1=\"<|1>\"";
																input = FALSE;
															}
															item{
																label = "<><\\Language|!text: 1=\"Indicative price:\";2=\"Indikativer Preis:\";>";
																variable = \AuctionPrice[DisplayMarket[2]];
																format = "<>!text: \\I=\"<\\Language|!text: 1=\"Not yet calculated\";2=\"Noch nicht berechnet\";>\"; -1=\"<\\Language|!text: 1=\"No trade possible\";2=\"Kein Handel mglich\";>\"; \\TickSize=\"<\\Language|!text: 1=\"<\\AuctionPrice[DisplayMarket[2]]|\\PricePrecision>\";2=\"<\\AuctionPrice[DisplayMarket[2]]|\\PricePrecision>\";>\";";
																input = FALSE;
															}
														}
													}
													containerbox "MultiMarkets"{
														hasframe = FALSE;
														displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
														standardbox "NoIndicativePrice"{
															hasframe = FALSE;
															displaycondition = \IndicativePriceInterval<0;
															buttonposition = BOTTOMRIGHT;
															buttonsequence = HORIZONTAL;
															item{
																variable = \Language;
																format = "<>!text: 1=\"{\\rtf \\fs18 \\qc \\b Market<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\" 2=\"{\\rtf \\fs18 \\qc \\b Markt<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\"";
																input = FALSE;
															}
															item{
															}
															item{
																label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
																variable = Assets[DisplayMarket[2]];
																format = "<>!text: 1=\"<|1>\"";
																input = FALSE;
															}
															item{
															}
														}
														standardbox "IndicativePrice"{
															hasframe = FALSE;
															displaycondition = \IndicativePriceInterval>=0;
															buttonposition = BOTTOMRIGHT;
															buttonsequence = HORIZONTAL;
															item{
																variable = \Language;
																format = "<>!text: 1=\"{\\rtf \\fs18 \\qc \\b Market<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\" 2=\"{\\rtf \\fs18 \\qc \\b Markt<if(\\NumMarkets>1,1,0)|!text: 0=\"\";1=\" <DisplayMarket[1]|1>\">}\"";
																input = FALSE;
															}
															item{
															}
															item{
																label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
																variable = Assets[DisplayMarket[2]];
																format = "<>!text: 1=\"<|1>\"";
																input = FALSE;
															}
															item{
																label = "<><\\Language|!text: 1=\"Indicative price:\";2=\"Indikativer Preis:\";>";
																variable = \AuctionPrice[DisplayMarket[2]];
																format = "<>!text: \\I=\"<\\Language|!text: 1=\"Not yet calculated\";2=\"Noch nicht berechnet\";>\"; -1=\"<\\Language|!text: 1=\"No trade possible\";2=\"Kein Handel mglich\";>\"; \\TickSize=\"<\\Language|!text: 1=\"<\\AuctionPrice[DisplayMarket[2]]|\\PricePrecision>\";2=\"<\\AuctionPrice[DisplayMarket[2]]|\\PricePrecision>\";>\";";
																input = FALSE;
															}
															item{
															}
														}
													}
												}
											}
										}
									}
								}
							}
							containerbox "MiddleContainer"{
								hasframe = FALSE;
								displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
								standardbox "Text"{
									hasframe = FALSE;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									item{
										label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
										variable = Cash;
										format = "<>!text: 1=\"<|0.01>\"";
										input = FALSE;
									}
								}
							}
						}
					}
					containerbox "MarketButtons"{
						hasframe = FALSE;
						width = 100p;
						left = 0p;
						containerbox "BottomContainer"{
							hasframe = FALSE;
							height = 300p;
							bottom = 0p;
							cutbottom = TRUE;
							containerbox "DE"{
								hasframe = FALSE;
								displaycondition = \Language==2;
								standardbox "Button1"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 1"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=2;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button2"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 2"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=1;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button3"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=3&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 3"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=3;
												
											}
										}
									}
								}
								standardbox "Button4"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=4&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 4"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=4;
												
											}
										}
									}
								}
								standardbox "Button5"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=5&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 5"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=5;
												
											}
										}
									}
								}
							}
							containerbox "EN"{
								hasframe = FALSE;
								displaycondition = \Language==1;
								standardbox "Button1"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 1"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=2;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button2"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 2"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=1;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button3"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=3&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 3"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=3;
												
											}
										}
									}
								}
								standardbox "Button4"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=4&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 4"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=4;
												
											}
										}
									}
								}
								standardbox "Button5"{
									hasframe = FALSE;
									height = 40p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>5&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 5"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[1]=5;
												
											}
										}
									}
								}
							}
						}
						containerbox "TopContainer"{
							hasframe = FALSE;
							height = 300p;
							top = 0p;
							cuttop = TRUE;
							containerbox "DE"{
								hasframe = FALSE;
								displaycondition = \Language==2;
								standardbox "Button1"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 1"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=2;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button2"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 2"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=1;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button3"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=3&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 3"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=3;
												
											}
										}
									}
								}
								standardbox "Button4"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=4&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 4"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=4;
												
											}
										}
									}
								}
								standardbox "Button5"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=5&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Markt 5"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=5;
												
											}
										}
									}
								}
							}
							containerbox "EN"{
								hasframe = FALSE;
								displaycondition = \Language==1;
								standardbox "Button1"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 1"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=2;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button2"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=2&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 2"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=1;    //Because market 2 is primary market in case \NumMarkets>1
												
											}
										}
									}
								}
								standardbox "Button3"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=3&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 3"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=3;
												
											}
										}
									}
								}
								standardbox "Button4"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=4&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 4"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=4;
												
											}
										}
									}
								}
								standardbox "Button5"{
									hasframe = FALSE;
									height = 45p;
									top = 0p;
									cuttop = TRUE;
									displaycondition = \NumMarkets>=5&\ForceSingleMarket==0;
									buttonposition = BOTTOMRIGHT;
									buttonsequence = HORIZONTAL;
									button "Market 5"{
										clearinputafterok = FALSE;
										norecordmadeorselected = FALSE;
										terminatestage = FALSE;
										donotterminatestage = TRUE;
										specialbuttoncolor = TRUE;
										buttoncolor = 13158600;
										program{
											table = subjects;
											do{
												DisplayMarket[2]=5;
												
											}
										}
									}
								}
							}
						}
					}
				}
			}
			containerbox "Experimenter"{
				hasframe = FALSE;
				bottom = 30p;
				displaycondition = IsExperimenter==1;
				containerbox "Markets"{
					hasframe = FALSE;
					containerbox "1Market"{
						hasframe = TRUE;
						top = 0p;
						cuttop = TRUE;
						displaycondition = NumMarkets==1;
						containerbox "MarketContainer"{
							hasframe = TRUE;
							top = 0p;
							plotbox "Background"{
								hasframe = TRUE;
								bgcolor = layout.find(ID=="CA_BG",Color);
								maintainaspectratio = FALSE;
								xaxistype = LINEAR;
								yaxistype = LINEAR;
								xleft = -100;
								xright = 100;
								ybottom = -100;
								ytop = 100;
							}
							containerbox "Market"{
								hasframe = FALSE;
								height = 300p;
								bottom = 0p;
								cutbottom = TRUE;
								containerbox "TradingContainer"{
									hasframe = FALSE;
									left = 5p;
									right = 5p;
									bottom = 5p;
									containerbox "BuyOffersContainer"{
										hasframe = TRUE;
										width = 200p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_BuyOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "BuyOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Buy offers\";2=\"Kaufgebote\">}";
												}
											}
											selectcontractbox "BuyOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==:DisplayMarket[1];
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best>\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Offerer";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = MIDDLELEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==:DisplayMarket[1];
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Anbieter";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==:DisplayMarket[1];
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volume";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Offerer";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==1&Status==0&Market==:DisplayMarket[1];
												sortfields = "-Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volumen";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Anbieter";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
										}
									}
									containerbox "SellOffersContainer"{
										hasframe = TRUE;
										width = 200p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_SellOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "SellOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Sell offers\";2=\"Verkaufsgebote\">}";
												}
											}
											selectcontractbox "SellOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1];
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Volume";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Offerer";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1];
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Volumen";
													variable = Volume;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Anbieter";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1];
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "<>!text: -1=\"Best\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Offerer";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = auctionoffers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1];
												sortfields = "MarketOrder*(\\MaxPrice+2)+Price";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "<>!text: -1=\"Bestens\"; 0=\"<Price|\\PricePrecision>\"";
													input = FALSE;
												}
												item{
													label = "Anbieter";
													variable = Offerer;
													format = "1";
													input = FALSE;
												}
											}
										}
									}
									containerbox "OrderSubmissionContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CA_OrderSubmission_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "OrderSubmission"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Order submission\";2=\"Gebotsabgabe\">}";
												}
											}
											containerbox "SummaryInformation"{
												hasframe = FALSE;
												height = 90p;
												bottom = 0p;
												cutbottom = TRUE;
												standardbox "IndicativePrice"{
													hasframe = FALSE;
													displaycondition = \IndicativePriceInterval>=0;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market\";2=\"Markt\">}";
													}
													item{
														label = "<><\\Language|!text: 1=\"Indicative price:\";2=\"Indikativer Preis:\";>";
														variable = \AuctionPrice[DisplayMarket[1]];
														format = "<>!text: \\I=\"<\\Language|!text: 1=\"Not yet calculated\";2=\"Noch nicht berechnet\";>\"; -1=\"<\\Language|!text: 1=\"No trade possible\";2=\"Kein Handel mglich\";>\"; \\TickSize=\"<\\Language|!text: 1=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";2=\"<\\AuctionPrice[DisplayMarket[1]]|\\PricePrecision>\";>\";";
														input = FALSE;
													}
												}
											}
										}
									}
								}
							}
							containerbox "TopContainer"{
								hasframe = FALSE;
								containerbox "SignalsContainer"{
									hasframe = TRUE;
									left = 5p;
									right = 5p;
									top = 5p;
									bottom = 5p;
									plotbox "Background"{
										hasframe = TRUE;
										bgcolor = layout.find(ID=="CA_Signals_BG",Color);
										maintainaspectratio = FALSE;
										xaxistype = LINEAR;
										yaxistype = LINEAR;
										xleft = -100;
										xright = 100;
										ybottom = -100;
										ytop = 100;
									}
									selectcontractbox "Signals"{
										hasframe = FALSE;
										left = 5p;
										right = 5p;
										top = 5p;
										bottom = 5p;
										displaycondition = \CallAuctionSignals[DisplayMarket[1]]==1;
										table = signals;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = same(Period)&Market==:DisplayMarket[1];
										sortfields = "Set; Type";
										tablelayout = LIST;
										scrollatstart = FALSE;
										scrollatEnd = TRUE;
										selectbest = TRUE;
										item{
											label = "Subject";
											variable = Set;
											format = "1";
											input = FALSE;
										}
										item{
											label = "Signals";
											variable = Signal;
											format = "\\SignalPrecision";
											input = FALSE;
										}
									}
								}
							}
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=97;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=96;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=94;
							    }
							
						}
					}
				}
				button "ChangeMarket"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = FALSE;
					buttoncolor = 0;
					program{
						table = subjects;
						do{
							DisplayMarket[1]=if(DisplayMarket[1]==1,2,1);
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "CallAuctionResults"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = always;
		timeout = if(\Period==\NumPeriods&(\CRTAfter==1|FinLit==1),-1,\TimeCallAuctionResults);
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*if(PracticePeriod==0|ShowCAPracticeResults==1,1,0)*(1-\Testmode1)*\CallAuction;
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=100;
				    }
				
			}
		}
		program{
			table = subjects;
			condition = \PracticePeriod==1&IsExperimenter==0;
			do{
				//Fills auctionpractice table
				
				for(Market,\NumMarkets){
				    //Writes entries
				    \Temp[1]=0;
				    while(auctionoffers.count(Market==:Market&Offerer==:Subject&Status==0&Type==1&Price>\Temp[1])>0) {
				        auctionoffers.do{
				            if(Market==:Market&Offerer==:Subject&Status==0&Type==1&Price==auctionoffers.minimum(Market==:Market&Offerer==:Subject&Status==0&Type==1&Price>\Temp[1],Price)){
				                auctionpractice.new{
				                    Market=:Market;
				                    DisplayMarket=if(Market==1,2,if(Market==2,1,Market));
				                    Subject=:Offerer;
				                    Type=:Type;
				                    PriceLow=\Temp[1];
				                    PriceHigh=:Price;
				                    Volume=auctionoffers.sum(Market==:Market&Offerer==:Subject&Status==0&Type==1&Price>=:PriceHigh,Volume);
				                    }
				                \Temp[1]=Price;
				                }
				            }
				        }
				    \Temp[1]=\MaxPrice+1;
				    while(auctionoffers.count(Market==:Market&Offerer==:Subject&Status==0&Type==-1&Price<\Temp[1])>0) {
				        auctionoffers.do{
				            if(Market==:Market&Offerer==:Subject&Status==0&Type==-1&Price==auctionoffers.maximum(Market==:Market&Offerer==:Subject&Status==0&Type==-1&Price<\Temp[1],Price)){
				                auctionpractice.new{
				                    Market=:Market;
				                    DisplayMarket=if(Market==1,2,if(Market==2,1,Market));
				                    Subject=:Offerer;
				                    Type=:Type;
				                    PriceLow=:Price;
				                    PriceHigh=\Temp[1];
				                    Volume=auctionoffers.sum(Market==:Market&Offerer==:Subject&Status==0&Type==-1&Price<=:PriceLow,Volume);
				                    }
				                \Temp[1]=Price;
				                }
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Fills pricedetermination table
				
				//### Populates pricedetermination table with unique prices, sorted ascendingly
				
				for(Market, \NumMarkets){
				
				    //Starts out at price -1
				    TempPrice[Market]=-1;
				
				    while (auctionoffers.count(Price>\TempPrice[:Market]&Status==0&MarketOrder==0&same(Market))>0) {
				        //Determines next price
				        \TempPrice[Market]=auctionoffers.minimum(Price>\TempPrice[:Market]&Status==0&MarketOrder==0&same(Market),Price);
				        pricedetermination.new {
				            Market=:Market;
				            Price=\TempPrice[:Market];
				            BuyVol=auctionoffers.sum(same(Price)&Status==0&Type==1&MarketOrder==0&same(Market),Volume);
				            SellVol=auctionoffers.sum(same(Price)&Status==0&Type==-1&MarketOrder==0&same(Market),Volume);
				            }
				        }
				
				    //### Calculates cumulative volumes and surplus
				
				    BuyMarketVol[Market]=auctionoffers.sum(MarketOrder==1&Type==1&Status==0,Volume);
				    SellMarketVol[Market]=auctionoffers.sum(MarketOrder==1&Type==-1&Status==0,Volume);
				
				    pricedetermination.do{
				        CumBuyVol=sum(:Price<=Price&same(Market),BuyVol)+\BuyMarketVol[:Market];
				        CumSellVol=sum(:Price>=Price&same(Market),SellVol)+\SellMarketVol[:Market];
				        FeasibleVol=min(CumBuyVol,CumSellVol);
				        BuySurplus=CumBuyVol-CumSellVol;
				        }
				    }
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Calculates aggregate transaction variables
				
				for(Market, \NumMarkets){
				
				    //Calculates maximum volume that can be transacted using only limit buy and sell offers
				    AuctionVolume[Market]=pricedetermination.maximum(same(Market),FeasibleVol);
				
				    //Calculates total volume that can be transacted
				    AuctionVolumeTotal[Market]=min(auctionoffers.sum(Status==0&Type==-1&(MarketOrder==1|Price<=\AuctionPrice[:Market])&same(Market),Volume),auctionoffers.sum(Status==0&Type==1&(MarketOrder==1|Price>=\AuctionPrice[:Market])&same(Market),Volume));
				    
				    }
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Determines price
				
				for(Market, \NumMarkets){
				
				    NumVolumeMaximizingPrices[Market]=pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market));
				
				    //There is no price with positive possible trading volume
				    if (pricedetermination.count(FeasibleVol>0&same(Market))==0) {
				        AuctionPrice[Market]=-1;
				        AuctionVolume[Market]=0;
				        PriceDeterminationRule[Market]=0;
				        }
				
				    //There is a single, volume maximizing price
				    elsif (\NumVolumeMaximizingPrices[Market]==1) {
				        AuctionPrice[Market]=pricedetermination.find(FeasibleVol==\AuctionVolume[:Market]&same(Market),Price);
				        PriceDeterminationRule[Market]=1;
				        }
				
				    //There are more than one volume maximizing prices, but there is a clear minimum absolute surplus for one of them
				    elsif (pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus)))==1) {
				        AuctionPrice[Market]=pricedetermination.find(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus)),Price);
				        PriceDeterminationRule[Market]=2;
				        }
				
				    //There are more than one volume maximizing prices, but there is a surplus of buy volume for all of them
				    elsif (pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus))&BuySurplus>0)==pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus)))) {
				        AuctionPrice[Market]=pricedetermination.find(FeasibleVol==\AuctionVolume[:Market]&same(Market)&Price==pricedetermination.maximum(FeasibleVol==\AuctionVolume[:Market]&same(Market),Price),Price);
				        PriceDeterminationRule[Market]=3;
				        }
				
				    //There are more than one volume maximizing prices, but there is a surplus of sell volume for all of them
				    elsif (pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus))&BuySurplus<0)==pricedetermination.count(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus)))) {
				        AuctionPrice[Market]=pricedetermination.find(FeasibleVol==\AuctionVolume[:Market]&same(Market)&Price==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),Price),Price);
				        PriceDeterminationRule[Market]=4;
				        }
				
				    //The price is set to the average volume maximizing and absolute surplus minimizing price,
				    //rounded to the nearest tick and rounded down in case of equal distance
				    else {
				        AuctionPrice[Market]=round((pricedetermination.maximum(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus))&BuySurplus>=0,Price)+pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market)&abs(BuySurplus)==pricedetermination.minimum(FeasibleVol==\AuctionVolume[:Market]&same(Market),abs(BuySurplus))&BuySurplus<=0,Price))/2-0.00000000001,\TickSize);
				        PriceDeterminationRule[Market]=5;
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=109;
				    }
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 1: Filling tbs tables with BTE limit orders
				
				//### Write BTE limit orders in order of price, time and ID
				
				for(Market,\NumMarkets){
				    if (\PriceDeterminationRule[Market]!=0) {
				
				        //### BTE asks
				
				        if (auctionoffers.sum(Status==0&MarketOrder==0&Type==-1&Price<\AuctionPrice[:Market]&same(Market),Volume)>0) {
				            //Set Temp[1] and [2] to the lowest Price and ID of any BTE ask
				            \Temp[1]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price<\AuctionPrice[:Market]&same(Market),Price);    //Price
				            \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price==\Temp[1]&same(Market),ID);    //ID
				            \Temp[3]=0;   //Done
				
				            //Loops until all open BTE asks have been copied
				            repeat {
				
				                //Copies relevant offer from auctionoffers to tbsa table
				                auctionoffers.do{
				                    if(ID==\Temp[2]&same(Market)) {
				                        tbsa.new{
				                            Market=:Market;
				                            offersID=:ID;
				                            tbsID=tbsa.maximum(tbsID)+1;
				                            Volume=:Volume;
				                            Transacted=:Transacted;
				                            OrderType=1;
				                            }
				                        }
				                    }
				
				                //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one relevant order has the same Price
				                if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==0&Type==-1&Price==\Temp[1]&same(Market),ID)) {
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price==\Temp[1]&ID>\Temp[2]&same(Market),ID);
				                    }
				                //Sets \Temp[1] (\Temp[2]) equal to next highest Price (ID) of relevant order in auctionoffers in case where there are no more relevant orders with the Price currently saved in \Temp[1]
				                elsif (\Temp[1]!=auctionoffers.maximum(Status==0&MarketOrder==0&Type==-1&Price<\AuctionPrice[:Market]&same(Market),Price)) {
				                    \Temp[1]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price<\AuctionPrice[:Market]&Price>\Temp[1]&same(Market),Price);
				                    \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price==\Temp[1]&same(Market),ID);
				                    }
				               //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				               else{
				                    \Temp[3]=1;
				                    }
				
				                } while (\Temp[3]==0);
				            }
				
				
				        //### BTE bids
				
				        if (auctionoffers.sum(Status==0&MarketOrder==0&Type==1&Price>\AuctionPrice[:Market]&same(Market),Volume)>0) {
				            //Set Temp[1] and [2] to the highest Price and lowest ID of any BTE bid
				            \Temp[1]=auctionoffers.maximum(Status==0&MarketOrder==0&Type==1&Price>\AuctionPrice[:Market]&same(Market),Price);    //Price
				            \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price==\Temp[1]&same(Market),ID);    //ID
				            \Temp[3]=0;   //Done
				
				            //Loops until all open BTE bids have been copied
				            repeat {
				
				                //Copies relevant offer from auctionoffers to tbsb table
				                auctionoffers.do{
				                    if(Price==\Temp[1]&ID==\Temp[2]&same(Market)) {
				                        tbsb.new{
				                            Market=:Market;
				                            offersID=:ID;
				                            tbsID=tbsb.maximum(tbsID)+1;
				                            Volume=:Volume;
				                            Transacted=:Transacted;
				                            OrderType=1;
				                            }
				                        }
				                    }
				
				                //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one relevant order has the same Price
				                if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==0&Type==1&Price==\Temp[1]&same(Market),ID)) {
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price==\Temp[1]&ID>\Temp[2]&same(Market),ID);
				                    }
				                //Sets \Temp[1] (\Temp[2]) equal to next lowest Price (ID) of relevant order in auctionoffers in case where there are no more relevant orders with the Price currently saved in \Temp[1]
				                elsif (\Temp[1]!=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price>\AuctionPrice[:Market]&same(Market),Price)) {
				                    \Temp[1]=auctionoffers.maximum(Status==0&MarketOrder==0&Type==1&Price>\AuctionPrice[:Market]&Price<\Temp[1]&same(Market),Price);
				                    \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price==\Temp[1]&same(Market),ID);
				                    }
				               //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				               else{
				                    \Temp[3]=1;
				                    }
				
				                } while (\Temp[3]==0);
				            }
				        }
				    }
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 2: Filling tbs tables with market orders if \MarketOrderPriority==1
				
				for(Market,\NumMarkets){
				
				    if(\PriceDeterminationRule[Market]!=0){
				
				        //### Write market orders in order of ID
				
				        if(\MarketOrderPriority[Market]==1) {
				
				            //### Market asks
				
				            if (auctionoffers.sum(Status==0&MarketOrder==1&Type==-1&same(Market),Volume)>0) {
				                //Set Temp[2] to the lowest ID of any market ask
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==-1&same(Market),ID);    //ID
				                \Temp[3]=0;   //Done
				
				                //Loops until all open market asks have been copied
				                repeat {
				
				                    //Copies relevant offer from auctionoffers to tbsa table
				                    auctionoffers.do{
				                        if(ID==\Temp[2]&same(Market)) {
				                            tbsa.new{
				                                Market=:Market;
				                                offersID=:ID;
				                                tbsID=tbsa.maximum(tbsID)+1;
				                                Volume=:Volume;
				                                Transacted=:Transacted;
				                                OrderType=2;
				                                }
				                            }
				                        }
				
				                    //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one market ask exists
				                    if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==1&Type==-1&same(Market),ID)) {
				                        \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==-1&ID>\Temp[2]&same(Market),ID);
				                        }
				                    //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                    else{
				                        \Temp[3]=1;
				                        }
				
				                    } while (\Temp[3]==0);
				                }
				
				            //### Market bids
				
				            if (auctionoffers.sum(Status==0&MarketOrder==1&Type==1&same(Market),Volume)>0) {
				                //Set Temp[2] to the lowest ID of any market bid
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==1&same(Market),ID);    //ID
				                \Temp[3]=0;   //Done
				
				                //Loops until all open market asks have been copied
				                repeat {
				
				                    //Copies relevant offer from auctionoffers to tbsb table
				                    auctionoffers.do{
				                        if(ID==\Temp[2]&same(Market)) {
				                            tbsb.new{
				                                Market=:Market;
				                                offersID=:ID;
				                                tbsID=tbsb.maximum(tbsID)+1;
				                                Volume=:Volume;
				                                Transacted=:Transacted;
				                                OrderType=2;
				                                }
				                            }
				                        }
				
				                    //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one market ask exists
				                    if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==1&Type==1&same(Market),ID)) {
				                        \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==1&ID>\Temp[2]&same(Market),ID);
				                        }
				                    //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                    else{
				                        \Temp[3]=1;
				                        }
				
				                    } while (\Temp[3]==0);
				                }
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 3: Filling tbs tables with AE limit orders
				
				for(Market,\NumMarkets){
				    if(\PriceDeterminationRule[Market]!=0){
				
				        //### Write AE limit orders in order of time and ID
				
				        //### AE asks
				
				        if (auctionoffers.sum(Status==0&MarketOrder==0&Type==-1&Price==\AuctionPrice[:Market]&same(Market),Volume)>0) {
				            //Set Temp[2] to the lowest ID of any AE ask
				            \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price==\AuctionPrice[:Market]&same(Market),ID);    //ID
				            \Temp[3]=0;   //Done
				
				            //Loops until all open AE asks have been copied
				            repeat {
				
				                //Copies relevant offer from auctionoffers to tbsa table
				                auctionoffers.do{
				                    if(ID==\Temp[2]&same(Market)) {
				                        tbsa.new{
				                            Market=:Market;
				                            offersID=:ID;
				                            tbsID=tbsa.maximum(tbsID)+1;
				                            Volume=:Volume;
				                            Transacted=:Transacted;
				                            OrderType=3;
				                            }
				                        }
				                    }
				
				                //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one AE ask exists
				                if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==0&Type==-1&Price==\AuctionPrice[:Market]&same(Market),ID)) {
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==-1&Price==\AuctionPrice[:Market]&ID>\Temp[2]&same(Market),ID);
				                    }
				                //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                else{
				                    \Temp[3]=1;
				                    }
				
				                } while (\Temp[3]==0);
				            }
				
				
				        //### AE bids
				
				        if (auctionoffers.sum(Status==0&MarketOrder==0&Type==1&Price==\AuctionPrice[:Market]&same(Market),Volume)>0) {
				            //Set Temp[2] to the lowest ID of any AE bid
				            \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price==\AuctionPrice[:Market]&same(Market),ID);    //ID
				            \Temp[3]=0;   //Done
				
				            //Loops until all open AE bids have been copied
				            repeat {
				
				                //Copies relevant offer from auctionoffers to tbsb table
				                auctionoffers.do{
				                    if(ID==\Temp[2]&same(Market)) {
				                        tbsb.new{
				                            Market=:Market;
				                            offersID=:ID;
				                            tbsID=tbsb.maximum(tbsID)+1;
				                            Volume=:Volume;
				                            Transacted=:Transacted;
				                            OrderType=3;
				                            }
				                        }
				                    }
				                 //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one market bid exists
				                if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==0&Type==1&Price==\AuctionPrice[:Market]&same(Market),ID)) {
				                    \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==0&Type==1&Price==\AuctionPrice[:Market]&ID>\Temp[2]&same(Market),ID);
				                    }
				                //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                else{
				                    \Temp[3]=1;
				                    }
				                 } while (\Temp[3]==0);
				             }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 4: Filling tbs tables with market orders if \MarketOrderPriority==0
				
				for(Market,\NumMarkets){
				    if(\PriceDeterminationRule[Market]!=0){
				
				        //### Write market orders in order of ID
				
				        if(\MarketOrderPriority[Market]==0) {
				
				            //### Market asks
				
				            if (auctionoffers.sum(Status==0&MarketOrder==1&Type==-1&same(Market),Volume)>0) {
				                //Set Temp[2] to the lowest ID of any market ask
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==-1&same(Market),ID);    //ID
				                \Temp[3]=0;   //Done
				
				                //Loops until all open market asks have been copied
				                repeat {
				
				                    //Copies relevant offer from auctionoffers to tbsa table
				                    auctionoffers.do{
				                        if(ID==\Temp[2]&same(Market)) {
				                            tbsa.new{
				                                Market=:Market;
				                                offersID=:ID;
				                                tbsID=tbsa.maximum(tbsID)+1;
				                                Volume=:Volume;
				                                Transacted=:Transacted;
				                                OrderType=2;
				                                }
				                            }
				                        }
				
				                    //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one market ask exists
				                    if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==1&Type==-1&same(Market),ID)) {
				                        \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==-1&ID>\Temp[2]&same(Market),ID);
				                        }
				                    //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                   else{
				                        \Temp[3]=1;
				                        }
				
				                    } while (\Temp[3]==0);
				                }
				
				            //### Market bids
				
				            if (auctionoffers.sum(Status==0&MarketOrder==1&Type==1&same(Market),Volume)>0) {
				                //Set Temp[2] to the lowest ID of any market bid
				                \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==1&same(Market),ID);    //ID
				                \Temp[3]=0;   //Done
				
				                //Loops until all open market asks have been copied
				                repeat {
				
				                    //Copies relevant offer from auctionoffers to tbsb table
				                    auctionoffers.do{
				                        if(ID==\Temp[2]&same(Market)) {
				                            tbsb.new{
				                                Market=:Market;
				                                offersID=:ID;
				                                tbsID=tbsb.maximum(tbsID)+1;
				                                Volume=:Volume;
				                                Transacted=:Transacted;
				                                OrderType=2;
				                                }
				                            }
				                        }
				
				                    //Sets \Temp[2] equal to next highest ID of relevant order in auctionoffers in case where more than one market ask exists
				                    if (\Temp[2]!=auctionoffers.maximum(Status==0&MarketOrder==1&Type==1&same(Market),ID)) {
				                        \Temp[2]=auctionoffers.minimum(Status==0&MarketOrder==1&Type==1&ID>\Temp[2]&same(Market),ID);
				                        }
				                    //Sets \Temp[3] equal to 1 in case where there are no more relevant orders left to copy
				                   else{
				                        \Temp[3]=1;
				                        }
				
				                    } while (\Temp[3]==0);
				                }
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 5: Matches orders and fills settlement table
				
				for(Market,\NumMarkets){
				    if(\PriceDeterminationRule[Market]!=0){
				
				        //Transacts buy (sell) offers with price strictly higher (lower) than \AuctionPrice with each other
				
				        //Sets TradeProcessingSide to -1 if there is more ask than bid volume and to 1 otherwise
				        \TradeProcessingSide=if(tbsa.sum(same(Market),Volume)>tbsb.sum(same(Market),Volume),-1,1);
				
				
				        if(\TradeProcessingSide==1) {
				            \Temp[1]=1;    //First tbsa-table record tbsID.
				            tbsb.do{
				                if(same(Market)){
				                    //Processes current tbsb table record until it is fully transacted or until there are no transactable orders in the tbsa table left
				                    while (Transacted<Volume&tbsa.sum(same(Market),Volume-Transacted)>0) {
				                        settlement.new{
				                            Market=:Market;
				                            Period=\Period;
				                            ID=settlement.maximum(ID)+1;
				                            BidID=:offersID;
				                            AskID=tbsa.find(tbsID==\Temp[1],offersID);
				                            \Temp[2]=min(:Volume-:Transacted,tbsa.find(tbsID==\Temp[1]&same(Market),Volume-Transacted));
				                            Volume=\Temp[2];
				                            }
				
				                        //Updates tbsa table
				                        tbsa.do{
				                            if(tbsID==\Temp[1]&same(Market)) {
				                                Transacted=Transacted+\Temp[2];
				                                }
				                            }
				
				                        //Updates tbsb table
				                        Transacted=Transacted+\Temp[2];
				
				                        \Temp[1]=tbsa.minimum(Volume>Transacted&same(Market),tbsID);    //Next not yet completely filled tbsa-table record tbsID.
				                        }
				                    }
				                }
				            }
				
				        else {
				            \Temp[1]=1;    //First tbsb-table record tbsID.
				            tbsa.do{
				                if(same(Market)){
				                    //Processes current tbsa table record until it is fully transacted or until there are no transactable orders in the tbsb table left
				                    while (Transacted<Volume&tbsb.sum(same(Market),Volume-Transacted)>0) {
				                        settlement.new{
				                            Market=:Market;
				                            Period=\Period;
				                            ID=settlement.maximum(ID)+1;
				                            AskID=:offersID;
				                            BidID=tbsb.find(tbsID==\Temp[1],offersID);
				                            \Temp[2]=min(:Volume-:Transacted,tbsb.find(tbsID==\Temp[1]&same(Market),Volume-Transacted));
				                            Volume=\Temp[2];
				                            }
				
				                        //Updates tbsb table
				                        tbsb.do{
				                            if(tbsID==\Temp[1]&same(Market)) {
				                                Transacted=Transacted+\Temp[2];
				                                }
				                            }
				
				                        //Updates tbsa table
				                        Transacted=Transacted+\Temp[2];
				
				                        \Temp[1]=tbsb.minimum(Volume>Transacted&same(Market),tbsID);    //Next not yet completely filled tbsb-table record tbsID.
				                        }
				                    }
				                }
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Settlement 6: Updates all tables using settlement table data
				
				for(Market,\NumMarkets){
				    if(PriceDeterminationRule[Market]!=0){
				
				        //Invalidates WTE limit orders
				        auctionoffers.do{
				            //Invalidates buy (sell) limit orders with price strictly lower (higher) than \AuctionPrice, or all if \PriceDeterminationRule==0
				            if(same(Market)&Status==0&MarketOrder==0&((Type==1&Price<\AuctionPrice[:Market]) | (Type==-1&Price>\AuctionPrice[:Market]) | \PriceDeterminationRule[:Market]==0)) {
				                Status=3;
				                StatusTime = gettime() - \StartTime;
				                }
				            }
				
				        settlement.do{
				        
				            if(same(Market)){
				
				                //Creates new buy side transaction table record
				                transactions.new{
				                    Period=:Period;
				                    Market=:Market;
				                    Price=\AuctionPrice[:Market];
				                    Volume=:Volume;
				                    OfferID=:BidID;
				                    AcceptanceID=maximum(same(Market),AcceptanceID)+1;
				                    Time=gettime()-\StartTime;
				                    Phase=1;
				                    }
				
				                //Creates new sell side transaction table record
				                transactions.new{
				                    Period=:Period;
				                    Market=:Market;
				                    Price=\AuctionPrice[:Market];
				                    Volume=:Volume;
				                    OfferID=:AskID;
				                    AcceptanceID=maximum(same(Market),AcceptanceID)+1;
				                    Time=gettime()-\StartTime;
				                    Phase=1;
				                    }
				
				                auctionoffers.do{
				                    if(ID==:BidID&same(Market)) {
				                  
				                        //Updates auctionoffers table record information
				                        Status=1;
				                        StatusTime = gettime() - \StartTime;
				                        Transacted=Transacted+:Volume;
				
				                        //Updates cash and share holdings
				                        subjects.do {
				                            if (Subject == :Offerer) {
				                                Cash=Cash-\AuctionPrice[:Market]*::Volume;
				                                Assets[:Market]=Assets[:Market]+::Volume;
				                                }
				                            }
				
				                        //Creates new contracts table record
				                        contracts.new{
				                            ID=contracts.maximum(same(Market),ID)+1;
				                            Period=\Period;
				                            Market=:Market;
				                            Price=\AuctionPrice[:Market];
				                            Volume=:Volume;
				                            Transacted=::Volume;
				                            VolumeTraded=::Volume;
				                            Status=1;
				                            Type=1;
				                            OfferTime=:OfferTime;
				                            OfferID=:ID;
				                            TransactionID=transactions.maximum(same(Market),AcceptanceID) - 1;
				                            Time=:StatusTime;
				                            Offerer=:Offerer;
				                            Phase=1;
				                            }
				                        }
				
				                    if(ID==:AskID&same(Market)) {
				                  
				                        //Updates auctionoffers table record information
				                        Status=1;
				                        StatusTime = gettime() - \StartTime;
				                        Transacted=Transacted+:Volume;
				
				                        //Updates cash and share holdings
				                        subjects.do {
				                            if (Subject == :Offerer) {
				                                Cash=Cash+\AuctionPrice[:Market]*::Volume;
				                                Assets[:Market]=Assets[:Market]-::Volume;
				                                }
				                            }
				
				                        //Creates new contracts table record
				                        contracts.new{
				                            ID=contracts.maximum(same(Market),ID)+1;
				                            Period=\Period;
				                            Market=:Market;
				                            Price=\AuctionPrice[:Market];
				                            Volume=:Volume;
				                            Transacted=::Volume;
				                            VolumeTraded=::Volume;
				                            Status=1;
				                            Type=-1;
				                            OfferTime=:OfferTime;
				                            OfferID=:ID;
				                            TransactionID=transactions.maximum(same(Market),AcceptanceID);
				                            Time=:StatusTime;
				                            Offerer=:Offerer;
				                            Phase=1;
				                            }
				                        }
				                    }
				                }
				            }
				
				        //Corrects contracts table ID for strange z-Tree behavior which causes first ID to be 2
				        \Temp[1]=contracts.minimum(same(Market),ID)-1;
				        if (\Temp[1]>0) {
				            contracts.do{
				                if(same(Market)){
				                    ID=ID-\Temp[1];
				                    }
				                }
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=110;
				    }
				
				
				
			}
		}
		program{
			table = globals;
			condition = \CallAuction==1;
			do{
				//Dividend draw
				
				for(Market, \NumMarkets){
				    r = roundup((random()*NumDividends[Market]),1);
				    Dividend[Market]=dividends.find(same(Period)&Type==:r&same(Market),Dividend);
				    }
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\CallAuction==1;
			do{
				//Updates subjects' cash and writes profit
				
				for(Market,\NumMarkets){
				    Cash=Cash+Assets[Market]*\Dividend[Market];
				    AssetValueTemp=if(Market==1,Assets[Market]*\BBV[Market],AssetValueTemp+Assets[Market]*\BBV[Market]);
				    }
				
				//Writes profit into Profit in the last period
				
				Profit=if((\Period==\NumPeriods|\IndependentPeriods==1)&PracticePeriod==0,(Cash+AssetValueTemp)*\ExchangeRate,Profit);
				
				\Done=0;
				
			}
		}
		program{
			table = summary;
			condition = \CallAuction==1;
			do{
				//Writes statistics into summary table
				
				for(Market,\NumMarkets){
				    AvgPriceCA[Market]=transactions.average(same(Market)&Phase==1,Price);
				    NumTradesCA[Market]=transactions.count(same(Market));
				    VolumeCA[Market]=transactions.sum(same(Market),Volume);
				    }
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\CallAuction==1;
			do{
				//Fills results table
				
				for(\i,\NumMarkets){
				    results.new{
				        Market=\i;
				        DisplayMarket=if(Market==1,2,if(Market==2,1,Market));    //Switches order for markets 1 and 2 for display purposes
				        Subject=:Subject;
				        Price=\AuctionPrice[Market];
				        Dividend=\Dividend[Market];
				        Phase=1;
				        Amount=:Assets[Market];
				        NumBought=contracts.sum(Market==:Market&Offerer==:Subject&Type==1&Phase==1,Transacted);
				        NumSold=contracts.sum(Market==:Market&Offerer==:Subject&Type==-1&Phase==1,Transacted);
				        }
				    }
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "ExperimenterMarketResult"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "Price:";
					variable = \AuctionPrice[1];
					format = "\\PricePrecision";
					input = FALSE;
				}
				item{
					label = "Volume:";
					variable = contracts.sum(Transacted)/2;
					format = "1";
					input = FALSE;
				}
			}
			standardbox "ExperimenterContinue"{
				hasframe = FALSE;
				displaycondition = \Period==\NumPeriods&IsExperimenter==1&(\CRTAfter==1|FinLit==1)&\ContinuousDoubleAuction==0;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = 1;
					format = "<>!text: 1=\"{\\rtf \\fs22 \\qc <\\ResultsDone|1>/<\\NumSubjects|1> subjects are done.}\"";
					input = FALSE;
				}
				item{
				}
				item{
					variable = if(\ResultsDone>=\NumSubjects,1,0);
					format = "<>!text: 0=\"{\\rtf {\\colortbl; \\red255\\green0\\blue0;\\red0\\green0\\blue0;} \\fs22 \\qc \\cf2     Click OK to proceed to after-market questionnaire items (CRT, FinLit).    }\" 1=\"{\\rtf {\\colortbl; \\red255\\green0\\blue0;\\red0\\green0\\blue0;} \\fs22 \\qc \\b \\cf1 Click OK to proceed to after-market questionnaire items (CRT, FinLit).}\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = TRUE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = globals;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=107;
							    }
							
						}
					}
				}
			}
			containerbox "SubjectContainer"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==0;
				containerbox "ButtonContainer"{
					hasframe = FALSE;
					height = 50p;
					bottom = 0p;
					cutbottom = TRUE;
					standardbox "EN"{
						hasframe = FALSE;
						displaycondition = \Language==1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Continue"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = FALSE;
							buttoncolor = 0;
							program{
								table = globals;
								do{
									//Proceeding to next stage
									
									ResultsDone=ResultsDone+1;
									
									//If no further stages, proceeds after last subject is finished, irrespective of experimenter input
									if (ResultsDone==NumSubjects&FinLit==0&CRTAfter==0) {
									    subjects.do{LeaveStage=1;}
									    }
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=108;
									    }
									
								}
							}
						}
					}
					standardbox "DE"{
						hasframe = FALSE;
						displaycondition = \Language==2;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Weiter"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = FALSE;
							buttoncolor = 0;
							program{
								table = globals;
								do{
									//Proceeding to next stage
									
									ResultsDone=ResultsDone+1;
									
									//If no further stages, proceeds after last subject is finished, irrespective of experimenter input
									if (ResultsDone==NumSubjects&FinLit==0&CRTAfter==0) {
									    subjects.do{LeaveStage=1;}
									    }
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=108;
									    }
									
								}
							}
						}
					}
				}
				standardbox "ContentSingleMarket"{
					hasframe = TRUE;
					displaycondition = \PracticePeriod==0&(\NumMarkets==1|\ForceSingleMarket==1);
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Price:\";2=\"Preis:\">";
						variable = \AuctionPrice[DisplayMarket[1]];
						format = "<>!text: -1=\"<\\Language|!text:1=\"No trade possible\";2=\"Kein Handel mglich\">\"; 0=\"<\\AuctionPrice[DisplayMarket[1]]|0.01>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"You bought the following number of shares:\";2=\"Sie haben die folgende Anzahl an Aktien gekauft:\">";
						variable = contracts.sum(Market==:DisplayMarket[1]&Offerer==:Subject&Type==1,Transacted);
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"You sold the following number of shares:\";2=\"Sie haben die folgende Anzahl an Aktien verkauft:\">";
						variable = contracts.sum(Market==:DisplayMarket[1]&Offerer==:Subject&Type==-1,Transacted);
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Your updated share holdings are:\"; 2=\"Ihr aktualisierter Aktienbestand lautet:\">";
						variable = Assets[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Dividends per share:\"; 2=\"Dividende je Aktie:\">";
						variable = \Dividend[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total dividends:\"; 2=\"Gesamte Dividendenzahlung:\">";
						variable = Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
						variable = Cash;
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
				}
				containerbox "ContentMultiMarket"{
					hasframe = TRUE;
					displaycondition = \PracticePeriod==0&(\NumMarkets>1&\ForceSingleMarket!=1);
					standardbox "Text"{
						hasframe = TRUE;
						height = 200p;
						top = 0p;
						cuttop = TRUE;
						displaycondition = \PracticePeriod==0&\NumMarkets>1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
							variable = Cash;
							format = "<>!text: 1=\"<|1>\"";
							input = FALSE;
						}
						item{
						}
					}
					selectcontractbox "AssetDataDE"{
						hasframe = FALSE;
						height = 100p;
						top = 0p;
						displaycondition = \Language==2;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==1;
						sortfields = "DisplayMarket";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Aktie";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Preis";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "In dieser Periode gekauft / verkauft";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Bestand";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividende je Aktie";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Dividende gesamt";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
					selectcontractbox "AssetDataEN"{
						hasframe = FALSE;
						height = 100p;
						top = 0p;
						displaycondition = \Language==1;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==1;
						sortfields = "DisplayMarket";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Asset";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Price";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "Assets bought/sold in this period";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Asset balance";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividend per asset";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Total dividend";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
				}
				containerbox "ContentPractice"{
					hasframe = FALSE;
					displaycondition = PracticePeriod==1;
					standardbox "Text"{
						hasframe = FALSE;
						height = 20%;
						top = 0p;
						cuttop = TRUE;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Results summary}\"; 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Ergebniszusammenfassung}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Depending on the market price, your entries would lead to the following results:\";2=\"In Abhngigkeit vom resultierenden Marktpreis wrden Ihre Eingaben zu folgenden Ergebnissen fhren:\">";
						}
						item{
							label = "<><\\Language|!text:1=\"(In case of a market price which does not correspond to any of the results below, your cash and asset balances would remain unchanged.)\"; 2=\"(Ergibt sich ein Marktpreis, fr welchen keine Ergebnisse angezeigt werden, so ndert sich Ihr Vermgen nicht.)\">";
						}
					}
					selectcontractbox "TradePreviewMultiMarketDE"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==2&\NumMarkets>1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "DisplayMarket;PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Aktie";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Preis zwischen...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...und";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"unendlich\"";
							input = FALSE;
						}
						item{
							label = "Ergebnis";
							variable = Type;
							format = "<>!text:-1=\"Verkauf <Volume|1> Stck\"; 1=\"Kauf <Volume|1> Stck\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewMultiMarketEN"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==1&\NumMarkets>1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "DisplayMarket;PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Asset";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Price between...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...and";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"infinite\"";
							input = FALSE;
						}
						item{
							label = "Outcome";
							variable = Type;
							format = "<>!text:-1=\"Sell <Volume|1> assets\"; 1=\"Buy <Volume|1> assets\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewSingleMarketDE"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==2&\NumMarkets==1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Preis zwischen...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...und";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"unendlich\"";
							input = FALSE;
						}
						item{
							label = "Ergebnis";
							variable = Type;
							format = "<>!text:-1=\"Verkauf <Volume|1> Stck\"; 1=\"Kauf <Volume|1> Stck\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewSingleMarketEN"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==1&\NumMarkets==1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Price between...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...and";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"infinite\"";
							input = FALSE;
						}
						item{
							label = "Outcome";
							variable = Type;
							format = "<>!text:-1=\"Sell <Volume|1> assets\"; 1=\"Buy <Volume|1> assets\"";
							input = FALSE;
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=98;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=95;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=93;
							    }
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "ExperimenterMarketResult"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "Price:";
					variable = \AuctionPrice[1];
					format = "\\PricePrecision";
					input = FALSE;
				}
				item{
					label = "Volume:";
					variable = contracts.sum(Transacted)/2;
					format = "1";
					input = FALSE;
				}
			}
			containerbox "TraderContainer"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==0&\PracticePeriod==0;
				standardbox "ContentSingleMarket"{
					hasframe = TRUE;
					displaycondition = \PracticePeriod==0&(\NumMarkets==1|\ForceSingleMarket==1);
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Price:\";2=\"Preis:\">";
						variable = \AuctionPrice[DisplayMarket[1]];
						format = "<>!text: -1=\"<\\Language|!text:1=\"No trade possible\";2=\"Kein Handel mglich\">\"; 0=\"<\\AuctionPrice[DisplayMarket[1]]|0.01>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"You bought the following number of shares:\";2=\"Sie haben die folgende Anzahl an Aktien gekauft:\">";
						variable = contracts.sum(Market==:DisplayMarket[1]&Offerer==:Subject&Type==1,Transacted);
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"You sold the following number of shares:\";2=\"Sie haben die folgende Anzahl an Aktien verkauft:\">";
						variable = contracts.sum(Market==:DisplayMarket[1]&Offerer==:Subject&Type==-1,Transacted);
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Your updated share holdings are:\"; 2=\"Ihr aktualisierter Aktienbestand lautet:\">";
						variable = Assets[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Dividends per share:\"; 2=\"Dividende je Aktie:\">";
						variable = \Dividend[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total dividends:\"; 2=\"Gesamte Dividendenzahlung:\">";
						variable = Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
						variable = Cash;
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
				}
				containerbox "ContentMultiMarket"{
					hasframe = TRUE;
					displaycondition = \PracticePeriod==0&(\NumMarkets>1&\ForceSingleMarket!=1);
					standardbox "Text"{
						hasframe = TRUE;
						height = 200p;
						top = 0p;
						cuttop = TRUE;
						displaycondition = \PracticePeriod==0&\NumMarkets>1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
							variable = Cash;
							format = "<>!text: 1=\"<|1>\"";
							input = FALSE;
						}
						item{
						}
					}
					selectcontractbox "AssetDataDE"{
						hasframe = FALSE;
						height = 100p;
						top = 0p;
						displaycondition = \Language==2;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==1;
						sortfields = "DisplayMarket";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Aktie";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Preis";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "In dieser Periode gekauft / verkauft";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Bestand";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividende je Aktie";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Dividende gesamt";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
					selectcontractbox "AssetDataEN"{
						hasframe = FALSE;
						height = 100p;
						top = 0p;
						displaycondition = \Language==1;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==1;
						sortfields = "DisplayMarket";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Asset";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Price";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "Assets bought/sold in this period";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Asset balance";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividend per asset";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Total dividend";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
				}
				containerbox "ContentPractice"{
					hasframe = FALSE;
					displaycondition = PracticePeriod==1;
					standardbox "Text"{
						hasframe = FALSE;
						height = 20%;
						top = 0p;
						cuttop = TRUE;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Results summary}\"; 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Ergebniszusammenfassung}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Depending on the market price, your entries would lead to the following results:\";2=\"In Abhngigkeit vom resultierenden Marktpreis wrden Ihre Eingaben zu folgenden Ergebnissen fhren:\">";
						}
						item{
							label = "<><\\Language|!text:1=\"(In case of a market price which does not correspond to any of the results below, your cash and asset balances would remain unchanged.)\"; 2=\"(Ergibt sich ein Marktpreis, fr welchen keine Ergebnisse angezeigt werden, so ndert sich Ihr Vermgen nicht.)\">";
						}
					}
					selectcontractbox "TradePreviewMultiMarketDE"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==2&\NumMarkets>1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "DisplayMarket;PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Aktie";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Preis zwischen...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...und";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"unendlich\"";
							input = FALSE;
						}
						item{
							label = "Ergebnis";
							variable = Type;
							format = "<>!text:-1=\"Verkauf <Volume|1> Stck\"; 1=\"Kauf <Volume|1> Stck\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewMultiMarketEN"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==1&\NumMarkets>1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "DisplayMarket;PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Asset";
							variable = DisplayMarket;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Price between...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...and";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"infinite\"";
							input = FALSE;
						}
						item{
							label = "Outcome";
							variable = Type;
							format = "<>!text:-1=\"Sell <Volume|1> assets\"; 1=\"Buy <Volume|1> assets\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewSingleMarketDE"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==2&\NumMarkets==1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Preis zwischen...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...und";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"unendlich\"";
							input = FALSE;
						}
						item{
							label = "Ergebnis";
							variable = Type;
							format = "<>!text:-1=\"Verkauf <Volume|1> Stck\"; 1=\"Kauf <Volume|1> Stck\"";
							input = FALSE;
						}
					}
					selectcontractbox "TradePreviewSingleMarketEN"{
						hasframe = TRUE;
						top = 5%;
						displaycondition = \Language==1&\NumMarkets==1;
						table = auctionpractice;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = Subject==:Subject;
						sortfields = "PriceLow";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = FALSE;
						item{
							label = "Price between...";
							variable = PriceLow;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "...and";
							variable = PriceHigh;
							format = "<>!text:\\MaxPrice=\"<PriceHigh|0.01>\";\\MaxPrice+1=\"infinite\"";
							input = FALSE;
						}
						item{
							label = "Outcome";
							variable = Type;
							format = "<>!text:-1=\"Sell <Volume|1> assets\"; 1=\"Buy <Volume|1> assets\"";
							input = FALSE;
						}
					}
				}
			}
		}
	}
	stage "ContinuousDoubleAuction"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = always;
		timeout = \TimeContinuousDoubleAuction;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\ContinuousDoubleAuction;
				
			}
		}
		program{
			table = globals;
			condition = \ContinuousDoubleAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=0;
				    Event=2;
				    }
				
			}
		}
		program{
			table = globals;
			do{
				//Records start time for chart display
				StartTimeCDA=gettime();
				
			}
		}
		program{
			table = globals;
			condition = \PriceHighlightScheme>0;
			do{
				//CDA Timer task
				later (CDATimer) repeat{
				    //Price highlighting
				    for(Market,NumMarkets){
				        if(\PriceHighlightColor[Market]>0){
				            if(\PriceHighlightTime[Market]<gettime()){
				                \PriceHighlightColor[Market]=22;
				                }
				            }
				        }
				    }
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "EarlyEndingVote"{
				hasframe = FALSE;
				height = 42p;
				bottom = -5p;
				displaycondition = \EarlyEndingVote==1&IsExperimenter==0;
				standardbox "Text"{
					hasframe = FALSE;
					right = 180p;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"You can vote for ending the period early. You can nonetheless continue to trade until everybody\"; 2=\"Sie knnen dafr stimmen, die Periode frhzeitig zu beenden. Sie knnen trotzdem\"";
						input = FALSE;
					}
					item{
						variable = \Language;
						format = "<>!text: 1=\" has voted for an early end, or until the period ends due to timeout. Votes so far: <subjects.count(EarlyEndingVote==1)|1>/<\\NumSubjects|1>.\"; 2=\"weiter handeln, bis alle ihre Stimme abgegeben haben, oder die Periode durch Zeitablauf endet. Bisherige Stimmen: <subjects.count(EarlyEndingVote==1)|1>/<\\NumSubjects|1>.\"";
						input = FALSE;
					}
				}
				standardbox "VoteButtonNotVotedDE"{
					hasframe = FALSE;
					displaycondition = \Language==2&EarlyEndingVote==0;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					button "Fr Periodenende stimmen"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 5921535;
						program{
							table = subjects;
							do{
								//Processes vote
								
								EarlyEndingVote=1;
								
								if (subjects.sum(EarlyEndingVote)==NumSubjects) {
								    \CDATimer=-1;
								    subjects.do{
								        LeaveStage=1;
								        }
								    }
								
							}
						}
						program{
							table = globals;
							do{
								//Changes a subjects table variable to ensure display updating
								
								subjects.do{i=i+1;}
								
							}
						}
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=116;
								    }
								
							}
						}
					}
				}
				standardbox "VoteButtonVotedDE"{
					hasframe = FALSE;
					displaycondition = \Language==2&EarlyEndingVote==1;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					button "Stimme widerrufen"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 5921535;
						program{
							table = subjects;
							do{
								//Processes vote
								
								EarlyEndingVote=0;
								
							}
						}
						program{
							table = globals;
							do{
								//Changes a subjects table variable to ensure display updating
								
								subjects.do{i=i+1;}
								
							}
						}
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=117;
								    }
								
							}
						}
					}
				}
				standardbox "VoteButtonNotVotedEN"{
					hasframe = FALSE;
					displaycondition = \Language==1&EarlyEndingVote==0;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					button "Vote to end period"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 5921535;
						program{
							table = subjects;
							do{
								//Processes vote
								
								EarlyEndingVote=1;
								
								if (subjects.sum(EarlyEndingVote)==NumSubjects) {
								    \CDATimer=-1;
								    subjects.do{
								        LeaveStage=1;
								        }
								    }
								
								
							}
						}
						program{
							table = globals;
							do{
								//Changes a subjects table variable to ensure display updating
								
								subjects.do{i=i+1;}
								
							}
						}
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=116;
								    }
								
							}
						}
					}
				}
				standardbox "VoteButtonVotedEN"{
					hasframe = FALSE;
					displaycondition = \Language==1&EarlyEndingVote==1;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					button "Revoke vote"{
						clearinputafterok = FALSE;
						norecordmadeorselected = FALSE;
						terminatestage = FALSE;
						donotterminatestage = TRUE;
						specialbuttoncolor = TRUE;
						buttoncolor = 5921535;
						program{
							table = subjects;
							do{
								//Processes vote
								
								EarlyEndingVote=0;
								
							}
						}
						program{
							table = globals;
							do{
								//Changes a subjects table variable to ensure display updating
								
								subjects.do{i=i+1;}
								
							}
						}
						program{
							table = subjects;
							do{
								//Timelog
								
								timelog.new
								    {
								    ID=timelog.maximum(ID)+1;
								    Time=gettime()-\StartTime;
								    Period=\Period;
								    Subject=:Subject;
								    Event=117;
								    }
								
							}
						}
					}
				}
			}
			containerbox "Subjects"{
				hasframe = FALSE;
				bottom = 37p;
				displaycondition = IsExperimenter==0;
				containerbox "Market1"{
					hasframe = TRUE;
					right = 0p;
					top = 0p;
					cuttop = TRUE;
					containerbox "MarketContainer"{
						hasframe = TRUE;
						width = 619p;
						right = 0p;
						top = 0p;
						cutright = TRUE;
						plotbox "Background"{
							hasframe = TRUE;
							bgcolor = layout.find(ID=="CDA_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -100;
							xright = 100;
							ybottom = -100;
							ytop = 100;
						}
						containerbox "Market"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							containerbox "HistoryContainer"{
								hasframe = TRUE;
								height = 180p;
								bottom = 0p;
								cutbottom = TRUE;
								plotbox "Background"{
									hasframe = TRUE;
									bgcolor = layout.find(ID=="CDA_History_BG",Color);
									maintainaspectratio = FALSE;
									xaxistype = LINEAR;
									yaxistype = LINEAR;
									xleft = -100;
									xright = 100;
									ybottom = -100;
									ytop = 100;
								}
								containerbox "History"{
									hasframe = FALSE;
									left = 5p;
									right = 5p;
									top = 5p;
									bottom = 5p;
									containerbox "Buttons"{
										hasframe = FALSE;
										width = 140p;
										height = 148p;
										right = 0p;
										top = 0p;
										cutright = TRUE;
										containerbox "ButtonsEN"{
											hasframe = FALSE;
											displaycondition = \Language==1;
											standardbox "DisplayModeSwitches Traded"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Cancelled"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==2;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Invalidated"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==3;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches All"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==-1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
										}
										containerbox "ButtonsDE"{
											hasframe = FALSE;
											displaycondition = \Language==2;
											standardbox "DisplayModeSwitches Traded"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Cancelled"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==2;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Invalidated"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==3;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches All"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==-1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
										}
									}
									selectcontractbox "HistoryListEN"{
										hasframe = TRUE;
										displaycondition = \Language==1;
										table = contracts;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = (Status == :DisplayStatus | ( :DisplayStatus==-1 & Status!=0) ) & (Offerer==:Subject | Accepter==:Subject) & Market==DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
										sortfields = "-Time";
										tablelayout = LIST;
										scrollatstart = TRUE;
										scrollatEnd = FALSE;
										selectbest = FALSE;
										item{
											label = "Type";
											variable = Status;
											format = "<>!text: 1=\"        Trade         \"; 2=\"Cancelled\"; 3=\"Invalidated\"";
											input = FALSE;
										}
										item{
											label = "Price";
											variable = Price;
											format = "\\PricePrecision";
											input = FALSE;
										}
										item{
											label = "Volume";
											variable = if(VolumeTraded>0,VolumeTraded,Volume);
											format = "\\VolumePrecision";
											input = FALSE;
										}
										item{
											label = "My role";
											variable = Status*100+if(Type==1,1,0)*10+if(Offerer==:Subject,1,0);
											format = "<>!text: 100=\"I bought\"; 101=\"I sold\"; 110=\"I sold\";111=\"I bought\";211=\"I offered to buy\";201=\"I offered to sell\";";
											input = FALSE;
										}
									}
									selectcontractbox "HistoryListDE"{
										hasframe = TRUE;
										displaycondition = \Language==2;
										table = contracts;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = (Status == :DisplayStatus | ( :DisplayStatus==-1 & Status!=0) ) & (Offerer==:Subject | Accepter==:Subject) & Market==DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
										sortfields = "-Time";
										tablelayout = LIST;
										scrollatstart = TRUE;
										scrollatEnd = FALSE;
										selectbest = FALSE;
										item{
											label = "Typ";
											variable = Status;
											format = "<>!text: 1=\"        Gehandelt         \"; 2=\"Storniert\"; 3=\"Gelscht\"";
											input = FALSE;
										}
										item{
											label = "Preis";
											variable = Price;
											format = "\\PricePrecision";
											input = FALSE;
										}
										item{
											label = "Volumen";
											variable = if(VolumeTraded>0,VolumeTraded,Volume);
											format = "\\VolumePrecision";
											input = FALSE;
										}
										item{
											label = "Aktion";
											variable = Status*100+if(Type==1,1,0)*10+if(Offerer==:Subject,1,0);
											format = "<>!text: 100=\"Kauf\"; 101=\"Verkauf\"; 110=\"Verkauf\";111=\"Kauf\";211=\"Kaufgebot\";201=\"Verkaufsgebot\";";
											input = FALSE;
										}
									}
								}
							}
							containerbox "Market"{
								hasframe = FALSE;
								containerbox "TradingContainer"{
									hasframe = FALSE;
									height = 300p;
									bottom = 0p;
									cutbottom = TRUE;
									containerbox "BuyOffersContainer"{
										hasframe = TRUE;
										width = 179p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_BuyOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "BuyOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Buy orders\";2=\"Kaufgebote\">}";
												}
											}
											selectcontractbox "BuyOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												button "Sell"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "You have selected your own order. You cannot buy from yourself!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Volume <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
														message = "You do not have enough assets for this trade!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price);
														message = "There is an offer to buy at a higher price. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==1&Price==:Price,OfferTime);
														message = "There is an offer to buy at the same price which was submitted sooner. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Sets volume
															
															SellVol=1;
															
														}
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=1;
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates contract information
															Transacted=Transacted+\TransactedVol;
															Status = if(Transacted==Volume-Invalidated,1,0);
															StatusTime = gettime() - \StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == ::Subject ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == :Offerer ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															    }
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestBid=Price;
															    BestAsk=if(offers.count(Status==0&Type==-1)>0,offers.minimum(Status==0&Type==-1,Price),\I);
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[DisplayMarket[1]]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==4){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=3;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=6;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												button "Verkauf"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "Sie haben Ihr eigenes Gebot markiert. Sie knnen nicht von sich selbst kaufen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Volume <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
														message = "Sie haben nicht gengend Aktien fr diese Transaktion!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price);
														message = "Es gibt ein Kaufgebot mit einem hheren Preis. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==1&Price==:Price,OfferTime);
														message = "Es gibt ein Kaufgebot mit dem gleichen Preis, das frher abgegeben wurde. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Sets volume
															
															SellVol=1;
															
														}
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=1;
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates contract information
															Transacted=Transacted+\TransactedVol;
															Status = if(Transacted==Volume-Invalidated,1,0);
															StatusTime = gettime() - \StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == ::Subject ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == :Offerer ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															    }
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestBid=Price;
															    BestAsk=if(offers.count(Status==0&Type==-1)>0,offers.minimum(Status==0&Type==-1,Price),\I);
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[DisplayMarket[1]]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==4){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=3;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=6;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volume";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Sell volume";
													variable = SellVol;
													format = "\\VolumePrecision";
													input = TRUE;
													showdefault = FALSE;
													emptyallowed = TRUE;
													min = \MinVol;
													max = \MaxVol;
													defaultvalue = 0;
												}
												button "Sell"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "You have selected your own order. You cannot buy from yourself!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = SellVol>0;
														message = "You have to state the number of assets you want to sell!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = SellVol <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
														message = "You do not have enough assets for this trade!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price);
														message = "There is an offer to buy at a higher price. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==1&Price==:Price,OfferTime);
														message = "There is an offer to buy at the same price which was submitted sooner. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,SellVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates contract information
															Transacted=Transacted+\TransactedVol;
															Status = if(Transacted==Volume-Invalidated,1,0);
															StatusTime = gettime() - \StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == ::Subject ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == :Offerer ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															    }
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.maximum(same(Market),AcceptanceID);
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestBid=Price;
															    BestAsk=if(offers.count(Status==0&Type==-1)>0,offers.minimum(Status==0&Type==-1,Price),\I);
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==4){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=3;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=6;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "BuyOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volumen";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Verkaufsvol.";
													variable = SellVol;
													format = "\\VolumePrecision";
													input = TRUE;
													showdefault = FALSE;
													emptyallowed = TRUE;
													min = \MinVol;
													max = \MaxVol;
													defaultvalue = 0;
												}
												button "Verkauf"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "Sie haben Ihr eigenes Gebot markiert. Sie knnen nicht von sich selbst kaufen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = SellVol>0;
														message = "Sie mssen angeben, wie viele Aktien Sie verkaufen wollen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = SellVol <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
														message = "Sie haben nicht gengend Aktien fr diese Transaktion!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price);
														message = "Es gibt ein Kaufgebot mit einem hheren Preis. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.maximum(Market==::DisplayMarket[1]&Status==0&Type==1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==1&Price==:Price,OfferTime);
														message = "Es gibt ein Kaufgebot mit dem gleichen Preis, das frher abgegeben wurde. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,SellVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates contract information
															Transacted=Transacted+\TransactedVol;
															Status = if(Transacted==Volume-Invalidated,1,0);
															StatusTime = gettime() - \StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == ::Subject ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == :Offerer ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															    }
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.maximum(same(Market),AcceptanceID);
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestBid=Price;
															    BestAsk=if(offers.count(Status==0&Type==-1)>0,offers.minimum(Status==0&Type==-1,Price),\I);
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==4){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=3;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=6;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
										}
									}
									containerbox "SellOffersContainer"{
										hasframe = TRUE;
										width = 179p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_SellOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "SellOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Sell orders\";2=\"Verkaufsgebote\">}";
												}
											}
											selectcontractbox "SellOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Volume";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Buy volume";
													variable = BuyVol;
													format = "\\VolumePrecision";
													input = TRUE;
													showdefault = FALSE;
													emptyallowed = TRUE;
													min = \MinVol;
													max = \MaxVol;
													defaultvalue = 0;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=5;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Buy"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "You have selected your own order. You cannot sell to yourself!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = BuyVol>0;
														message = "You have to state the number of assets you want to buy!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price*BuyVol <= :Cash+:ShortingCapacityCash;
														message = "You do not have enough cash to afford this trade!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price);
														message = "There is an offer to sell at a lower price. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1&Price==:Price,OfferTime);
														message = "There is an offer to sell at the same price which was submitted sooner. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,BuyVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates offer information
															Transacted=Transacted+\TransactedVol;
															Status=if(Transacted==Volume-Invalidated,1,0);
															StatusTime=gettime()-\StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == :Offerer ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == ::Subject ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															
															    }
															
															//Updates contracts table
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestAsk=Price;
															    BestBid=if(offers.count(Status==0&Type==1)>0,offers.maximum(Status==0&Type==1,Price),\I);
															
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==5){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=4;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "SellOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Volumen";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Kaufvol.";
													variable = BuyVol;
													format = "\\VolumePrecision";
													input = TRUE;
													showdefault = FALSE;
													emptyallowed = TRUE;
													min = \MinVol;
													max = \MaxVol;
													defaultvalue = 0;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=5;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Kauf"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "Sie haben Ihr eigenes Gebot markiert. Sie knnen nicht an sich selbst verkaufen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = BuyVol>0;
														message = "Sie mssen angeben, wie viele Aktien Sie kaufen wollen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price*BuyVol <= :Cash+:ShortingCapacityCash;
														message = "Sie haben nicht gengend Geld fr diese Transaktion!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price);
														message = "Es gibt ein Verkaufsgebot mit einem geringeren Preis. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1&Price==:Price,OfferTime);
														message = "Es gibt ein Verkaufsgebot mit dem gleichen Preis, das frher abgegeben wurde. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,BuyVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates offer information
															Transacted=Transacted+\TransactedVol;
															Status=if(Transacted==Volume-Invalidated,1,0);
															StatusTime=gettime()-\StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == :Offerer ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == ::Subject ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															
															    }
															
															//Updates contracts table
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestAsk=Price;
															    BestBid=if(offers.count(Status==0&Type==1)>0,offers.maximum(Status==0&Type==1,Price),\I);
															
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==5){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=4;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
											}
											selectcontractbox "SellOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												button "Cancel"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "You have selected an order from another trader. You can only cancel your own orders!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=5;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Buy"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "You have selected your own order. You cannot sell to yourself!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price <= :Cash+:ShortingCapacityCash;
														message = "You do not have enough cash to afford this trade!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Somebody else was faster!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price);
														message = "There is an offer to sell at a lower price. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1&Price==:Price,OfferTime);
														message = "There is an offer to sell at the same price which was submitted sooner. Please always select the best order to trade.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Sets volume
															
															BuyVol=1;
															
														}
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,BuyVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates offer information
															Transacted=Transacted+\TransactedVol;
															Status=if(Transacted==Volume-Invalidated,1,0);
															StatusTime=gettime()-\StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == :Offerer ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == ::Subject ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															
															    }
															
															//Updates contracts table
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestAsk=Price;
															    BestBid=if(offers.count(Status==0&Type==1)>0,offers.maximum(Status==0&Type==1,Price),\I);
															
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==5){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=4;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
											selectcontractbox "SellOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==:DisplayMarket[1] & (\OrderBookDepth[:DisplayMarket[1]]<0|OrderBookRank<=\OrderBookDepth[:DisplayMarket[1]]|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												button "Stornieren"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer == :Subject;
														message = "Sie haben das Gebot eines anderen Marktteilnehmers markiert. Sie knnen nur Ihre eigenen Gebote stornieren!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Processes cancellation
															
															//Marks offer as cancelled
															Status = 2;
															StatusTime = gettime() - \StartTime;
															
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\I;
															    Status=:Status;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=:ID;
															    TransactionID=\I;
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=\I;
															    Phase=2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==3){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=5;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
														}
													}
												}
												button "Kauf"{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 5921535;
													checker{
														condition = Offerer != :Subject;
														message = "Sie haben Ihr eigenes Gebot markiert. Sie knnen nicht an sich selbst verkaufen!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price <= :Cash+:ShortingCapacityCash;
														message = "Sie haben nicht gengend Geld fr diese Transaktion!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Status==0;
														message = "Jemand anderes war schneller!";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price);
														message = "Es gibt ein Verkaufsgebot mit einem geringeren Preis. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													checker{
														condition = Price==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1,Price)&OfferTime==offers.minimum(Market==::DisplayMarket[1]&Status==0&Type==-1&Price==:Price,OfferTime);
														message = "Es gibt ein Verkaufsgebot mit dem gleichen Preis, das frher abgegeben wurde. Bitte whlen Sie immer das beste Gebot zum Handel aus.";
														yesButtonStr = "";
														noButtonStr = "OK";
													}
													program{
														table = offers;
														do{
															//Sets volume
															
															BuyVol=1;
															
														}
													}
													program{
														table = offers;
														do{
															//Processes trade
															
															//Saves transacted volume in temporary variable
															\TransactedVol=min(Volume-Transacted-Invalidated,BuyVol);
															
															//Creates new transaction
															transactions.new{
															    Period=\Period;
															    Market=:Market;
															    Price=:Price;
															    Volume=\TransactedVol;
															    OfferID=:ID;
															    AcceptanceID=transactions.count(same(Market));
															    AccepterID=::Subject;
															    Time=gettime()-\StartTime;
															    Phase=2;
															    }
															
															//Updates offer information
															Transacted=Transacted+\TransactedVol;
															Status=if(Transacted==Volume-Invalidated,1,0);
															StatusTime=gettime()-\StartTime;
															
															//Updates cash and share holdings
															subjects.do {
															
															    //Updates seller
															    if ( Subject == :Offerer ) {
															        Cash = Cash + :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] - \TransactedVol;
															        }
															
															    //Updates buyer
															    if ( Subject == ::Subject ) {
															        Cash = Cash - :Price * \TransactedVol;
															        Assets[:Market] = Assets[:Market] + \TransactedVol;
															        }
															
															    }
															
															//Updates contracts table
															//Generates contracts table record
															contracts.new{
															    Period=\Period;
															    Market=:Market;
															    ID=contracts.count(same(Market));
															    Price=:Price;
															    Volume=:Volume;
															    Transacted=:Transacted;
															    Invalidated=:Invalidated;
															    VolumeTraded=\TransactedVol;
															    Status=1;
															    Type=:Type;
															    OfferTime=:OfferTime;
															    OfferID=\I;
															    TransactionID=transactions.count(same(Market));
															    Time=:StatusTime;
															    Offerer=:Offerer;
															    Accepter=::Subject;
															    Phase=2;
															    BestAsk=Price;
															    BestBid=if(offers.count(Status==0&Type==1)>0,offers.maximum(Status==0&Type==1,Price),\I);
															
															    }
															
															//Price highlighting
															if(\LastPrice[Market]>\I){
															    if(\PriceHighlightScheme==1){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],18,if(Price<\LastPrice[Market],19,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.5;
															        }
															    elsif(\PriceHighlightScheme==2){
															        \PriceHighlightColor[Market]=if(Price>\LastPrice[Market],20,if(Price<\LastPrice[Market],21,1));
															        \PriceHighlightTime[Market]=gettime()+\PriceHighlightDuration-0.1;
															        }
															    }
															
															//Updates marketsummary
															marketsummary.do{
															    if(same(Market)){
															        Price=:Price;
															        Volume=Volume+:Volume;
															        }
															    }
															
															//Updates last price
															\LastPrice[Market]=Price;
															
														}
													}
													program{
														table = subjects;
														ownervariable = Subject;
														do{
															//Invalidates illegal offers
															
															//Loops over all offers
															offers.do {
															
															    //Looks only at outstanding offers
															    if ( Status == 0 ) {
															
															        //Only buy offers
															        if ( Type == 1 ) {
															
															            //Invalidates buy offers if proposer has insufficient money
															            if ( Price * (Volume-Transacted-Invalidated) > subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash ) ) {
															                if (PartialInvalidation[Market]==1&rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1)>0) {
															                    Invalidated=Volume-Transacted-rounddown(subjects.find ( Subject == :Offerer , Cash+ShortingCapacityCash)/Price,1);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															
															        //Only sell offers
															        if ( Type == -1 ) {
															            //Invalidates sell offers if proposer has insufficient shares
															            if ( Volume-Transacted-Invalidated > subjects.find ( Subject == :Offerer , Assets[:Market]+ShortingCapacityAssets[:Market] ) ) {
															                if (PartialInvalidation[Market]==1&subjects.find ( Subject == :Offerer, Assets[:Market]+ShortingCapacityAssets[:Market])>0) {
															                    Invalidated=Volume-Transacted-subjects.find ( Subject == :Offerer,Assets[:Market]+ShortingCapacityAssets[:Market]);
															                    }
															                    else {
															                        Status = 3;
															                        StatusTime = gettime() - \StartTime;
															
															                        //Generates contracts table record
															                        contracts.new{
															                            Period=\Period;
															                            ID=contracts.count(same(Market));
															                            Market=:Market;
															                            Price=:Price;
															                            Volume=:Volume;
															                            Transacted=:Transacted;
															                            Invalidated=:Invalidated;
															                            VolumeTraded=\I;
															                            Status=:Status;
															                            Type=:Type;
															                            OfferTime=:OfferTime;
															                            OfferID=:ID;
															                            TransactionID=\I;
															                            Time=:StatusTime;
															                            Offerer=:Offerer;
															                            Accepter=\I;
															                            Phase=2;
															                            }
															                        }
															                }
															            }
															        }
															    }
															
														}
													}
													program{
														table = offers;
														condition = \EmptyBookAfterTrade[:DisplayMarket[1]]==1;
														do{
															//Empties book after trade, if option is set
															
															//Looks only at outstanding offers
															if ( Status == 0 ) {
															
															    Invalidated=Volume-Transacted;
															    Status = 3;
															    StatusTime = gettime() - \StartTime;
															
															    //Generates contracts table record
															    contracts.new{
															        Period=\Period;
															        ID=maximum(same(Market),ID)+1;
															        Market=:Market;
															        Price=:Price;
															        Volume=:Volume;
															        Transacted=:Transacted;
															        Invalidated=:Invalidated;
															        VolumeTraded=\I;
															        Status=:Status;
															        Type=:Type;
															        OfferTime=:OfferTime;
															        OfferID=:ID;
															        TransactionID=\I;
															        Time=:StatusTime;
															        Offerer=:Offerer;
															        Accepter=\I;
															        Phase=2;
															        }
															    }
															
														}
													}
													program{
														table = globals;
														condition = \ShowChart==1;
														do{
															//Updates chart display
															
															for(Market,\NumMarkets){
															    MaxPrice=contracts.maximum(Status==1&Market==:Market&Phase==2,Price);
															    \ChartYLabelDistance[Market]=if(MaxPrice<=20,2,1);
															    \ChartYLabelDistance[Market]=if(MaxPrice>20,5,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>50,20,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>300,50,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>600,100,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>1250,250,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>5000,1000,\ChartYLabelDistance[Market]);
															    \ChartYLabelDistance[Market]=if(MaxPrice>15000,5000,\ChartYLabelDistance[Market]);
															    \ChartYMax[Market]=max(\ChartYMax[Market],roundup(MaxPrice*(1+\SpaceAboveMaxPrice),\ChartYLabelDistance[Market]));
															    \ChartYTickDistance[Market]=\ChartYLabelDistance[Market]/2;
															    }
															
														}
													}
													program{
														table = globals;
														do{
															//Updates OrderBookRank and PriceListRank
															
															offers.do{
															    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
															    }
															
															contracts.do{
															    PriceListRank=contracts.count(same(Market)&ID>=:ID);
															    }
															
														}
													}
													program{
														table = subjects;
														do{
															//Updates practicetasks
															
															practicetasks.do{
															    if(same(Subject)&ID==5){Done=1;}
															    }
															
														}
													}
													program{
														table = offers;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=4;
															    Data[1]=:ID;
															    Data[2]=:Market;
															    }
															
															
															
														}
													}
												}
											}
										}
									}
									containerbox "OrderSubmissionContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_OrderSubmission_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "OrderSubmission"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Order submission\";2=\"Gebotsabgabe\">}";
												}
											}
											containerbox "ContractMaker"{
												hasframe = FALSE;
												height = 100p;
												bottom = 0p;
												cutbottom = TRUE;
												makecontractbox "SingleUnitEN"{
													hasframe = FALSE;
													bottom = 0p;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
													table = offers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Price";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "  Submit sell order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price > offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price);
															message = "The price of a new sell order must be higher than the highest outstanding buy order price. If you really want to sell for this price, click \"Sell\" instead!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "A new sell order price must be smaller than or equal to the lowest existing sell order price!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==-1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>You cannot have more than <\\SpamControl|1> ask(s) outstanding at any time. Please cancel an existing ask before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID) + 1;
																Volume=1;
																Transacted=0;
																Invalidated=0;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==2){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=7;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "  Submit buy order  "{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= :Cash+:ShortingCapacityCash;
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price < offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price);
															message = "The price of a new buy order must be lower than the price of the cheapest outstanding sell order. If you really want to buy for this price, click \"Buy\" instead!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price >= offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "A new buy order price must be greater than or equal to the highest existing buy order price!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>You cannot have more than <\\SpamControl|1> bid(s) outstanding at any time. Please cancel an existing bid before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum(same(Market),ID) + 1;
																Volume=1;
																Transacted=0;
																Invalidated=0;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==1){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=8;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "SingleUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
													table = offers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Preis";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "Verkaufsgebot"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = 0 < :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price > offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als jener des hchsten ausstehenden Kaufgebots sein. Wenn Sie wirklich zu diesem Preis verkaufen wollen, klicken Sie stattdessen \"Verkauf\"!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "Der Preis eines neuen Verkaufsgebots darf nicht hher als jener des gnstigsten bereits bestehenden Verkaufsgebots sein!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==-1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>Sie knnen zu keinem Zeitpunkt mehr als <\\SpamControl|1> Verkaufsgebot(e) gleichzeitig ausstehend haben. Bitte stornieren Sie eines Ihrer bestehenden Verkaufsgebote, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID) + 1;
																Volume=1;
																Transacted=0;
																Invalidated=0;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==2){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=7;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Kaufgebot"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= :Cash+:ShortingCapacityCash;
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price < offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der Preis des gnstigsten ausstehenden Verkaufsgebots sein. Wenn Sie wirklich zu diesem Preis kaufen wollen, klicken Sie stattdessen \"Kauf\"!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price >= offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "Der Preis eines neuen Kaufgebots darf nicht geringer als jener des hchsten bereits bestehenden Kaufgebots sein!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>Sie knnen zu keinem Zeitpunkt mehr als <\\SpamControl|1> Kaufgebot(e) gleichzeitig ausstehend haben. Bitte stornieren Sie eines Ihrer bestehenden Kaufgebote, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum(same(Market),ID) + 1;
																Volume=1;
																Transacted=0;
																Invalidated=0;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==1){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=8;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "MultipleUnitEN"{
													hasframe = FALSE;
													displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
													table = offers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volume";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Price per unit";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "Submit sell order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
															message = "You do not have enough assets to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price > offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price);
															message = "The price of a new sell order must be higher than the highest outstanding buy order price. If you really want to sell for this price, click \"Sell\" instead!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "A new sell order price must be smaller than or equal to the lowest existing sell order price!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==-1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>You cannot have more than <\\SpamControl|1> ask(s) outstanding at any time. Please cancel an existing ask before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																Invalidated=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																Test= offers.maximum (same(Market)&Type == 1 & Status == 0, Price);
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==2){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=7;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Submit buy order"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "You must enter a price greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "You must enter a volume greater than zero!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= :Cash+:ShortingCapacityCash;
															message = "You do not have enough cash to submit this order!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price < offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price);
															message = "The price of a new buy order must be lower than the price of the cheapest outstanding sell order. If you really want to buy for this price, click \"Buy\" instead!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price >= offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "A new buy order price must be greater than or equal to the highest existing buy order price!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>You cannot have more than <\\SpamControl|1> bid(s) outstanding at any time. Please cancel an existing bid before submitting a new one.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID ) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																Invalidated=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==1){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=8;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
												makecontractbox "MultipleUnitDE"{
													hasframe = FALSE;
													displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
													table = offers;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													numrecords = 1;
													tablelayout = VERTICAL;
													item{
														label = "Volumen";
														variable = Volume;
														format = "\\VolumePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinVol;
														max = \MaxVol;
													}
													item{
														label = "Preis pro Stck";
														variable = Price;
														format = "\\PricePrecision";
														input = TRUE;
														showdefault = FALSE;
														emptyallowed = TRUE;
														min = \MinPrice;
														max = \MaxPrice;
													}
													button "Verkaufsgebot"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume <= :Assets[:DisplayMarket[1]]+:ShortingCapacityAssets[:DisplayMarket[1]];
															message = "Sie haben nicht gengend Aktien, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price > offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price);
															message = "Der Preis eines neuen Verkaufsgebots muss hher als jener des hchsten ausstehenden Kaufgebots sein. Wenn Sie wirklich zu diesem Preis verkaufen wollen, klicken Sie stattdessen \"Verkauf\"!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price <= offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "Der Preis eines neuen Verkaufsgebots darf nicht hher als jener des gnstigsten bereits bestehenden Verkaufsgebots sein!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==-1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>Sie knnen zu keinem Zeitpunkt mehr als <\\SpamControl|1> Verkaufsgebot(e) gleichzeitig ausstehend haben. Bitte stornieren Sie eines Ihrer bestehenden Verkaufsgebote, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID) + 1;
																Offerer = :Subject;
																Type = -1;
																Status = 0;
																Transacted=0;
																Invalidated=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																Test= offers.maximum (same(Market)&Type == 1 & Status == 0, Price);
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==2){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=7;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
													button "Kaufgebot"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = FALSE;
														buttoncolor = 0;
														checker{
															condition = Price!=0;
															message = "Sie mssen einen greren Preis als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Volume!=0;
															message = "Sie mssen einen greres Volumen als Null eingeben!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price * Volume <= :Cash+:ShortingCapacityCash;
															message = "Sie haben nicht gengend Geld, um dieses Gebot abgeben zu knnen!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price < offers.minimum (Market==::DisplayMarket[1]&Type == -1 & Status == 0, Price);
															message = "Der Preis eines neuen Kaufgebots muss geringer als der Preis des gnstigsten ausstehenden Verkaufsgebots sein. Wenn Sie wirklich zu diesem Preis kaufen wollen, klicken Sie stattdessen \"Kauf\"!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = Price >= offers.maximum (Market==::DisplayMarket[1]&Type == 1 & Status == 0, Price) | OfferImprovementRule[:DisplayMarket[1]]==0;
															message = "Der Preis eines neuen Kaufgebots darf nicht geringer als jener des hchsten bereits bestehenden Kaufgebots sein!";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														checker{
															condition = (\SpamControl>0&offers.count(Market==::DisplayMarket[1]&Type==1&Status==0&Offerer==::Subject)<\SpamControl)|\SpamControl<=0;
															message = "<>Sie knnen zu keinem Zeitpunkt mehr als <\\SpamControl|1> Kaufgebot(e) gleichzeitig ausstehend haben. Bitte stornieren Sie eines Ihrer bestehenden Kaufgebote, bevor Sie ein neues abgeben.";
															yesButtonStr = "";
															noButtonStr = "OK";
														}
														program{
															table = offers;
															do{
																//Creates offer
																
																Market=:DisplayMarket[1];
																Period=\Period;
																ID = offers.maximum (same(Market),ID ) + 1;
																Offerer = :Subject;
																Type = 1;
																Status = 0;
																Transacted=0;
																Invalidated=0;
																OfferTime = gettime() - \StartTime;
																StatusTime = \I;
																
															}
														}
														program{
															table = globals;
															do{
																//Updates OrderBookRank
																
																offers.do{
																    OrderBookRank=if(Status==0,offers.count(same(Market)&same(Type)&Status==0&(Type*Price>Type*:Price|(Price==:Price&OfferTime<:OfferTime)))+1,\I);
																    }
																
															}
														}
														program{
															table = subjects;
															do{
																//Updates practicetasks
																
																practicetasks.do{
																    if(same(Subject)&ID==1){Done=1;}
																    }
																
															}
														}
														program{
															table = offers;
															do{
																//Timelog
																
																timelog.new
																    {
																    ID=timelog.maximum(ID)+1;
																    Time=gettime()-\StartTime;
																    Period=\Period;
																    Subject=:Offerer;
																    Event=8;
																    Data[1]=:ID;
																    Data[2]=:Market;
																    }
																
															}
														}
													}
												}
											}
											standardbox "SummaryInformationSingleMarket"{
												hasframe = TRUE;
												bottom = 0p;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
													variable = Cash;
													format = "<>!text: 1=\"<|0.01>\";";
													input = FALSE;
												}
												item{
													label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
													variable = Assets[DisplayMarket[1]];
													format = "<>!text: 1=\"<|1>\";";
													input = FALSE;
												}
												item{
													label = "<><\\Language|!text: 1=\"Last price:\";2=\"Letzter Preis:\";>";
													variable = \LastPrice[DisplayMarket[1]];
													format = "<>!text: \\I-1=\"\r\n{\\rtf {\\colortbl;\\red0\\green0\\blue0;\\red0\\green160\\blue0;\\red255\\green0\\blue0;\\red247\\green150\\blue70;\\red0\\green0\\blue255;}\r\n\\cf<\\PriceHighlightColor[DisplayMarket[1]]|1> <\\LastPrice[DisplayMarket[1]]|\\PricePrecision>}\"; \\I=\"<\\Language|!text: 1=\"No trade\";2=\"Kein Handel\";>\"; \\I+1=\"{\\rtf {\\colortbl;\\red0\\green0\\blue0;\\red0\\green160\\blue0;\\red255\\green0\\blue0;\\red247\\green150\\blue70;\\red0\\green0\\blue255;}\r\n\\cf<\\PriceHighlightColor[DisplayMarket[1]]|1> <\\LastPrice[DisplayMarket[1]]|\\PricePrecision>}\";";
													input = FALSE;
												}
											}
											standardbox "SummaryInformationMultiMarket"{
												hasframe = TRUE;
												bottom = 0p;
												displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Market:\";2=\"Markt:\";>}";
													variable = DisplayMarket[1];
													format = "<>!text: 1=\"{\\rtf \\fs18 \\qc \\b <|1>}\";";
													input = FALSE;
												}
												item{
													label = "<><\\Language|!text: 1=\"Cash:\";2=\"Geld:\";>";
													variable = Cash;
													format = "<>!text: 1=\"<|0.01>\";";
													input = FALSE;
												}
												item{
													label = "<><\\Language|!text: 1=\"Assets:\";2=\"Aktien:\";>";
													variable = Assets[DisplayMarket[1]];
													format = "<>!text: 1=\"<|1>\";";
													input = FALSE;
												}
												item{
													label = "<><\\Language|!text: 1=\"Last price:\";2=\"Letzter Preis:\";>";
													variable = \LastPrice[DisplayMarket[1]];
													format = "<>!text: \\I-1=\"\r\n{\\rtf {\\colortbl;\\red0\\green0\\blue0;\\red0\\green160\\blue0;\\red255\\green0\\blue0;\\red247\\green150\\blue70;\\red0\\green0\\blue255;}\r\n\\cf<\\PriceHighlightColor[DisplayMarket[1]]|1> <\\LastPrice[DisplayMarket[1]]|\\PricePrecision>}\"; \\I=\"<\\Language|!text: 1=\"No trade\";2=\"Kein Handel\";>\"; \\I+1=\"{\\rtf {\\colortbl;\\red0\\green0\\blue0;\\red0\\green160\\blue0;\\red255\\green0\\blue0;\\red247\\green150\\blue70;\\red0\\green0\\blue255;}\r\n\\cf<\\PriceHighlightColor[DisplayMarket[1]]|1> <\\LastPrice[DisplayMarket[1]]|\\PricePrecision>}\";";
													input = FALSE;
												}
											}
										}
									}
								}
								containerbox "TopContainer"{
									hasframe = FALSE;
									containerbox "PriceListContainer"{
										hasframe = TRUE;
										width = 150p;
										left = 0p;
										top = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_PriceList_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "PriceList"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											selectcontractbox "PricelistEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\ShowPricelist==1;
												table = contracts;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Status==1 & Market==:DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1)  & PriceListRank<=\PriceListDepth[:DisplayMarket[1]];
												sortfields = "-ID";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Trade prices";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "PricelistDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\ShowPricelist==1;
												table = contracts;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Status==1 & Market==:DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1) & PriceListRank<=\PriceListDepth[:DisplayMarket[1]];
												sortfields = "-ID";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Transaktionspreise";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
										}
									}
									containerbox "SignalsContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_Signals_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "Signals"{
											hasframe = FALSE;
											displaycondition = \PracticePeriod==0|\PracticeTasks==0;
											selectcontractbox "SignalsEN"{
												hasframe = FALSE;
												left = 5p;
												right = 5p;
												top = 5p;
												bottom = 5p;
												displaycondition = \ContinuousDoubleAuctionSignals==1&\Language==1;
												table = signals;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = same(Period)&Set==:Subject&Market==:DisplayMarket[1];
												sortfields = "Type";
												tablelayout = LIST;
												scrollatstart = FALSE;
												scrollatEnd = TRUE;
												selectbest = TRUE;
												item{
													label = "Signals";
													variable = Signal;
													format = "\\SignalPrecision";
													input = FALSE;
												}
											}
											selectcontractbox "SignalsDE"{
												hasframe = FALSE;
												left = 5p;
												right = 5p;
												top = 5p;
												bottom = 5p;
												displaycondition = \ContinuousDoubleAuctionSignals==1&Language==2;
												table = signals;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = same(Period)&Set==:Subject&Market==:DisplayMarket[1];
												sortfields = "Type";
												tablelayout = LIST;
												scrollatstart = FALSE;
												scrollatEnd = TRUE;
												selectbest = TRUE;
												item{
													label = "Signale";
													variable = Signal;
													format = "\\SignalPrecision";
													input = FALSE;
												}
											}
										}
										containerbox "PracticeTasks"{
											hasframe = FALSE;
											displaycondition = PracticePeriod==1&PracticeTasks==1;
											containerbox "Open"{
												hasframe = FALSE;
												height = 50%;
												top = 0p;
												cuttop = TRUE;
												standardbox "Heading"{
													hasframe = FALSE;
													height = 23p;
													top = 5p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Suggested training - Open\";2=\"bungsvorschlge - Offen\">}";
													}
												}
												selectcontractbox "PracticeTasks"{
													hasframe = TRUE;
													table = practicetasks;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = same(Subject)&Done==0;
													sortfields = "";
													tablelayout = LIST;
													scrollatstart = FALSE;
													scrollatEnd = TRUE;
													selectbest = TRUE;
													item{
														variable = Text;
														format = "-1";
														input = FALSE;
													}
												}
											}
											containerbox "Completed"{
												hasframe = FALSE;
												standardbox "Heading"{
													hasframe = FALSE;
													height = 23p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													item{
														label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Suggested training - Completed\";2=\"bungsvorschlge - Abgeschlossen\">}";
													}
												}
												selectcontractbox "PracticeTasks"{
													hasframe = TRUE;
													table = practicetasks;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													emptyallowed = FALSE;
													allemptyallowed = FALSE;
													condition = same(Subject)&Done==1;
													sortfields = "";
													tablelayout = LIST;
													scrollatstart = FALSE;
													scrollatEnd = TRUE;
													selectbest = TRUE;
													item{
														variable = Text;
														format = "-1";
														input = FALSE;
													}
												}
											}
										}
									}
									containerbox "MarketOverview"{
										hasframe = TRUE;
										displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_MarketOverview_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "MarketButtons"{
											hasframe = FALSE;
											width = 74p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											cutright = TRUE;
											containerbox "DE"{
												hasframe = FALSE;
												displaycondition = \Language==2;
												standardbox "Button1"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 1"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=1;
																
															}
														}
													}
												}
												standardbox "Button2"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 2"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=2;
																
															}
														}
													}
												}
												standardbox "Button3"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>2;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 3"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=3;
																
															}
														}
													}
												}
												standardbox "Button4"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>=4;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 4"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=4;
																
															}
														}
													}
												}
												standardbox "Button5"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets==5;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 5"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=5;
																
															}
														}
													}
												}
											}
											containerbox "EN"{
												hasframe = FALSE;
												displaycondition = \Language==1;
												standardbox "Button1"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 1"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=1;
																
															}
														}
													}
												}
												standardbox "Button2"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 2"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=2;
																
															}
														}
													}
												}
												standardbox "Button3"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>2;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 3"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=3;
																
															}
														}
													}
												}
												standardbox "Button4"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>=4;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 4"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=4;
																
															}
														}
													}
												}
												standardbox "Button5"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets==5;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 5"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=5;
																
															}
														}
													}
												}
											}
										}
										plotbox "Highlighting"{
											hasframe = FALSE;
											width = 13p;
											height = 77p;
											left = 5p;
											top = 27p;
											cutleft = TRUE;
											bgcolor = layout.find(ID=="CDA_MarketOverview_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = 0;
											xright = 100;
											ybottom = 0;
											ytop = 100;
											plotrect "Market1"{
												x = 50;
												y = 93;
												width = 100;
												height = 15;
												fillcolor = layout.find(IDNumeric==\PriceHighlightColor[1],Color);
											}
											plotrect "Market2"{
												x = 50;
												y = 72;
												width = 100;
												height = 15;
												fillcolor = layout.find(IDNumeric==\PriceHighlightColor[2],Color);
											}
											plotrect "Market3"{
												displaycondition = \NumMarkets>=3;
												x = 50;
												y = 51;
												width = 100;
												height = 15;
												fillcolor = layout.find(IDNumeric==\PriceHighlightColor[3],Color);
											}
											plotrect "Market4"{
												displaycondition = \NumMarkets>=4;
												x = 50;
												y = 30;
												width = 100;
												height = 15;
												fillcolor = layout.find(IDNumeric==\PriceHighlightColor[4],Color);
											}
											plotrect "Market5"{
												displaycondition = \NumMarkets>=5;
												x = 50;
												y = 9;
												width = 100;
												height = 15;
												fillcolor = layout.find(IDNumeric==\PriceHighlightColor[5],Color);
											}
										}
										selectcontractbox "MarketOverviewEN"{
											hasframe = TRUE;
											top = 5p;
											bottom = 5p;
											displaycondition = \Language==1;
											table = marketsummary;
											buttonposition = BOTTOMRIGHT;
											buttonsequence = HORIZONTAL;
											emptyallowed = FALSE;
											allemptyallowed = FALSE;
											condition = TRUE;
											sortfields = "";
											tablelayout = LIST;
											scrollatstart = FALSE;
											scrollatEnd = TRUE;
											selectbest = TRUE;
											item{
												label = "Market";
												variable = Market;
												format = "1";
												input = FALSE;
											}
											item{
												label = "Price";
												variable = Price;
												format = "<>!text:\\I-0.0001=\"<|0.01>\";\\I=\"-\";\\I+0.0001=\"<|0.01>\";";
												input = FALSE;
											}
											item{
												label = "Assets";
												variable = :Assets[Market];
												format = "\\AssetPrecision";
												input = FALSE;
											}
										}
										selectcontractbox "MarketOverviewDE"{
											hasframe = TRUE;
											top = 5p;
											bottom = 5p;
											displaycondition = \Language==2;
											table = marketsummary;
											buttonposition = BOTTOMRIGHT;
											buttonsequence = HORIZONTAL;
											emptyallowed = FALSE;
											allemptyallowed = FALSE;
											condition = TRUE;
											sortfields = "";
											tablelayout = LIST;
											scrollatstart = FALSE;
											scrollatEnd = TRUE;
											selectbest = TRUE;
											item{
												label = "Markt";
												variable = Market;
												format = "1";
												input = FALSE;
											}
											item{
												label = "Preis";
												variable = Price;
												format = "<>!text:\\I-0.0001=\"<|0.01>\";\\I=\"-\";\\I+0.0001=\"<|0.01>\";";
												input = FALSE;
											}
											item{
												label = "Aktien";
												variable = :Assets[Market];
												format = "\\AssetPrecision";
												input = FALSE;
											}
										}
									}
								}
							}
						}
					}
					containerbox "ChartContainer"{
						hasframe = TRUE;
						plotbox "Background"{
							hasframe = TRUE;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -100;
							xright = 100;
							ybottom = -100;
							ytop = 100;
						}
						standardbox "PreChartBox"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]==\I;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "<>{\\rtf \\qc <\\Language|!text: 1=\"No transactions to display.\";2=\"Bisher keine Transaktionen\">}";
							}
						}
						standardbox "Heading"{
							hasframe = FALSE;
							height = 70p;
							top = 0p;
							cuttop = TRUE;
							displaycondition = \NumMarkets>1&\ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = DisplayMarket[1];
								format = "<>!text: 1=\"{\\rtf \\fs26 \\qc \\b <\\Language|!text:1=\"Market\";2=\"Markt\"> <|1>}\";";
								input = FALSE;
							}
						}
						plotbox "ChartEN"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I&\Language==1;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -\ChartXLabelDistance[DisplayMarket[1]];
							xright = \ChartXMax[DisplayMarket[1]]+\ChartXTickDistance[DisplayMarket[1]];
							ybottom = -\ChartYTickDistance[DisplayMarket[1]]*2;
							ytop = \ChartYMax[DisplayMarket[1]]+\ChartYTickDistance[DisplayMarket[1]];
							plotgraph "p"{
								table = contracts;
								condition = Market==:DisplayMarket[1]&Status==1&Phase==2;
								sorting = Time;
								connectioncolor = layout.find(ID=="CDA_Chart_Line",Color);
								connectionwidth = 2;
								filltoxaxis = FALSE;
								connecttopreviouspoint = TRUE;
								plotpoint "Prices"{
									x = Time-(\StartTimeCDA-\StartTime);
									y = Price;
									isstar = FALSE;
									size = 2;
									numedges = 10;
									startat = 0;
									linecolor = layout.find(ID=="CDA_Chart_Line",Color);
									linewidth = 2;
								}
							}
							plotaxis "Time"{
								axis = X;
								position = 0;
								from = 0;
								to = \ChartXMax[DisplayMarket[1]];
								tickdistance = \ChartXTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartXLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								caption = "Time in secs.";
							}
							plotaxis "Price"{
								axis = Y;
								position = 0;
								from = 0;
								to = \ChartYMax[DisplayMarket[1]];
								tickdistance = \ChartYTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartYLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								linecolor = rgb(0.00,0.00,0.00);
							}
						}
						plotbox "ChartDE"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I&\Language==2;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -\ChartXLabelDistance[DisplayMarket[1]];
							xright = \ChartXMax[DisplayMarket[1]]+\ChartXTickDistance[DisplayMarket[1]];
							ybottom = -\ChartYTickDistance[DisplayMarket[1]]*2;
							ytop = \ChartYMax[DisplayMarket[1]]+\ChartYTickDistance[DisplayMarket[1]];
							plotgraph "p"{
								table = contracts;
								condition = Market==:DisplayMarket[1]&Status==1&Phase==2;
								sorting = Time;
								connectioncolor = layout.find(ID=="CDA_Chart_Line",Color);
								connectionwidth = 2;
								filltoxaxis = FALSE;
								connecttopreviouspoint = TRUE;
								plotpoint "Prices"{
									x = Time-(\StartTimeCDA-\StartTime);
									y = Price;
									isstar = FALSE;
									size = 2;
									numedges = 10;
									startat = 0;
									linecolor = layout.find(ID=="CDA_Chart_Line",Color);
									linewidth = 2;
								}
							}
							plotaxis "Time"{
								axis = X;
								position = 0;
								from = 0;
								to = \ChartXMax[DisplayMarket[1]];
								tickdistance = \ChartXTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartXLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								caption = "Zeit in Sek.";
							}
							plotaxis "Price"{
								axis = Y;
								position = 0;
								from = 0;
								to = \ChartYMax[DisplayMarket[1]];
								tickdistance = \ChartYTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartYLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								linecolor = rgb(0.00,0.00,0.00);
							}
						}
					}
				}
			}
			containerbox "Experimenter"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==1;
				containerbox "EarlyEndingVote"{
					hasframe = FALSE;
					width = 300p;
					height = 42p;
					left = 0p;
					bottom = -5p;
					displaycondition = \EarlyEndingVote==1;
					standardbox "Text"{
						hasframe = FALSE;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"Early ending votes: <subjects.count(EarlyEndingVote==1)|1>/<\\NumSubjects|1>.\"; 2=\"Stimmen fr frhzeitiges Ende: <subjects.count(EarlyEndingVote==1)|1>/<\\NumSubjects|1>.\"";
							input = FALSE;
						}
					}
				}
				containerbox "Market1"{
					hasframe = TRUE;
					right = 0p;
					top = 0p;
					bottom = 37p;
					cuttop = TRUE;
					displaycondition = NumMarkets>=1;
					containerbox "MarketContainer"{
						hasframe = TRUE;
						width = 617p;
						right = 0p;
						top = 0p;
						cutright = TRUE;
						plotbox "Background"{
							hasframe = TRUE;
							bgcolor = layout.find(ID=="CDA_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -100;
							xright = 100;
							ybottom = -100;
							ytop = 100;
						}
						containerbox "Market"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							containerbox "HistoryContainer"{
								hasframe = TRUE;
								height = 180p;
								bottom = 0p;
								cutbottom = TRUE;
								plotbox "Background"{
									hasframe = TRUE;
									bgcolor = layout.find(ID=="CDA_History_BG",Color);
									maintainaspectratio = FALSE;
									xaxistype = LINEAR;
									yaxistype = LINEAR;
									xleft = -100;
									xright = 100;
									ybottom = -100;
									ytop = 100;
								}
								containerbox "History"{
									hasframe = FALSE;
									left = 5p;
									right = 5p;
									top = 5p;
									bottom = 5p;
									containerbox "Buttons"{
										hasframe = FALSE;
										width = 140p;
										height = 148p;
										right = 0p;
										top = 0p;
										cutright = TRUE;
										containerbox "ButtonsEN"{
											hasframe = FALSE;
											displaycondition = \Language==1;
											standardbox "DisplayModeSwitches Traded"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Cancelled"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==2;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Invalidated"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==3;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches All"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==-1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button "   Invalidated orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Cancelled orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   Traded orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button "   All orders   "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
											}
										}
										containerbox "ButtonsDE"{
											hasframe = FALSE;
											displaycondition = \Language==2;
											standardbox "DisplayModeSwitches Traded"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Cancelled"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==2;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches Invalidated"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==3;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
											standardbox "DisplayModeSwitches All"{
												hasframe = FALSE;
												displaycondition = DisplayStatus==-1;
												buttonposition = BOTTOMMIDDLE;
												buttonsequence = HORIZONTAL;
												button " Gelschte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=3;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=9;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Stornierte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=2;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=10;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Gehandelte Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 13158600;
													program{
														table = subjects;
														do{
															DisplayStatus=1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=11;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
												button " Alle Gebote "{
													clearinputafterok = FALSE;
													norecordmadeorselected = FALSE;
													terminatestage = FALSE;
													donotterminatestage = TRUE;
													specialbuttoncolor = TRUE;
													buttoncolor = 59115;
													program{
														table = subjects;
														do{
															DisplayStatus=-1;
															
															
															
														}
													}
													program{
														table = subjects;
														do{
															//Timelog
															
															timelog.new
															    {
															    ID=timelog.maximum(ID)+1;
															    Time=gettime()-\StartTime;
															    Period=\Period;
															    Subject=:Subject;
															    Event=12;
															    Data[1]=:DisplayMarket[1];
															    }
															
															
															
														}
													}
												}
											}
										}
									}
									selectcontractbox "HistoryListEN"{
										hasframe = TRUE;
										displaycondition = \Language==1;
										table = contracts;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = (Status == :DisplayStatus | ( :DisplayStatus==-1 & Status!=0) ) & (Offerer==:Subject | Accepter==:Subject) & Market==DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
										sortfields = "-Time";
										tablelayout = LIST;
										scrollatstart = TRUE;
										scrollatEnd = FALSE;
										selectbest = FALSE;
										item{
											label = "Type";
											variable = Status;
											format = "<>!text: 1=\"        Trade         \"; 2=\"Cancelled\"; 3=\"Invalidated\"";
											input = FALSE;
										}
										item{
											label = "Price";
											variable = Price;
											format = "\\PricePrecision";
											input = FALSE;
										}
										item{
											label = "Volume";
											variable = if(VolumeTraded>0,VolumeTraded,Volume);
											format = "\\VolumePrecision";
											input = FALSE;
										}
										item{
											label = "My role";
											variable = Status*100+if(Type==1,1,0)*10+if(Offerer==:Subject,1,0);
											format = "<>!text: 100=\"I bought\"; 101=\"I sold\"; 110=\"I sold\";111=\"I bought\";211=\"I offered to buy\";201=\"I offered to sell\";";
											input = FALSE;
										}
									}
									selectcontractbox "HistoryListDE"{
										hasframe = TRUE;
										displaycondition = \Language==2;
										table = contracts;
										buttonposition = BOTTOMRIGHT;
										buttonsequence = HORIZONTAL;
										emptyallowed = FALSE;
										allemptyallowed = FALSE;
										condition = (Status == :DisplayStatus | ( :DisplayStatus==-1 & Status!=0) ) & (Offerer==:Subject | Accepter==:Subject) & Market==DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
										sortfields = "-Time";
										tablelayout = LIST;
										scrollatstart = TRUE;
										scrollatEnd = FALSE;
										selectbest = FALSE;
										item{
											label = "Typ";
											variable = Status;
											format = "<>!text: 1=\"        Gehandelt         \"; 2=\"Storniert\"; 3=\"Gelscht\"";
											input = FALSE;
										}
										item{
											label = "Preis";
											variable = Price;
											format = "\\PricePrecision";
											input = FALSE;
										}
										item{
											label = "Volumen";
											variable = if(VolumeTraded>0,VolumeTraded,Volume);
											format = "\\VolumePrecision";
											input = FALSE;
										}
										item{
											label = "Aktion";
											variable = Status*100+if(Type==1,1,0)*10+if(Offerer==:Subject,1,0);
											format = "<>!text: 100=\"Kauf\"; 101=\"Verkauf\"; 110=\"Verkauf\";111=\"Kauf\";211=\"Kaufgebot\";201=\"Verkaufsgebot\";";
											input = FALSE;
										}
									}
								}
							}
							containerbox "Market"{
								hasframe = FALSE;
								containerbox "TradingContainer"{
									hasframe = FALSE;
									height = 300p;
									bottom = 0p;
									cutbottom = TRUE;
									containerbox "BuyOffersContainer"{
										hasframe = TRUE;
										width = 180p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_BuyOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "BuyOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Buy offers\";2=\"Kaufgebote\">}";
												}
											}
											selectcontractbox "BuyOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&(\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==1&Status==0&Market==DisplayMarket[1]&(Price>:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&(\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==1&Status==0&Market==DisplayMarket[1]&(Price>:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&(\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==1&Status==0&Market==DisplayMarket[1]&(Price>:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volume";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "BuyOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==1&Status==0&Market==DisplayMarket[1]&(\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==1&Status==0&Market==DisplayMarket[1]&(Price>:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "-Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Volumen";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
										}
									}
									containerbox "SellOffersContainer"{
										hasframe = TRUE;
										width = 180p;
										left = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_SellOffers_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "SellOffers"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Sell offers\";2=\"Verkaufsgebote\">}";
												}
											}
											selectcontractbox "SellOffersMultiUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]& (\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==-1&Status==0&Market==DisplayMarket[1]&(Price<:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Volume";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersMultiUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==1;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]& (\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==-1&Status==0&Market==DisplayMarket[1]&(Price<:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
												item{
													label = "Volumen";
													variable = Volume-Transacted-Invalidated;
													format = "\\VolumePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersSingleUnitEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]& (\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==-1&Status==0&Market==DisplayMarket[1]&(Price<:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Price";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "SellOffersSingleUnitDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\MultiUnitTrading[DisplayMarket[1]]==0;
												table = offers;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												ownervariable = Offerer;
												condition = Type==-1&Status==0&Market==DisplayMarket[1]& (\OrderBookDepth[DisplayMarket[1]]<0|(offers.count(Type==-1&Status==0&Market==DisplayMarket[1]&(Price<:Price|(Price==:Price&OfferTime<:OfferTime)))<\OrderBookDepth[DisplayMarket[1]])|Offerer==:Subject);
												sortfields = "Price;OfferTime";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Preis";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
										}
									}
									containerbox "OrderSubmissionContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_OrderSubmission_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "OrderSubmission"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											standardbox "Heading"{
												hasframe = FALSE;
												height = 23p;
												top = 0p;
												cuttop = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<>{\\rtf \\fs18 \\qc \\b <\\Language|!text: 1=\"Order submission\";2=\"Gebotsabgabe\">}";
												}
											}
											standardbox "SummaryInformation"{
												hasframe = TRUE;
												bottom = 0p;
												cutbottom = TRUE;
												buttonposition = BOTTOMRIGHT;
												buttonsequence = HORIZONTAL;
												item{
													label = "<><\\Language|!text: 1=\"Last price:\";2=\"Letzter Preis:\";>";
													variable = \LastPrice[DisplayMarket[1]];
													format = "<>!text: \\I-1=\"<\\LastPrice[DisplayMarket[1]]|1>\"; \\I=\"<\\Language|!text: 1=\"No trade\";2=\"Kein Handel\";>\"; \\I+1=\"<\\LastPrice[DisplayMarket[1]]|\\PricePrecision>\";";
													input = FALSE;
												}
											}
										}
									}
								}
								containerbox "TopContainer"{
									hasframe = FALSE;
									containerbox "PriceListContainer"{
										hasframe = TRUE;
										width = 50%;
										left = 0p;
										top = 0p;
										cutleft = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_PriceList_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "PriceList"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											selectcontractbox "PricelistEN"{
												hasframe = FALSE;
												displaycondition = \Language==1&\ShowPricelist==1;
												table = contracts;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Status==1 & Market==:DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
												sortfields = "-ID";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Trade prices";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
											selectcontractbox "PricelistDE"{
												hasframe = FALSE;
												displaycondition = \Language==2&\ShowPricelist==1;
												table = contracts;
												buttonposition = BOTTOMLEFT;
												buttonsequence = HORIZONTAL;
												emptyallowed = FALSE;
												allemptyallowed = FALSE;
												condition = Status==1 & Market==:DisplayMarket[1] & (Phase==2 | \ConnectedMarketMechanisms==1);
												sortfields = "-ID";
												tablelayout = LIST;
												scrollatstart = TRUE;
												scrollatEnd = FALSE;
												selectbest = TRUE;
												item{
													label = "Transaktionspreise";
													variable = Price;
													format = "\\PricePrecision";
													input = FALSE;
												}
											}
										}
									}
									containerbox "SignalsContainer"{
										hasframe = TRUE;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = layout.find(ID=="CDA_Signals_BG",Color);
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										selectcontractbox "Signals"{
											hasframe = FALSE;
											left = 5p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											displaycondition = \ContinuousDoubleAuctionSignals==1;
											table = signals;
											buttonposition = BOTTOMRIGHT;
											buttonsequence = HORIZONTAL;
											emptyallowed = FALSE;
											allemptyallowed = FALSE;
											condition = same(Period)&Set==:Subject&Market==:DisplayMarket[1];
											sortfields = "Type";
											tablelayout = LIST;
											scrollatstart = FALSE;
											scrollatEnd = TRUE;
											selectbest = TRUE;
											item{
												label = "Signals";
												variable = Signal;
												format = "\\SignalPrecision";
												input = FALSE;
											}
										}
									}
									containerbox "MarketOverview"{
										hasframe = TRUE;
										displaycondition = \NumMarkets>1;
										plotbox "Background"{
											hasframe = TRUE;
											bgcolor = rgb(layout.find(ID=="CDA_MarketOverview_BG",R),layout.find(ID=="CDA_MarketOverview_BG",G),layout.find(ID=="CDA_MarketOverview_BG",B));
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = -100;
											xright = 100;
											ybottom = -100;
											ytop = 100;
										}
										containerbox "MarketButtons"{
											hasframe = FALSE;
											width = 74p;
											right = 5p;
											top = 5p;
											bottom = 5p;
											cutright = TRUE;
											containerbox "DE"{
												hasframe = FALSE;
												displaycondition = \Language==2;
												standardbox "Button1"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 1"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=1;
																
															}
														}
													}
												}
												standardbox "Button2"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 2"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=2;
																
															}
														}
													}
												}
												standardbox "Button3"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>2;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 3"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=3;
																
															}
														}
													}
												}
												standardbox "Button4"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>=4;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 4"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=4;
																
															}
														}
													}
												}
												standardbox "Button5"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets==5;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Markt 5"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=5;
																
															}
														}
													}
												}
											}
											containerbox "EN"{
												hasframe = FALSE;
												displaycondition = \Language==1;
												standardbox "Button1"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 1"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=1;
																
															}
														}
													}
												}
												standardbox "Button2"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 2"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=2;
																
															}
														}
													}
												}
												standardbox "Button3"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>2;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 3"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=3;
																
															}
														}
													}
												}
												standardbox "Button4"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets>=4;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 4"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=4;
																
															}
														}
													}
												}
												standardbox "Button5"{
													hasframe = FALSE;
													height = 35p;
													top = 0p;
													cuttop = TRUE;
													displaycondition = \NumMarkets==5;
													buttonposition = BOTTOMRIGHT;
													buttonsequence = HORIZONTAL;
													button "Market 5"{
														clearinputafterok = FALSE;
														norecordmadeorselected = FALSE;
														terminatestage = FALSE;
														donotterminatestage = TRUE;
														specialbuttoncolor = TRUE;
														buttoncolor = 13158600;
														program{
															table = subjects;
															do{
																DisplayMarket[1]=5;
																
															}
														}
													}
												}
											}
										}
										plotbox "Highlighting"{
											hasframe = FALSE;
											width = 13p;
											height = 77p;
											left = 5p;
											top = 27p;
											cutleft = TRUE;
											bgcolor = rgb(layout.find(ID=="CDA_MarketOverview_BG",R),layout.find(ID=="CDA_MarketOverview_BG",G),layout.find(ID=="CDA_MarketOverview_BG",B));
											maintainaspectratio = FALSE;
											xaxistype = LINEAR;
											yaxistype = LINEAR;
											xleft = 0;
											xright = 100;
											ybottom = 0;
											ytop = 100;
											plotrect "Market1"{
												x = 50;
												y = 93;
												width = 100;
												height = 15;
												fillcolor = rgb(layout.find(IDNumeric==\PriceHighlightColor[1],R),layout.find(IDNumeric==\PriceHighlightColor[1],G),layout.find(IDNumeric==\PriceHighlightColor[1],B));
											}
											plotrect "Market2"{
												x = 50;
												y = 72;
												width = 100;
												height = 15;
												fillcolor = rgb(layout.find(IDNumeric==\PriceHighlightColor[2],R),layout.find(IDNumeric==\PriceHighlightColor[2],G),layout.find(IDNumeric==\PriceHighlightColor[2],B));
											}
											plotrect "Market3"{
												displaycondition = \NumMarkets>=3;
												x = 50;
												y = 51;
												width = 100;
												height = 15;
												fillcolor = rgb(layout.find(IDNumeric==\PriceHighlightColor[3],R),layout.find(IDNumeric==\PriceHighlightColor[3],G),layout.find(IDNumeric==\PriceHighlightColor[3],B));
											}
											plotrect "Market4"{
												displaycondition = \NumMarkets>=4;
												x = 50;
												y = 30;
												width = 100;
												height = 15;
												fillcolor = rgb(layout.find(IDNumeric==\PriceHighlightColor[4],R),layout.find(IDNumeric==\PriceHighlightColor[4],G),layout.find(IDNumeric==\PriceHighlightColor[4],B));
											}
											plotrect "Market5"{
												displaycondition = \NumMarkets>=5;
												x = 50;
												y = 9;
												width = 100;
												height = 15;
												fillcolor = rgb(layout.find(IDNumeric==\PriceHighlightColor[5],R),layout.find(IDNumeric==\PriceHighlightColor[5],G),layout.find(IDNumeric==\PriceHighlightColor[5],B));
											}
										}
										selectcontractbox "MarketOverviewEN"{
											hasframe = TRUE;
											top = 5p;
											bottom = 5p;
											displaycondition = \Language==1;
											table = marketsummary;
											buttonposition = BOTTOMRIGHT;
											buttonsequence = HORIZONTAL;
											emptyallowed = FALSE;
											allemptyallowed = FALSE;
											condition = TRUE;
											sortfields = "";
											tablelayout = LIST;
											scrollatstart = FALSE;
											scrollatEnd = TRUE;
											selectbest = TRUE;
											item{
												label = "Market";
												variable = Market;
												format = "1";
												input = FALSE;
											}
											item{
												label = "Price";
												variable = Price;
												format = "<>!text:\\I-0.0001=\"<|0.01>\";\\I=\"-\";\\I+0.0001=\"<|0.01>\";";
												input = FALSE;
											}
											item{
												label = "Assets";
												variable = :Assets[Market];
												format = "\\AssetPrecision";
												input = FALSE;
											}
										}
										selectcontractbox "MarketOverviewDE"{
											hasframe = TRUE;
											top = 5p;
											bottom = 5p;
											displaycondition = \Language==2;
											table = marketsummary;
											buttonposition = BOTTOMRIGHT;
											buttonsequence = HORIZONTAL;
											emptyallowed = FALSE;
											allemptyallowed = FALSE;
											condition = TRUE;
											sortfields = "";
											tablelayout = LIST;
											scrollatstart = FALSE;
											scrollatEnd = TRUE;
											selectbest = TRUE;
											item{
												label = "Markt";
												variable = Market;
												format = "1";
												input = FALSE;
											}
											item{
												label = "Preis";
												variable = Price;
												format = "<>!text:\\I-0.0001=\"<|0.01>\";\\I=\"-\";\\I+0.0001=\"<|0.01>\";";
												input = FALSE;
											}
											item{
												label = "Aktien";
												variable = :Assets[Market];
												format = "\\AssetPrecision";
												input = FALSE;
											}
										}
									}
								}
							}
						}
					}
					containerbox "ChartContainer"{
						hasframe = TRUE;
						plotbox "Background"{
							hasframe = TRUE;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -100;
							xright = 100;
							ybottom = -100;
							ytop = 100;
						}
						standardbox "PreChartBox"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]==\I;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								label = "<>{\\rtf \\qc <\\Language|!text: 1=\"No transactions to display.\";2=\"Bisher keine Transaktionen\">}";
							}
						}
						standardbox "Heading"{
							hasframe = FALSE;
							height = 70p;
							top = 0p;
							cuttop = TRUE;
							displaycondition = \NumMarkets>1&\ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I;
							buttonposition = BOTTOMRIGHT;
							buttonsequence = HORIZONTAL;
							item{
								variable = DisplayMarket[1];
								format = "<>!text: 1=\"{\\rtf \\fs26 \\qc \\b <\\Language|!text:1=\"Market\";2=\"Markt\"> <|!text:1=\"A\";2=\"B\";3=\"C\">}\";";
								input = FALSE;
							}
						}
						plotbox "ChartEN"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I&\Language==1;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -\ChartXLabelDistance[DisplayMarket[1]];
							xright = \ChartXMax[DisplayMarket[1]]+\ChartXTickDistance[DisplayMarket[1]];
							ybottom = -\ChartYTickDistance[DisplayMarket[1]]*2;
							ytop = \ChartYMax[DisplayMarket[1]]+\ChartYTickDistance[DisplayMarket[1]];
							plotgraph "p"{
								table = contracts;
								condition = Market==:DisplayMarket[1]&Status==1&Phase==2;
								sorting = Time;
								connectioncolor = rgb(layout.find(ID=="CDA_Chart_Line",R),layout.find(ID=="CDA_Chart_Line",G),layout.find(ID=="CDA_Chart_Line",B));
								connectionwidth = 2;
								filltoxaxis = FALSE;
								connecttopreviouspoint = TRUE;
								plotpoint "Prices"{
									x = Time-(\StartTimeCDA-\StartTime);
									y = Price;
									isstar = FALSE;
									size = 2;
									numedges = 10;
									startat = 0;
									linecolor = rgb(layout.find(ID=="CDA_Chart_Line",R),layout.find(ID=="CDA_Chart_Line",G),layout.find(ID=="CDA_Chart_Line",B));
									linewidth = 2;
								}
							}
							plotaxis "Time"{
								axis = X;
								position = 0;
								from = 0;
								to = \ChartXMax[DisplayMarket[1]];
								tickdistance = \ChartXTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartXLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								caption = "Time in secs.";
							}
							plotaxis "Price"{
								axis = Y;
								position = 0;
								from = 0;
								to = \ChartYMax[DisplayMarket[1]];
								tickdistance = \ChartYTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartYLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								linecolor = rgb(0.00,0.00,0.00);
							}
						}
						plotbox "ChartDE"{
							hasframe = FALSE;
							left = 5p;
							right = 5p;
							top = 5p;
							bottom = 5p;
							displaycondition = \ShowChart==1&\ChartYMax[DisplayMarket[1]]!=\I&\Language==2;
							bgcolor = layout.find(ID=="CDA_Chart_BG",Color);
							maintainaspectratio = FALSE;
							xaxistype = LINEAR;
							yaxistype = LINEAR;
							xleft = -\ChartXLabelDistance[DisplayMarket[1]];
							xright = \ChartXMax[DisplayMarket[1]]+\ChartXTickDistance[DisplayMarket[1]];
							ybottom = -\ChartYTickDistance[DisplayMarket[1]]*2;
							ytop = \ChartYMax[DisplayMarket[1]]+\ChartYTickDistance[DisplayMarket[1]];
							plotgraph "p"{
								table = contracts;
								condition = Market==:DisplayMarket[1]&Status==1&Phase==2;
								sorting = Time;
								connectioncolor = rgb(layout.find(ID=="CDA_Chart_Line",R),layout.find(ID=="CDA_Chart_Line",G),layout.find(ID=="CDA_Chart_Line",B));
								connectionwidth = 2;
								filltoxaxis = FALSE;
								connecttopreviouspoint = TRUE;
								plotpoint "Prices"{
									x = Time-(\StartTimeCDA-\StartTime);
									y = Price;
									isstar = FALSE;
									size = 2;
									numedges = 10;
									startat = 0;
									linecolor = rgb(layout.find(ID=="CDA_Chart_Line",R),layout.find(ID=="CDA_Chart_Line",G),layout.find(ID=="CDA_Chart_Line",B));
									linewidth = 2;
								}
							}
							plotaxis "Time"{
								axis = X;
								position = 0;
								from = 0;
								to = \ChartXMax[DisplayMarket[1]];
								tickdistance = \ChartXTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartXLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								caption = "Zeit in Sek.";
							}
							plotaxis "Price"{
								axis = Y;
								position = 0;
								from = 0;
								to = \ChartYMax[DisplayMarket[1]];
								tickdistance = \ChartYTickDistance[DisplayMarket[1]];
								datalabeldistance = \ChartYLabelDistance[DisplayMarket[1]];
								datalabelformat = 1;
								linecolor = rgb(0.00,0.00,0.00);
							}
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							CDATimer=-1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=15;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							CDATimer=-1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=14;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							CDATimer=-1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=20;
							    }
							
						}
					}
				}
				button "Toggle language"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							Language=if(Language==1,2,1);
							
							
						}
					}
				}
				button "ChangeMarket"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = FALSE;
					buttoncolor = 0;
					program{
						table = subjects;
						do{
							DisplayMarket[1]=if(DisplayMarket[1]==1,2,1);
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "ContinuousDoubleAuctionResults"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = ifnoinput;
		timeout = if(\Period==\NumPeriods&(\CRTAfter==1|FinLit==1),-1,\TimeContinuousDoubleAuctionResults);
		program{
			table = globals;
			do{
				//Ends CDA Timer and resets ResultsDone
				CDATimer=-1;
				ResultsDone=0;
				
			}
		}
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*(1-PracticePeriod)*\ContinuousDoubleAuction;
				
			}
		}
		program{
			table = globals;
			condition = \ContinuousDoubleAuction==1;
			do{
				//Dividend draw
				
				for(Market,\NumMarkets){
				    r = roundup((random()*\NumDividends[Market]),1);
				    Dividend[Market]=dividends.find(Period==\Period&Type==\r&same(Market),Dividend);
				    }
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\ContinuousDoubleAuction==1;
			do{
				//Updates subjects' cash and writes profit
				
				for(Market,\NumMarkets){
				    Cash=Cash+Assets[Market]*\Dividend[Market];
				    AssetValueTemp=if(Market==1,Assets[Market]*\BBV[Market],AssetValueTemp+Assets[Market]*\BBV[Market]);
				    }
				
				//Writes profit into Profit in the last period
				
				Profit=if((\Period==\NumPeriods|\IndependentPeriods==1)&PracticePeriod==0,(Cash+AssetValueTemp)*\ExchangeRate,Profit);
				
				\Done=0;
				
			}
		}
		program{
			table = summary;
			condition = \ContinuousDoubleAuction==1&Period==\Period;
			do{
				//Writes statistics into summary table
				
				for(Market,\NumMarkets){
				    Dividend[Market]=\Dividend[Market];
				    SSWValue[Market]=(\NumPeriods - Period +1) * \MeanDividend[Market];
				    AvgPriceCDA[Market]=transactions.average(same(Market)&Phase==2,Price);
				    AvgVolPriceCDA[Market]=transactions.sum(same(Market)&Phase==2,Price*Volume)/transactions.sum(same(Market)&Phase==2,Volume);
				    MedianPriceCDA[Market]=transactions.median(same(Market)&Phase==2,Price);
				    LastPriceCDA[Market]=\LastPrice[Market];
				    NumTradesCDA[Market] = transactions.count(same(Market)&Phase==2);
				    VolumeCDA[Market]=transactions.sum(same(Market)&Phase==2,Volume);
				    }
			}
		}
		program{
			table = globals;
			condition = \ContinuousDoubleAuction==1;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=50;
				    }
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\ContinuousDoubleAuction==1;
			do{
				//Fills results table
				
				for(\FOR1,\NumMarkets){
				    results.new{
				        Market=\FOR1;
				        DisplayMarket=if(Market==1,2,if(Market==2,1,Market));    //Switches order for markets 1 and 2 for display purposes
				        Subject=:Subject;
				        Price=if(contracts.count(same(Market)&(Offerer==:Subject|Accepter==:Subject)&Phase==2&VolumeTraded>0)>0,contracts.sum(same(Market)&(Offerer==:Subject|Accepter==:Subject)&Phase==2&VolumeTraded>0,Price*VolumeTraded)/contracts.sum(same(Market)&(Offerer==:Subject|Accepter==:Subject)&Phase==2&VolumeTraded>0,VolumeTraded),-1);
				        Dividend=\Dividend[Market];
				        Phase=2;
				        Amount=:Assets[Market];
				        NumBought=contracts.sum(Market==:Market&((Offerer==:Subject&Type==1)|(Accepter==:Subject&Type==-1))&Phase==2,Transacted);
				        NumSold=contracts.sum(Market==:Market&((Offerer==:Subject&Type==-1)|(Accepter==:Subject&Type==1))&Phase==2,Transacted);
				        }
				    }
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "ExperimenterContinue"{
				hasframe = FALSE;
				displaycondition = \Period==\NumPeriods&IsExperimenter==1&(\CRTAfter==1|FinLit==1);
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = 1;
					format = "<>!text: 1=\"{\\rtf \\fs22 \\qc <\\ResultsDone|1>/<\\NumSubjects|1> subjects are done.}\"";
					input = FALSE;
				}
				item{
				}
				item{
					variable = if(\ResultsDone>=\NumSubjects,1,0);
					format = "<>!text: 0=\"{\\rtf {\\colortbl; \\red255\\green0\\blue0;\\red0\\green0\\blue0;} \\fs22 \\qc \\cf2     Click OK to proceed to after-market questionnaire items (CRT, FinLit).    }\" 1=\"{\\rtf {\\colortbl; \\red255\\green0\\blue0;\\red0\\green0\\blue0;} \\fs22 \\qc \\b \\cf1 Click OK to proceed to after-market questionnaire items (CRT, FinLit).}\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = TRUE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = globals;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=69;
							    }
							
						}
					}
				}
			}
			containerbox "SubjectContainer"{
				hasframe = FALSE;
				displaycondition = IsExperimenter==0;
				containerbox "ButtonContainer"{
					hasframe = FALSE;
					height = 50p;
					bottom = 0p;
					cutbottom = TRUE;
					standardbox "EN"{
						hasframe = FALSE;
						displaycondition = \Language==1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Continue"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = FALSE;
							buttoncolor = 0;
							program{
								table = globals;
								do{
									//Proceeding to next stage
									
									ResultsDone=ResultsDone+1;
									
									//If no further stages, proceeds after last subject is finished, irrespective of experimenter input
									if (ResultsDone==NumSubjects&(FinLit==0&CRTAfter==0)|Period<\NumPeriods) {
									    subjects.do{LeaveStage=1;}
									    }
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=70;
									    }
									
								}
							}
						}
					}
					standardbox "DE"{
						hasframe = FALSE;
						displaycondition = \Language==2;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Weiter"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = FALSE;
							donotterminatestage = FALSE;
							specialbuttoncolor = FALSE;
							buttoncolor = 0;
							program{
								table = globals;
								do{
									//Proceeding to next stage
									
									ResultsDone=ResultsDone+1;
									
									//If no further stages, proceeds after last subject is finished, irrespective of experimenter input
									if (ResultsDone==NumSubjects&(FinLit==0&CRTAfter==0)|Period<\NumPeriods) {
									    subjects.do{LeaveStage=1;}
									    }
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=70;
									    }
									
								}
							}
						}
					}
				}
				containerbox "ContentSingleMarket"{
					hasframe = FALSE;
					displaycondition = \NumMarkets==1|\ForceSingleMarket==1;
					standardbox "Content"{
						hasframe = TRUE;
						displaycondition = \PracticePeriod==0;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Your money before dividend distribution:\";2=\"Ihr Geldbestand vor der Dividendenzahlung:\">";
							variable = Cash-Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
							format = "1";
							input = FALSE;
						}
						item{
							label = "<><\\Language|!text:1=\"Dividends per share:\"; 2=\"Dividende je Aktie:\">";
							variable = \Dividend[DisplayMarket[1]];
							format = "1";
							input = FALSE;
						}
						item{
							label = "<><\\Language|!text:1=\"Your share holdings are:\"; 2=\"Ihr Aktienbestand:\">";
							variable = Assets[DisplayMarket[1]];
							format = "1";
							input = FALSE;
						}
						item{
							label = "<><\\Language|!text:1=\"Total dividends:\"; 2=\"Gesamte Dividendenzahlung:\">";
							variable = Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
							format = "1";
							input = FALSE;
						}
						item{
							label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
							variable = Cash;
							format = "1";
							input = FALSE;
						}
					}
				}
				containerbox "ContentMultiMarket"{
					hasframe = TRUE;
					displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
					standardbox "Text"{
						hasframe = TRUE;
						height = 200p;
						top = 0p;
						cuttop = TRUE;
						displaycondition = \PracticePeriod==0&\NumMarkets>1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						item{
							variable = \Language;
							format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
							input = FALSE;
						}
						item{
						}
						item{
							label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
							variable = Cash;
							format = "<>!text: 1=\"<|1>\"";
							input = FALSE;
						}
						item{
						}
					}
					selectcontractbox "AssetDataDE"{
						hasframe = FALSE;
						height = 110p;
						top = 0p;
						displaycondition = \Language==2;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==2;
						sortfields = "Market";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Aktie";
							variable = Market;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Preis";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "In dieser Periode gekauft / verkauft";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Bestand";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividende je Aktie";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Dividende gesamt";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
					selectcontractbox "AssetDataEN"{
						hasframe = FALSE;
						height = 110p;
						top = 0p;
						displaycondition = \Language==1;
						table = results;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						emptyallowed = FALSE;
						allemptyallowed = FALSE;
						condition = same(Subject)&Phase==2;
						sortfields = "Market";
						tablelayout = LIST;
						scrollatstart = FALSE;
						scrollatEnd = TRUE;
						selectbest = TRUE;
						item{
							label = "Asset";
							variable = Market;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Price";
							variable = Price;
							format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
							input = FALSE;
						}
						item{
							label = "Assets bought/sold in this period";
							variable = 1;
							format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
							input = FALSE;
						}
						item{
							label = "Asset balance";
							variable = Amount;
							format = "1";
							input = FALSE;
						}
						item{
							label = "Dividend per asset";
							variable = Dividend;
							format = "\\PricePrecision";
							input = FALSE;
						}
						item{
							label = "Total dividend";
							variable = Dividend*Amount;
							format = "\\PricePrecision";
							input = FALSE;
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=16;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							ForceLeavePeriod=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=13;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=26;
							    }
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "ContentSingleMarket"{
				hasframe = FALSE;
				displaycondition = \NumMarkets==1|\ForceSingleMarket==1;
				standardbox "Content"{
					hasframe = TRUE;
					displaycondition = \PracticePeriod==0;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Your money before dividend distribution:\";2=\"Ihr Geldbestand vor der Dividendenzahlung:\">";
						variable = Cash-Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
						format = "1";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Dividends per share:\"; 2=\"Dividende je Aktie:\">";
						variable = \Dividend[DisplayMarket[1]];
						format = "1";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Your share holdings are:\"; 2=\"Ihr Aktienbestand:\">";
						variable = Assets[DisplayMarket[1]];
						format = "1";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total dividends:\"; 2=\"Gesamte Dividendenzahlung:\">";
						variable = Assets[DisplayMarket[1]]*\Dividend[DisplayMarket[1]];
						format = "1";
						input = FALSE;
					}
					item{
						label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
						variable = Cash;
						format = "1";
						input = FALSE;
					}
				}
			}
			containerbox "ContentMultiMarket"{
				hasframe = TRUE;
				displaycondition = \NumMarkets>1&\ForceSingleMarket==0;
				standardbox "Text"{
					hasframe = TRUE;
					height = 200p;
					top = 0p;
					cuttop = TRUE;
					displaycondition = \PracticePeriod==0&\NumMarkets>1;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					item{
						variable = \Language;
						format = "<>!text: 1=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Period <Period|1>}\" 2=\"{\\rtf \\fs<\\FontSizeHeading|1> \\qc \\b Periode <Period|1>}\"";
						input = FALSE;
					}
					item{
					}
					item{
						label = "<><\\Language|!text:1=\"Total cash:\"; 2=\"Gesamter Geldbestand:\">";
						variable = Cash;
						format = "<>!text: 1=\"<|1>\"";
						input = FALSE;
					}
					item{
					}
				}
				selectcontractbox "AssetDataDE"{
					hasframe = FALSE;
					height = 110p;
					top = 0p;
					displaycondition = \Language==2;
					table = results;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					emptyallowed = FALSE;
					allemptyallowed = FALSE;
					condition = same(Subject)&Phase==2;
					sortfields = "Market";
					tablelayout = LIST;
					scrollatstart = FALSE;
					scrollatEnd = TRUE;
					selectbest = TRUE;
					item{
						label = "Aktie";
						variable = Market;
						format = "1";
						input = FALSE;
					}
					item{
						label = "Preis";
						variable = Price;
						format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
						input = FALSE;
					}
					item{
						label = "In dieser Periode gekauft / verkauft";
						variable = 1;
						format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
						input = FALSE;
					}
					item{
						label = "Bestand";
						variable = Amount;
						format = "1";
						input = FALSE;
					}
					item{
						label = "Dividende je Aktie";
						variable = Dividend;
						format = "\\PricePrecision";
						input = FALSE;
					}
					item{
						label = "Dividende gesamt";
						variable = Dividend*Amount;
						format = "\\PricePrecision";
						input = FALSE;
					}
				}
				selectcontractbox "AssetDataEN"{
					hasframe = FALSE;
					height = 110p;
					top = 0p;
					displaycondition = \Language==1;
					table = results;
					buttonposition = BOTTOMRIGHT;
					buttonsequence = HORIZONTAL;
					emptyallowed = FALSE;
					allemptyallowed = FALSE;
					condition = same(Subject)&Phase==2;
					sortfields = "Market";
					tablelayout = LIST;
					scrollatstart = FALSE;
					scrollatEnd = TRUE;
					selectbest = TRUE;
					item{
						label = "Asset";
						variable = Market;
						format = "1";
						input = FALSE;
					}
					item{
						label = "Price";
						variable = Price;
						format = "<>!text: -1=\"-\";0=\"<Price|\\PricePrecision>\"";
						input = FALSE;
					}
					item{
						label = "Assets bought/sold in this period";
						variable = 1;
						format = "<>!text: 0=\"<NumBought|1> / <NumSold|1>\"";
						input = FALSE;
					}
					item{
						label = "Asset balance";
						variable = Amount;
						format = "1";
						input = FALSE;
					}
					item{
						label = "Dividend per asset";
						variable = Dividend;
						format = "\\PricePrecision";
						input = FALSE;
					}
					item{
						label = "Total dividend";
						variable = Dividend*Amount;
						format = "\\PricePrecision";
						input = FALSE;
					}
				}
			}
		}
	}
	stage "CRTAfter"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\CRTAfter*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0);
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=49;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<FontSizeHeading|1> \\qc \\b <\\Language|!text: 1=\"Please answer the following questions:\";2=\"Bitte beantworten Sie die folgenden Fragen:\">}";
				}
				item{
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"A bat and a ball cost 1.10 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">. The bat costs 1.00 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> more than the ball. How much does the ball cost? [<\\Currency|!text: 2=\"cents\" 3=\"re\" 4=\"cents\">]\";2=\"Ein Schlger und ein Ball kosten zusammen insgesamt 1,10 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">. Der Schlger kostet 1,00 <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> mehr als der Ball. Wie viel kostet der Ball? [<\\Currency|!text: 1=\"Cent\" 2=\"Cents\" 3=\"re\" 4=\"cents\">]\">}";
					variable = CRT1;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"If it takes 5 machines 5 minutes to make 5 widgets, how long would it take 100 machines to make 100 widgets? [minutes]\";2=\"Wenn 5 Maschinen 5 Minuten bentigen, um 5 Teile zu produzieren, wie lange wrden dann 100 Maschinen brauchen, um 100 Teile zu produzieren? [Minuten]\";>}";
					variable = CRT2;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				item{
					label = "<>{\\rtf \\fs<FontSizeSubHeading|1> <\\Language|!text: 1=\"In a lake, there is a patch of lily pads. Every day, the patch doubles in size. If it takes 48 days for the patch to cover the entire lake, how long would it take for the patch to cover half of the lake? [days]\";2=\"In einem See wachsen Seerosen. Jeden Tag verdoppelt sich die Flche, die mit Seerosenblttern bedeckt ist. Wenn die Seerosen den gesamten See in 48 Tagen bedecken wrden, wie lange wrde es dauern, bis der halbe See bedeckt wre? [Tage]\";>}";
					variable = CRT3;
					format = "0.0000000001";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = -999999;
					max = 999999;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Calculates score
							
							CRT=if(CRT1==5,1,0)+if(CRT2==5,1,0)+if(CRT3==47,1,0);
							
							
							
							
						}
					}
					program{
						table = subjects;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=22;
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=25;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=24;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=23;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "HoltLauryAfter"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = \TimeHoltLaury;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\HLAfter*if(\Period==1,1,0)*(1-IsExperimenter);
				
				
				
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=91;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			containerbox "Subjects"{
				hasframe = TRUE;
				containerbox "ButtonContainer"{
					hasframe = TRUE;
					height = 40p;
					bottom = 0p;
					cutbottom = TRUE;
					standardbox "ButtonEN"{
						hasframe = FALSE;
						displaycondition = \Language==1;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Confirm"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = TRUE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = HLChoice!=\I;
								message = "You have not yet chosen the row in which you want to switch from option A to option B.\r\n\r\nPlease choose this row and click \"Confirm\".";
								yesButtonStr = "";
								noButtonStr = "OK";
							}
							program{
								table = subjects;
								do{
									HL=10-HLChoice;
									
									
									
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=80;
									    Data[1]=HLChoice;
									   }
									
									
									
									
								}
							}
						}
					}
					standardbox "ButtonDE"{
						hasframe = FALSE;
						displaycondition = \Language==2;
						buttonposition = BOTTOMRIGHT;
						buttonsequence = HORIZONTAL;
						button "Besttigen"{
							clearinputafterok = FALSE;
							norecordmadeorselected = FALSE;
							terminatestage = TRUE;
							donotterminatestage = FALSE;
							specialbuttoncolor = TRUE;
							buttoncolor = 5921535;
							checker{
								condition = HLChoice!=\I;
								message = "Sie haben noch nicht ausgewhlt, in welcher Zeile Sie von Option A zu Option B wechseln wollen.\r\n\r\nBitte whlen Sie diese Zeile und klicken Sie \"Besttigen\".";
								yesButtonStr = "";
								noButtonStr = "OK";
							}
							program{
								table = subjects;
								do{
									HL=10-HLChoice;
									
									
									
									
								}
							}
							program{
								table = subjects;
								ownervariable = Subject;
								do{
									//Timelog
									
									timelog.new
									    {
									    ID=timelog.maximum(ID)+1;
									    Time=gettime()-\StartTime;
									    Period=\Period;
									    Subject=:Subject;
									    Event=80;
									    Data[1]=HLChoice;
									   }
									
									
									
									
								}
							}
						}
					}
				}
				containerbox "GridContainerEN"{
					hasframe = FALSE;
					displaycondition = \Language==1;
					containerbox "OptionContainer"{
						hasframe = TRUE;
						containerbox "ColumnHeadings"{
							hasframe = TRUE;
							height = 30p;
							top = 0p;
							cuttop = TRUE;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option A \\cf2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option B \\cf2}\"";
									input = FALSE;
								}
							}
						}
						standardbox "ButtonRow0"{
							hasframe = FALSE;
							height = 6%;
							top = 0p;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose Option B for ALL rows"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=0;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=0;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow1"{
							hasframe = FALSE;
							height = 6%;
							top = 9.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for row 1 and option B for rows 2 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=1;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=1;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow2"{
							hasframe = FALSE;
							height = 6%;
							top = 19%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 2 and option B for rows 3 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=2;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=2;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow3"{
							hasframe = FALSE;
							height = 6%;
							top = 28.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 3 and option B for rows 4 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=3;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=3;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow4"{
							hasframe = FALSE;
							height = 6%;
							top = 38%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 4 and option B for rows 5 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=4;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=4;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow5"{
							hasframe = FALSE;
							height = 6%;
							top = 47.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 5 and option B for rows 6 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=5;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=5;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow6"{
							hasframe = FALSE;
							height = 6%;
							top = 57%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 6 and option B for rows 7 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=6;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=6;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow7"{
							hasframe = FALSE;
							height = 6%;
							top = 66.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 7 and option B for rows 8 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=7;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=7;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow8"{
							hasframe = FALSE;
							height = 6%;
							top = 76%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 8 and option B for rows 9 to 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=8;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=8;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow9"{
							hasframe = FALSE;
							height = 6%;
							top = 85.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for rows 1 to 9 and option B for row 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=9;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=9;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow10"{
							hasframe = FALSE;
							height = 6%;
							top = 95%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Choose option A for ALL rows"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=10;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=10;
										   }
										
										
										
										
									}
								}
							}
						}
						containerbox "Row1"{
							hasframe = TRUE;
							height = 5%;
							top = 5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 1}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: -100=\"{\\rtf \\fs20 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 10% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row2"{
							hasframe = TRUE;
							height = 5%;
							top = 14.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: 0=\"{\\rtf \\fs20 20% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: -100=\"{\\rtf \\fs20 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 20% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row3"{
							hasframe = TRUE;
							height = 5%;
							top = 24%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 3}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: 0=\"{\\rtf \\fs20 30% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: -100=\"{\\rtf \\fs20 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 30% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row4"{
							hasframe = TRUE;
							height = 5%;
							top = 33.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 4}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: 0=\"{\\rtf \\fs20 40% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: -100=\"{\\rtf \\fs20 40% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% chance of <\\PayoffBHigh|0.01> kr & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 40% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row5"{
							hasframe = TRUE;
							height = 5%;
							top = 43%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 5}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: 0=\"{\\rtf \\fs20 50% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: -100=\"{\\rtf \\fs20 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 50% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row6"{
							hasframe = TRUE;
							height = 5%;
							top = 52.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 6}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: 0=\"{\\rtf \\fs20 60% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: -100=\"{\\rtf \\fs20 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 60% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row7"{
							hasframe = TRUE;
							height = 5%;
							top = 62%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 7}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: 0=\"{\\rtf \\fs20 70% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: -100=\"{\\rtf \\fs20 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 70% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row8"{
							hasframe = TRUE;
							height = 5%;
							top = 71.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 8}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: 0=\"{\\rtf \\fs20 80% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: -100=\"{\\rtf \\fs20 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 80% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row9"{
							hasframe = TRUE;
							height = 5%;
							top = 81%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 9}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: 0=\"{\\rtf \\fs20 90% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: -100=\"{\\rtf \\fs20 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 90% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% chance of <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row10"{
							hasframe = TRUE;
							height = 5%;
							top = 90.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: 0=\"{\\rtf \\fs20 100% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% chance of <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: -100=\"{\\rtf \\fs20 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 100% chance of <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
					}
				}
				containerbox "GridContainerDE"{
					hasframe = FALSE;
					displaycondition = \Language==2;
					containerbox "OptionContainer"{
						hasframe = TRUE;
						containerbox "ColumnHeadings"{
							hasframe = TRUE;
							height = 30p;
							top = 0p;
							cuttop = TRUE;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option A \\cf2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = 1;
									format = "<>!text: 1=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs30 \\cf1 Option B \\cf2}\"";
									input = FALSE;
								}
							}
						}
						standardbox "ButtonRow0"{
							hasframe = FALSE;
							height = 6%;
							top = 0p;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option B fr ALLE Zeilen"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=0;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=0;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow1"{
							hasframe = FALSE;
							height = 6%;
							top = 9.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeile 1 und Option B fr Zeilen 2 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=1;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=1;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow2"{
							hasframe = FALSE;
							height = 6%;
							top = 19%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 2 und Option B fr Zeilen 3 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=2;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=2;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow3"{
							hasframe = FALSE;
							height = 6%;
							top = 28.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 3 und Option B fr Zeilen 4 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=3;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=3;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow4"{
							hasframe = FALSE;
							height = 6%;
							top = 38%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 4 und Option B fr Zeilen 5 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=4;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=4;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow5"{
							hasframe = FALSE;
							height = 6%;
							top = 47.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 5 und Option B fr Zeilen 6 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=5;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=5;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow6"{
							hasframe = FALSE;
							height = 6%;
							top = 57%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 6 und Option B fr Zeilen 7 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=6;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=6;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow7"{
							hasframe = FALSE;
							height = 6%;
							top = 66.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 7 und Option B fr Zeilen 8 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=7;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=7;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow8"{
							hasframe = FALSE;
							height = 6%;
							top = 76%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 8 und Option B fr Zeilen 9 bis 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=8;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=8;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow9"{
							hasframe = FALSE;
							height = 6%;
							top = 85.5%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr Zeilen 1 bis 9 und Option B fr Zeile 10"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=9;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=9;
										   }
										
										
										
										
									}
								}
							}
						}
						standardbox "ButtonRow10"{
							hasframe = FALSE;
							height = 6%;
							top = 95%;
							buttonposition = MIDDLEMIDDLE;
							buttonsequence = HORIZONTAL;
							button "Whle Option A fr ALLE Zeilen"{
								clearinputafterok = FALSE;
								norecordmadeorselected = FALSE;
								terminatestage = FALSE;
								donotterminatestage = TRUE;
								specialbuttoncolor = TRUE;
								buttoncolor = 13158600;
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										HLChoice=10;
										
										
										
										
									}
								}
								program{
									table = subjects;
									ownervariable = Subject;
									do{
										//Timelog
										
										timelog.new
										   {
										   ID=timelog.maximum(ID)+1;
										   Time=gettime()-\StartTime;
										   Period=\Period;
										   Subject=:Subject;
										   Event=81;
										   Data[1]=10;
										   }
										
										
										
										
									}
								}
							}
						}
						containerbox "Row1"{
							hasframe = TRUE;
							height = 5%;
							top = 5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 1}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: -100=\"{\\rtf \\fs20 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 10% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 90% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row2"{
							hasframe = TRUE;
							height = 5%;
							top = 14.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 2}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: 0=\"{\\rtf \\fs20 20% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-1;
									format = "<>!text: -100=\"{\\rtf \\fs20 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 20% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 80% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row3"{
							hasframe = TRUE;
							height = 5%;
							top = 24%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 3}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: 0=\"{\\rtf \\fs20 30% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-2;
									format = "<>!text: -100=\"{\\rtf \\fs20 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 30% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 70% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row4"{
							hasframe = TRUE;
							height = 5%;
							top = 33.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 4}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: 0=\"{\\rtf \\fs20 40% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-3;
									format = "<>!text: -100=\"{\\rtf \\fs20 40% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 40% Chance auf <\\PayoffBHigh|0.01> kr & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 40% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 60% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row5"{
							hasframe = TRUE;
							height = 5%;
							top = 43%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 5}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: 0=\"{\\rtf \\fs20 50% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-4;
									format = "<>!text: -100=\"{\\rtf \\fs20 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 50% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 50% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row6"{
							hasframe = TRUE;
							height = 5%;
							top = 52.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 6}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: 0=\"{\\rtf \\fs20 60% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-5;
									format = "<>!text: -100=\"{\\rtf \\fs20 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 60% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 40% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row7"{
							hasframe = TRUE;
							height = 5%;
							top = 62%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 7}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: 0=\"{\\rtf \\fs20 70% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-6;
									format = "<>!text: -100=\"{\\rtf \\fs20 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 70% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 30% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row8"{
							hasframe = TRUE;
							height = 5%;
							top = 71.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 8}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: 0=\"{\\rtf \\fs20 80% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-7;
									format = "<>!text: -100=\"{\\rtf \\fs20 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 80% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 20% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row9"{
							hasframe = TRUE;
							height = 5%;
							top = 81%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 9}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: 0=\"{\\rtf \\fs20 90% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffALow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-8;
									format = "<>!text: -100=\"{\\rtf \\fs20 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 90% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\"> & 10% Chance auf <\\PayoffBLow|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
						containerbox "Row10"{
							hasframe = TRUE;
							height = 5%;
							top = 90.5%;
							standardbox "OptionNumber"{
								hasframe = FALSE;
								width = 45p;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice;
									format = "<>!text: 0=\"{\\rtf \\fs20 10}\"";
									input = FALSE;
								}
							}
							standardbox "OptionA"{
								hasframe = TRUE;
								width = 50%;
								left = 0p;
								cutleft = TRUE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: 0=\"{\\rtf \\fs20 100% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf {\\colortbl; \\red51\\green153\\blue51; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% Chance auf <\\PayoffAHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
							standardbox "OptionB"{
								hasframe = FALSE;
								buttonposition = BOTTOMRIGHT;
								buttonsequence = HORIZONTAL;
								item{
									variable = HLChoice-9;
									format = "<>!text: -100=\"{\\rtf \\fs20 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 0=\"{\\rtf {\\colortbl; \\red55\\green55\\blue255; \\red0\\green0\\blue0;} \\fs20 \\cf1 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\" 1=\"{\\rtf \\fs20 100% Chance auf <\\PayoffBHigh|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">}\"";
									input = FALSE;
								}
							}
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=85;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=84;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=83;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "HoltLauryResultAfter"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = ifnoinput;
		timeout = TimeHoltLauryResult;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\HLAfter*if(\Period==1,1,0)*(1-IsExperimenter);
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\HLAfter==1;
			do{
				//HL Payment determination
				
				//Determines which row is to be paid
				HLRandomRow=roundup(random()*10,1);
				
				HLDieRoll=random()*10;
				
				HLPayoff=if(HLChoice>=HLRandomRow,if(HLDieRoll<=HLRandomRow,PayoffAHigh,PayoffALow),if(HLDieRoll<=HLRandomRow,PayoffBHigh,PayoffBLow));
				
				Profit=Profit+HLPayoff;
				
			}
		}
		program{
			table = globals;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Event=92;
				    }
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "HL display"{
				hasframe = TRUE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<><\\Language|!text:1=\"You have chosen option A for:\"; 2=\"Sie whlten Option A fr:\";>";
					variable = HLChoice;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 1\";2=\"Zeile 1\">\" 2=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 9=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"You have chosen option B for:\"; 2=\"Sie whlten Option B fr:\";>";
					variable = HL;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 10\";2=\"Zeile 10\">\" 2=\"<\\Language|!text: 1=\"Row <HLChoice+1|1> to 10\";2=\"Zeile <HLChoice+1|1> bis 10\">\" 9=\"<\\Language|!text: 1=\"Rows <HLChoice+1|1> to 10\";2=\"Zeilen <HLChoice+1|1> bis 10\">\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"The randomly chosen row is:\";2=\"Die zufllig ausgewhlte Zeile ist:\">";
					variable = HLRandomRow;
					format = "<>!text: 0=\"<\\Language|!text:1=\"Row\";2=\"Zeile\"> <HLRandomRow|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you are paid according to:\";2=\"Daher erfolgt Ihre Bezahlung nach:\">";
					variable = if(HLChoice>=HLRandomRow,1,0);
					format = "<>!text: 0=\"Option B\" 1=\"Option A\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the higher amount if the randomly determined number is:\";2=\"Sie bekommen die hhere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...less than or equal to <HLRandomRow|1>\"; 2=\"...kleiner oder gleich <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the lower amount if the randomly determined number is:\"; 2=\"Sie bekommen die geringere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...greater than <HLRandomRow|1>\"; 2=\"...grer als <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"The randomly determined number is:\";2=\"Der Wrfelwurf lautet:\">";
					variable = 1;
					format = "<>!text: 1=\"<roundup(HLDieRoll,1)|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you get the:\";2=\"Das bedeutet, Sie erhalten die:\">";
					variable = if(HLDieRoll<HLRandomRow,0,1);
					format = "<>!text: 0=\"<\\Language|!text: 1=\"Higher amount\";2=\"hhere Auszahlung\">\" 1=\"<\\Language|!text: 1=\"Lower amount\";2=\"geringere Auszahlung\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"Your payoff from this task is:\";2=\"Ihr Ertrag aus dieser Aufgabe:\">";
					variable = HLPayoff;
					format = "<>!text: 0=\"<HLPayoff|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=82;
							    }
							
							
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=88;
							    }
							
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=87;
							    }
							
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=86;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "HL display"{
				hasframe = TRUE;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<><\\Language|!text:1=\"You have chosen option A for:\"; 2=\"Sie whlten Option A fr:\";>";
					variable = HLChoice;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 1\";2=\"Zeile 1\">\" 2=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 9=\"<\\Language|!text: 1=\"Row 1 to\";2=\"Zeile 1 bis\"> <HLChoice|1>\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"You have chosen option B for:\"; 2=\"Sie whlten Option B fr:\";>";
					variable = HL;
					format = "<>!text: 0=\"<\\Language|!text: 1=\"No row\";2=\"Keine Zeile\">\" 1=\"<\\Language|!text: 1=\"Row 10\";2=\"Zeile 10\">\" 2=\"<\\Language|!text: 1=\"Row <HLChoice+1|1> to 10\";2=\"Zeile <HLChoice+1|1> bis 10\">\" 9=\"<\\Language|!text: 1=\"Rows <HLChoice+1|1> to 10\";2=\"Zeilen <HLChoice+1|1> bis 10\">\" 10=\"<\\Language|!text: 1=\"All rows\";2=\"Alle Zeilen\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"The randomly chosen row is:\";2=\"Die zufllig ausgewhlte Zeile ist:\">";
					variable = HLRandomRow;
					format = "<>!text: 0=\"<\\Language|!text:1=\"Row\";2=\"Zeile\"> <HLRandomRow|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you are paid according to:\";2=\"Daher erfolgt Ihre Bezahlung nach:\">";
					variable = if(HLChoice>=HLRandomRow,1,0);
					format = "<>!text: 0=\"Option B\" 1=\"Option A\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the higher amount if the randomly determined number is:\";2=\"Sie bekommen die hhere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...less than or equal to <HLRandomRow|1>\"; 2=\"...kleiner oder gleich <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"You get the lower amount if the randomly determined number is:\"; 2=\"Sie bekommen die geringere Auszahlung wenn das Wrfelergebnis...\">";
					variable = \Language;
					format = "<>!text: 1=\"...greater than <HLRandomRow|1>\"; 2=\"...grer als <HLRandomRow|1> ist\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"The randomly determined number is:\";2=\"Der Wrfelwurf lautet:\">";
					variable = 1;
					format = "<>!text: 1=\"<roundup(HLDieRoll,1)|1>\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text: 1=\"Therefore, you get the:\";2=\"Das bedeutet, Sie erhalten die:\">";
					variable = if(HLDieRoll<HLRandomRow,0,1);
					format = "<>!text: 0=\"<\\Language|!text: 1=\"Higher amount\";2=\"hhere Auszahlung\">\" 1=\"<\\Language|!text: 1=\"Lower amount\";2=\"geringere Auszahlung\">\"";
					input = FALSE;
				}
				item{
					label = "<><\\Language|!text:1=\"Your payoff from this task is:\";2=\"Ihr Ertrag aus dieser Aufgabe:\">";
					variable = HLPayoff;
					format = "<>!text: 0=\"<HLPayoff|0.01> <\\Currency|!text: 1=\"EUR\" 2=\"USD\" 3=\"DKR\" 4=\"AUD\">\"";
					input = FALSE;
				}
			}
		}
	}
	stage "FinLitIntro"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0);
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=51;
				    }
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "EN"{
				hasframe = FALSE;
				width = 700p;
				left = 0p;
				displaycondition = \Language==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \PayFinLit;
					format = "<> !text: 0=\"{\\rtf \\fs<\\FontSizeStandard|1> You are now asked to answer <\\NumFinLit|1> questions. If you have any questions during this task, please raise your hand and the experimenter will come to help you.}\" 1=\"{\\rtf \\fs<\\FontSizeStandard|1> You are now asked to answer <\\NumFinLit|1> questions. <\\PayFinLitRandom|!text: 1=\"After you have completed this task, the computer will randomly select one of these <\\NumFinLit|1> questions. If your answer to this question is correct, you will receive an additional payment of <\\PayoffFinLit*\\ExchangeRate|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\">.\"; 0=\"You will receive an additional payment of <\\PayoffFinLit/\\NumFinLit*\\ExchangeRate|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\"> for each correct answer.\";> If you have any questions during this task, please raise your hand and the experimenter will come to help you.}\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=27;
							    }
							
						}
					}
				}
			}
			standardbox "DE"{
				hasframe = FALSE;
				width = 700p;
				left = 0p;
				displaycondition = \Language==2;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \PayFinLit;
					format = "<> !text: 0=\"{\\rtf \\fs<\\FontSizeStandard|1> Bitte beantworten Sie nun <\\NumFinLit|1> Fragen. Wenn Sie whrend dieser Aufgabe Fragen haben, heben Sie bitte die Hand und ein Experimentator wird kommen, um Ihnen zu helfen.}\" 1=\"{\\rtf \\fs<\\FontSizeStandard|1> Bitte beantworten Sie nun <\\NumFinLit|1> Fragen. <\\PayFinLitRandom|!text: 1=\"Wenn Sie diese Aufgabe abgeschlossen haben wird der Computer eine dieser <\\NumFinLit|1> Fragen zufllig auswhlen. Wenn Ihre Antwort auf diese Frage korrekt ist, erhalten Sie eine zustzliche Auszahlung von <\\PayoffFinLit*\\ExchangeRate|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollar\" 3=\"Dnischen Kronen\" 4=\"Australischen Dollar\">.\"; 0=\"Sie erhalten eine zustzliche Auszahlung von <\\PayoffFinLit/\\NumFinLit*\\ExchangeRate|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollar\" 3=\"Dnischen Kronen\" 4=\"Australischen Dollar\"> fr jede richtige Antwort.\";> Wenn Sie whrend dieser Aufgabe Fragen haben, heben Sie bitte die Hand und ein Experimentator wird kommen, um Ihnen zu helfen.}\"";
					input = FALSE;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=27;
							    }
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit01"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[1];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=52;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Suppose you had <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">100 in a savings account and the interest rate was 2% per year. After 5 years, how much do you think you would have in the account if you left the money to grow?\"; 2=\"Angenommen Sie htten <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">100 auf einem Sparbuch, und der Zinssatz betrge 2% pro Jahr. Wie viel glauben Sie htten Sie nach 5 Jahren auf dem Sparbuch, wenn Sie das Geld dort liegen lieen?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[1];
					format = "<>!radio: 1 = \"<\\Language|!text: 1=\"More than\";2=\"Mehr als\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">102\" ; 0 = \"<\\Language|!text: 1=\"Exactly\";2=\"Genau\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">102\"; 0 = \"<\\Language|!text: 1=\"Less than\";2=\"Weniger als\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">102\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0 = \"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=28;
							    Data[1]=AnswerFinLit[1];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit02"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[2];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=53;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Suppose you had <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">100 in a savings account and the interest rate is 20% per year and you never withdraw money or interest payments. After 5 years, how much would you have on this account in total?\";2=\"Angenommen Sie htten <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">100 auf einem Sparbuch, der Zinssatz betrge 20% pro Jahr und Sie wrden nie Geld oder Zinsen abheben. Wie viel htten Sie nach 5 Jahren insgesamt auf diesem Sparbuch?\";>";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[2];
					format = "<>!radio: 1 = \"<\\Language|!text: 1=\"More than\";2=\"Mehr als\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">200\" ; 0 = \"<\\Language|!text: 1=\"Exactly\";2=\"Genau\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">200\"; 0 = \"<\\Language|!text: 1=\"Less than\";2=\"Weniger als\";> <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">200\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\"";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=29;
							    Data[1]=AnswerFinLit[2];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit03"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[3];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=54;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Imagine that the interest rate on your savings account was 1% per year and inflation was 2% per year. After 1 year, how much would you be able to buy with the money in this account?\";2=\"Angenommen der Zinssatz auf Ihrem Sparbuch wre 1% pro Jahr und die Inflation wre 2% pro Jahr. Wie viel knnten Sie mit dem Geld auf diesem Sparbuch nach 1 Jahr kaufen?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[3];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"More than today\";2=\"Mehr als heute\";>\" ; 0 = \"<\\Language|!text: 1=\"Exactly the same\";2=\"Genau gleich viel\";>\"; 1 = \"<\\Language|!text: 1=\"Less than today\";2=\"Weniger als heute\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=30;
							    Data[1]=AnswerFinLit[3];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit04"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[4];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=55;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Assume a friend inherits <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">10,000 today and his sibling inherits <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">10,000 3 years from now. Who is richer because of the inheritance?\";2=\"Angenommen ein Freund erbt heute <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">10,000 und sein Bruder erbt <\\Currency|!text: 1=\"\" 2=\"$\" 3=\"DKR \" 4=\"AU$\">10,000 in drei Jahren. Wer ist aufgrund der Erbschaft reicher?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[4];
					format = "<>!radio: 1 = \"<\\Language|!text: 1=\"My friend\";2=\"Mein Freund\";>\" ; 0 = \"<\\Language|!text: 1=\"HIs sibling\";2=\"Sein Bruder\";>\"; 0 = \"<\\Language|!text: 1=\"They are equally rich\";2=\"Sie sind gleich reich\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=31;
							    Data[1]=AnswerFinLit[4];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit05"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[5];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=56;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Suppose that in the year <\\CurrentYear+1|1>, your income has doubled and prices of all goods have doubled too. In <\\CurrentYear+1|1>, how much will you be able to buy with your income?\";2=\"Angenommen bis zum Jahr <\\CurrentYear+1|1> hat sich Ihr Einkommen verdoppelt und die Preise aller Gter haben sich auch verdoppelt. Wie viel werden Sie mit Ihrem Einkommen im Jahr <\\CurrentYear+1|1> kaufen knnen?\">}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[5];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"More than today\";2=\"Mehr als heute\";>\" ; 1 = \"<\\Language|!text: 1=\"The same\";2=\"Gleich viel\";>\"; 0 = \"<\\Language|!text: 1=\"Less than today\";2=\"Weniger als heute\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=32;
							    Data[1]=AnswerFinLit[5];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit06"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[6];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=57;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Which of the following statements describes the main function of the stock market?\";2=\"Welche der folgenden Aussagen beschreibt die Hauptfunktion des Aktienmarktes?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[6];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"The stock market helps to predict stock earnings\";2=\"Der Aktienmarkt hilft dabei, Aktienertrge vorherzusagen\";>\" ; 0 = \"<\\Language|!text: 1=\"The stock market results in an increase in the price of stocks\";2=\"Der Aktienmarkt fhrt zu einem Anstieg der Aktienpreise\";>\"; 1 = \"<\\Language|!text: 1=\"The stock market brings people who want to buy stocks together with those who want to sell stocks\";2=\"Der Aktienmarkt bringt Personen, die Aktien kaufen wollen mit solchen zusammen, die Aktien verkaufen wollen\";>\"; 0 = \"<\\Language|!text: 1=\"None of the above\";2=\"Keins der genannten\";>\"; 0=\"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=33;
							    Data[1]=AnswerFinLit[6];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit07"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[7];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=58;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Which of the following statements is correct? If somebody buys the stock of firm B in the stock market:\";2=\"Welche der folgenden Aussagen ist richtig? Wenn jemand Aktien von Unternehmen B am Aktienmarkt kauft:\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[7];
					format = "<>!radio: 1 = \"<\\Language|!text: 1=\"He owns part of firm B\";2=\"Gehrt ihm ein Teil von Unternehmen B\";>\" ; 0 = \"<\\Language|!text: 1=\"He has lent money to firm B\";2=\"Hat er Unternehmen B Geld geliehen\";>\"; 0 = \"<\\Language|!text: 1=\"He is liable for firm B's debts\";2=\"Haftet er fr die Schulden von Unternehmen B\";>\"; 0 = \"<\\Language|!text: 1=\"None of the above\";2=\"Keins der genannten\";>\"; 0=\"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=34;
							    Data[1]=AnswerFinLit[7];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit08"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[8];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=59;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Which of the following statements is correct?\";2=\"Welche der folgenden Aussagen ist richtig?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[8];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"Once one invests in a mutual fund, one cannot withdraw the money in the first year\";2=\"Wenn man in einen Investmentfonds investiert, kann man sein Geld im ersten Jahr nicht beheben\";>\" ; 1 = \"<\\Language|!text: 1=\"Mutual funds can invest in several assets, for example invest in both stocks and bonds\";2=\"Investmentfonds knnen in mehrere Anlageklassen investieren, zum Beispiel sowohl in Aktien als auch in Anleihen\";>\"; 0 = \"<\\Language|!text: 1=\"Mutual funds pay a guaranteed rate of return which depends on their past performance\";2=\"Investmentfonds erzielen eine garantierte Rendite, welche von der Performance in der Vergangenheit abhngt\";>\"; 0 = \"<\\Language|!text: 1=\"None of the above\";2=\"Keins der genannten\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=35;
							    Data[1]=AnswerFinLit[8];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit09"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[9];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=60;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Which of the following statements is correct? If somebody buys a bond of firm B:\";2=\"Welche der folgenden Aussagen ist richtig? Wenn jemand eine Anleihe von Unternehmen B kauft:\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[9];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"He owns a part of firm B\";2=\"Gehrt ihm ein Teil von Unternehmen B\";>\" ; 1 = \"<\\Language|!text: 1=\"He has lent money to firm B\";2=\"Hat er Unternehmen B Geld geliehen\";>\"; 0 = \"<\\Language|!text: 1=\"He is liable for firm B's debts\";2=\"Haftet er fr die Schulden von Unternehmen B\";>\"; 0 = \"<\\Language|!text: 1=\"None of the above\";2=\"Keins der genannten\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=36;
							    Data[1]=AnswerFinLit[9];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit10"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[10];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=61;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Considering a long time period (for example 10 or 20 years), which asset normally gives the highest return?\";2=\"Welche Veranlagung liefert ber einen langen Zeitraum (zum Beispiel 10 oder 20 Jahre) normalerweise die hchste Rendite?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[10];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"Savings accounts\";2=\"Sparbcher\";>\" ; 0 = \"<\\Language|!text: 1=\"Bonds\";2=\"Anleihen\";>\"; 1 = \"<\\Language|!text: 1=\"Stocks\";2=\"Aktien\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\"";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=37;
							    Data[1]=AnswerFinLit[10];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit11"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[11];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=62;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Normally, which asset displays the highest fluctuations over time?\";2=\"Welche Veranlagung erlebt ber die Zeit die strksten Schwankungen?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[11];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"Savings accounts\";2=\"Sparbcher\";>\" ; 0 = \"<\\Language|!text: 1=\"Bonds\";2=\"Anleihen\";>\"; 1 = \"<\\Language|!text: 1=\"Stocks\";2=\"Aktien\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\"";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=38;
							    Data[1]=AnswerFinLit[11];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit12"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[12];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=63;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"When an investor spreads his money among different assets, does the risk of losing money:\";2=\"Wenn ein Investor sein Geld ber verschiedene Veranlagungen streut, wird das Risiko, Geld zu verlieren:\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[12];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"Increase\";2=\"Zunehmen\";>\" ; 1 = \"<\\Language|!text: 1=\"Decrease\";2=\"Abnehmen\";>\"; 0 = \"<\\Language|!text: 1=\"Stay the same\";2=\"Gleich bleiben\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=39;
							    Data[1]=AnswerFinLit[12];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit13"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[13];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=64;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"If you buy a 10-year bond, it means you cannot sell it after 5 years without incurring a major penalty. True or False?\";2=\"Wenn Sie eine 10jhrige Anleihe kaufen, dann bedeutet das, dass Sie diese nicht nach 5 Jahren verkaufen knnen, ohne einen deutlichen Abschlag in Kauf nehmen zu mssen. Richtig oder falsch?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[13];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"True\";2=\"Richtig\";>\" ; 1 = \"<\\Language|!text: 1=\"False\";2=\"Falsch\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=40;
							    Data[1]=AnswerFinLit[13];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit14"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[14];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=65;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Stocks are normally riskier than bonds. True or false?\";2=\"Aktien sind normalerweise riskanter als Anleihen. Richtig oder falsch?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[14];
					format = "<>!radio: 1 = \"<\\Language|!text: 1=\"True\";2=\"Richtig\";>\" ; 0 = \"<\\Language|!text: 1=\"False\";2=\"Falsch\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=41;
							    Data[1]=AnswerFinLit[14];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit15"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[15];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=66;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"Buying a company stock usually provides a safer return than a stock mutual fund. True or false?\";2=\"Die Aktie eines Unternehmens zu kaufen liefert blicherweise eine sicherere Rendite als ein Aktien-Investmentfonds. Richtig oder falsch?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[15];
					format = "<>!radio: 0 = \"<\\Language|!text: 1=\"True\";2=\"Richtig\";>\" ; 1 = \"<\\Language|!text: 1=\"False\";2=\"Falsch\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=42;
							    Data[1]=AnswerFinLit[15];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLit16"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = never;
		timeout = -1;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0)*\AskFinLit[16];
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = Participate==1;
			ownervariable = Subject;
			do{
				FinLitID=FinLitID+1;
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=67;
				    }
				
				
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "Standard"{
				hasframe = FALSE;
				width = 700p;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					label = "<>{\\rtf \\fs<\\FontSizeStandard|1> <FinLitID|1>) <\\Language|!text: 1=\"If the interest rate falls, what should happen to bond prices?\";2=\"Wenn die Zinsstze fallen, was sollte mit den Anleihepreisen geschehen?\";>}";
				}
				item{
					label = " ";
				}
				item{
					variable = AnswerFinLit[16];
					format = "<>!radio: 1= \"<\\Language|!text: 1=\"Rise\";2=\"Steigen\";>\" ; 0 = \"<\\Language|!text: 1=\"Fall\";2=\"Fallen\";>\"; 0 = \"<\\Language|!text: 1=\"Stay the same\";2=\"Gleich bleiben\";>\"; 0=\"<\\Language|!text: 1=\"None of the above\";2=\"Keins der genannten\";>\"; 0 = \"<\\Language|!text: 1=\"Do not know\";2=\"Wei nicht\";>\"; 0=\"<\\Language|!text: 1=\"Refusal\";2=\"Keine Antwort\";>\";";
					input = TRUE;
					showdefault = FALSE;
					emptyallowed = FALSE;
					min = 0;
					max = 1;
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=43;
							    Data[1]=AnswerFinLit[16];
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	stage "FinLitResult"{
		startwaitforall = FALSE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = always;
		timeout = \TimeFinLitResult;
		program{
			table = subjects;
			do{
				Participate=if(\ForcedExitExperiment+\ForcedExitPeriod>0,0,1)*\FinLit*(1-IsExperimenter)*if(\Period==\NumPeriods,1,0);
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Result calculation FinLit
				
				FinLitScore=AnswerFinLit[1]+AnswerFinLit[2]+AnswerFinLit[3]+AnswerFinLit[4]+AnswerFinLit[5]+AnswerFinLit[6]+AnswerFinLit[7]+AnswerFinLit[8]+AnswerFinLit[9]+AnswerFinLit[10]+AnswerFinLit[11]+AnswerFinLit[12]+AnswerFinLit[13]+AnswerFinLit[14]+AnswerFinLit[15]+AnswerFinLit[16];
				
				if (\PayFinLit==1&\PayFinLitRandom==1) {
				    r=roundup(random()*\NumFinLit,1);
				    i=0;
				    j=0;
				    while (i<=16) {
				        if (\AskFinLit[i]==1) {
				            j=j+1;
				            FinLitRandomPayQuestionID=if(j==r,j,FinLitRandomPayQuestionID);
				            FinLitRandomPayQuestion=if(j==r,i,FinLitRandomPayQuestion);
				            }
				        i=i+1;
				        }
				    }
				
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0&\PayFinLit==1;
			ownervariable = Subject;
			do{
				//Payoff calculation FinLit
				
				Profit=if (\PayFinLitRandom==1,Profit+\PayoffFinLit*AnswerFinLit[FinLitRandomPayQuestion], Profit+\PayoffFinLit*FinLitScore/\NumFinLit);
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			ownervariable = Subject;
			do{
				//Timelog
				
				timelog.new
				    {
				    ID=timelog.maximum(ID)+1;
				    Time=gettime()-\StartTime;
				    Period=\Period;
				    Subject=:Subject;
				    Event=68;
				    }
				
				
				
			}
		}
		program{
			table = subjects;
			condition = IsExperimenter==0;
			do{
				//Writes data into profit table
				
				profit.do{
				    if(same(Period)&same(Subject)) {
				        Profit=:Profit;
				        Cash=:Cash;
				        for(Market,\NumMarkets){
				            Assets[Market]=:Assets[Market];
				            }
				        }
				    }
			}
		}
		program{
			table = globals;
			condition = RandomPeriodPayoff==1;
			do{
				//Handles RandomPeriodPayoff
				
				//If last period, fill subjects.Profit with profit.Profit data for the period randomly chosen to be paid
				if (Period==NumPeriods) {
				    subjects.do{
				        Profit=profit.find(Period==\RandomPayoffPeriod&same(Subject),Profit);
				        }
				    }
				
				//Otherwise, empty subjects.Profit
				else {
				    subjects.do{
				        Profit=0;
				        }
				    }
				
				
			}
		}
		program{
			table = subjects;
			condition = Period==\NumPeriods;
			do{
				//Minimum payoff addition
				
				//Adds Profit if profit to date including this period is below MinPayoffEuro
				if(\MinPayoffCurrency>0){
				    Profit=Profit+if((session.find(same(Subject),FinalProfit)+Profit)*\ExchangeRate<\MinPayoffCurrency,\MinPayoffCurrency/\ExchangeRate-session.find(same(Subject),FinalProfit)-Profit,0);
				    }
				
				//Adds Profit if profit to date including this period is below MinPayoffECU
				if(\MinPayoffECU>0){
				    Profit=Profit+if(session.find(same(Subject),FinalProfit)+Profit<\MinPayoffECU,\MinPayoffECU-session.find(same(Subject),FinalProfit)-Profit,0);
				    }
				
			}
		}
		screen action{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "ResultFinLitPaidRandom"{
				hasframe = FALSE;
				displaycondition = \PayFinLit>0&\PayFinLitRandom==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"The random number generator has drawn question <FinLitRandomPayQuestionID|1>. Your answer on question <FinLitRandomPayQuestionID|1> was <AnswerFinLit[FinLitRandomPayQuestion]|!text: 1=\"correct\"; 0=\"incorrect\";>.\" 2=\"Der Zufallsgenerator hat Frage <FinLitRandomPayQuestionID|1> ausgewhlt. Ihre Antwort auf Frage <FinLitRandomPayQuestionID|1> war <AnswerFinLit[FinLitRandomPayQuestion]|!text: 1=\"richtig\"; 0=\"falsch\";>.\"";
					input = FALSE;
				}
				item{
					variable = AnswerFinLit[FinLitRandomPayQuestion];
					format = "<> !text: 0=\"<\\Language|!text: 1=\"This means that you will not receive additional payment for your questionnaire answers.\";2=\"Das bedeutet, dass Sie keine zustzliche Auszahlung fr Ihre Antworten auf den Fragebogen erhalten.\";>\" 1=\"<\\Language|!text: 1=\"This means that you will receive an additional payment of <\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\">.\";2=\"Das bedeutet, dass Sie eine zustzliche Auszahlung von <\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";> erhalten.\";>\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=47;
							    }
							
						}
					}
				}
			}
			standardbox "ResultFinLitPaidNonRandom"{
				hasframe = FALSE;
				displaycondition = \PayFinLit>0&\PayFinLitRandom==0;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"Out of the <\\NumFinLit|1> questions asked, you answered <FinLitScore|1> correctly. This means that you will receive an additional payment of <FinLitScore/\\NumFinLit*100|0.1>% of <\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\">, or <FinLitScore/\\NumFinLit*\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\"> for your questionnaire answers.\" 2=\"Sie haben <FinLitScore|1> der <\\NumFinLit|1> Fragen richtig beantwortet. Das bedeutet, dass Sie eine zustzliche Auszahlung in Hhe von <FinLitScore/\\NumFinLit*100|0.1>% von <\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnische Krone\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";>, oder <FinLitScore/\\NumFinLit*\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnische Krone\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";> fr Ihre Antworten erhalten.\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=47;
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ResultFinLitUnpaid"{
				hasframe = FALSE;
				displaycondition = \PayFinLit==0;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"Out of the <\\NumFinLit|1> questions asked, you answered <FinLitScore|1> correctly.\" 2=\"Von den <\\NumFinLit|1> Fragen haben Sie <FinLitScore|1> richtig beantwortet.\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
				button "OK"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = FALSE;
					specialbuttoncolor = TRUE;
					buttoncolor = 13158600;
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Subject=:Subject;
							    Event=47;
							    }
							
							
							
							
						}
					}
				}
			}
			standardbox "ButtonBox Testmode"{
				hasframe = FALSE;
				height = 30p;
				bottom = 0p;
				displaycondition = \Testmode1==1|IsExperimenter==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				button "LeaveExperiment"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitExperiment=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=46;
							    }
							
							
							
						}
					}
				}
				button "LeavePeriod"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							\ForcedExitPeriod=1;
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=45;
							    }
							
							
							
						}
					}
				}
				button "LeaveStage"{
					clearinputafterok = FALSE;
					norecordmadeorselected = FALSE;
					terminatestage = FALSE;
					donotterminatestage = TRUE;
					specialbuttoncolor = TRUE;
					buttoncolor = 65280;
					program{
						table = globals;
						do{
							subjects.do{LeaveStage=1;}
							
							
							
							
						}
					}
					program{
						table = subjects;
						ownervariable = Subject;
						do{
							//Timelog
							
							timelog.new
							    {
							    ID=timelog.maximum(ID)+1;
							    Time=gettime()-\StartTime;
							    Period=\Period;
							    Event=44;
							    }
							
							
							
							
						}
					}
				}
			}
		}
		screen wait{
			usesbg = FALSE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
			standardbox "ResultFinLitPaidRandom"{
				hasframe = FALSE;
				displaycondition = \PayFinLit>0&\PayFinLitRandom==1;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"The random number generator has drawn question <FinLitRandomPayQuestionID|1>. Your answer on question <FinLitRandomPayQuestionID|1> was <AnswerFinLit[FinLitRandomPayQuestion]|!text: 1=\"correct\"; 0=\"incorrect\";>.\" 2=\"Der Zufallsgenerator hat Frage <FinLitRandomPayQuestionID|1> ausgewhlt. Ihre Antwort auf Frage <FinLitRandomPayQuestionID|1> war <AnswerFinLit[FinLitRandomPayQuestion]|!text: 1=\"richtig\"; 0=\"falsch\";>.\"";
					input = FALSE;
				}
				item{
					variable = AnswerFinLit[FinLitRandomPayQuestion];
					format = "<> !text: 0=\"<\\Language|!text: 1=\"This means that you will not receive additional payment for your questionnaire answers.\";2=\"Das bedeutet, dass Sie keine zustzliche Auszahlung fr Ihre Antworten auf den Fragebogen erhalten.\";>\" 1=\"<\\Language|!text: 1=\"This means that you will receive an additional payment of <\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\">.\";2=\"Das bedeutet, dass Sie eine zustzliche Auszahlung von <\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"Euro\"; 2=\"US Dollar\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";> erhalten.\";>\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
			}
			standardbox "ResultFinLitPaidNonRandom"{
				hasframe = FALSE;
				displaycondition = \PayFinLit>0&\PayFinLitRandom==0;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"Out of the <\\NumFinLit|1> questions asked, you answered <FinLitScore|1> correctly. This means that you will receive an additional payment of <FinLitScore/\\NumFinLit*100|0.1>% of <\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\">, or <FinLitScore/\\NumFinLit*\\PayoffFinLit|0.01> <\\Currency|!text: 1=\"Euro\" 2=\"US Dollars\" 3=\"Danish Kroner\" 4=\"Australian Dollars\"> for your questionnaire answers.\" 2=\"Sie haben <FinLitScore|1> der <\\NumFinLit|1> Fragen richtig beantwortet. Das bedeutet, dass Sie eine zustzliche Auszahlung in Hhe von <FinLitScore/\\NumFinLit*100|0.1>% von <\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnische Krone\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";>, oder <FinLitScore/\\NumFinLit*\\PayoffFinLit|0.01> <\\PayoffFinLit|!text: 0.999=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\"; 1=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnische Krone\"; 4=\"Australischen Dollar\">\";1.001=\"<\\Currency|!text: 1=\"US Dollar\"; 2=\"Euro\"; 3=\"Dnischen Kronen\"; 4=\"Australischen Dollar\">\";> fr Ihre Antworten erhalten.\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
			}
			standardbox "ResultFinLitUnpaid"{
				hasframe = FALSE;
				displaycondition = \PayFinLit==0;
				buttonposition = BOTTOMRIGHT;
				buttonsequence = HORIZONTAL;
				item{
					variable = \Language;
					format = "<> !text: 1=\"Out of the <\\NumFinLit|1> questions asked, you answered <FinLitScore|1> correctly.\" 2=\"Von den <\\NumFinLit|1> Fragen haben Sie <FinLitScore|1> richtig beantwortet.\"";
					input = FALSE;
				}
				item{
					label = " ";
				}
				item{
					label = "<><\\Language|!text: 1=\"Should you have any questions regarding the questionnaire, please ask the experimenter when you receive your payment.\";2=\"Sollten Sie fragen bezglich des Fragebogens haben, richten Sie diese bitte an den Experimentleiter, wenn Sie Ihre Auszahlung erhalten.\";>";
				}
				item{
					label = "<><\\Language|!text: 1=\"Meanwhile, please remain seated until the experiment continues.\";2=\"Bleiben Sie inzwischen bitte sitzen bis das Experiment weitergeht.\";>";
				}
			}
		}
	}
	stage "BackupDump"{
		startwaitforall = TRUE;
		startConditionStr = "";
		singleentry = FALSE;
		singleentrycontinuation = FALSE;
		timeouttype = always;
		timeout = 0;
		tabledumper{
			condition = \BackupDump==1;
			outputfilename = "<>GIMS_P<\\Period|!text:9=\"00<Period|1>\";10=\"0<Period|1>\";99=\"0<Period|1>\";100=\"<Period|1>\";>_<gettime()|1>.zBackup";
			tabledescriptions = "globals;subjects;summary;contracts;session;auctionoffers;auctionpractice;dividends;marketsummary;offers;practicetasks;profit;results;signals;timelog;transactions";
		}
		program{
			table = subjects;
			do{
				//Kicks out subjects in case clock is stopped
				
				LeaveStage=1;
			}
		}
		screen action{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
		screen wait{
			usesbg = TRUE;
			withalertscreen = FALSE;
			noalertscreen = FALSE;
		}
	}
	roles{
		role "S 1"{
		}
		role "S 2"{
		}
		role "S 3"{
		}
	}
	period "1"{
		prompt = "";
		subject 1{
			name = "";
			group = 1;
		}
		subject 2{
			name = "";
			group = 1;
		}
		subject 3{
			name = "";
			group = 1;
		}
	}
}